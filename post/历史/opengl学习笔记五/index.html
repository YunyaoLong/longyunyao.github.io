
<!DOCTYPE html>
<html
  lang="zh"
  data-figures=""
  
    class="page"
  
  
  >
  <head>
<title>OpenGL学习笔记（五） | Clarity</title>
<meta charset="utf-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">





  
<meta property="og:locale" content="zh" />

<meta property="og:type" content="article">
<meta name="description" content="龙云尧个人博客，转载请注明出处。
CSDN地址：http://blog.csdn.net/michael753951/article/details/71316132
个人blog地址：http://yaoyl.cn/nehexue-xi-bi-ji-wu/

这次我们将尝试Lesson6和Lesson7的内容。这个部 …" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:creator" content="@janedoe">
<meta name="twitter:title" content="OpenGL学习笔记（五）" />
<meta name="twitter:image" content="https://yaoyl.cn/images/thumbnail.png"/>
<meta property="og:url" content="https://yaoyl.cn//post/%E5%8E%86%E5%8F%B2/opengl%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BA%94/" />
<meta property="og:title" content="OpenGL学习笔记（五）" />
<meta property="og:description" content="龙云尧个人博客，转载请注明出处。
CSDN地址：http://blog.csdn.net/michael753951/article/details/71316132
个人blog地址：http://yaoyl.cn/nehexue-xi-bi-ji-wu/

这次我们将尝试Lesson6和Lesson7的内容。这个部 …" />
<meta property="og:image" content="https://yaoyl.cn/images/thumbnail.png" />
  <meta name="keywords" content="nehe,OpenGL,C&#43;&#43;" />
  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "BlogPosting",
      "mainEntityOfPage":"https:\/\/yaoyl.cn\/\/post\/%E5%8E%86%E5%8F%B2\/opengl%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BA%94\/",
      "name": "Clarity",
      "headline": "OpenGL学习笔记（五）",
      "description": "\u003cp\u003e\u003cstrong\u003e龙云尧个人博客，转载请注明出处。\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eCSDN地址：http://blog.csdn.net/michael753951/article/details/71316132\u003c/p\u003e\n\u003cp\u003e个人blog地址：http://yaoyl.cn/nehexue-xi-bi-ji-wu/\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e这次我们将尝试Lesson6和Lesson7的内容。这个部 …\u003c/p\u003e",
      "url": "https:\/\/yaoyl.cn\/\/post\/%E5%8E%86%E5%8F%B2\/opengl%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BA%94\/",
      "datePublished": "2017-05-07T12:21:47Z",
      "dateModified": "2017-05-07T12:21:47Z",
      "keywords": ["nehe","OpenGL","C++"],
        "articleSection": ["C++"],
      "author": {
        "@type": "Person",
        "name": "map[name:Yunyao Long]"
      },
      "image":{
        "@type":"ImageObject",
        "url": "https:\/\/yaoyl.cn\/images\/thumbnail.png"
      },
      "publisher": {
        "@type": "Organization",
        "logo": {
          "@type":"ImageObject",
          "url": "https:\/\/yaoyl.cn\/logos\/logo.png"
        },
        "name": "Clarity"
      }
    }
  </script>

<link rel="apple-touch-icon" sizes="180x180" href="https://yaoyl.cn/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://yaoyl.cn/icons/favicon-32x32.png">
<link rel="manifest" href="https://yaoyl.cn/icons/site.webmanifest">

<link rel="canonical" href="https://yaoyl.cn//post/%E5%8E%86%E5%8F%B2/opengl%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BA%94/">



<link rel="preload" href="https://yaoyl.cn//css/styles.dc38388a8f0b890e788bd3a99b7495d14e7d5ac4359ed3b49abeb778497863b284ad4cc7e496ef58c84139295f9bafed82f5a41345eda86bd2d429cccb7c2596.css" integrity = "sha512-3Dg4io8LiQ54i9Opm3SV0U59WsQ1ntO0mr63eEl4Y7KErUzH5JbvWMhBOSlfm6/tgvWkE0XtqGvS1CnMy3wllg==" as="style" crossorigin="anonymous">



<link rel="preload" href="https://yaoyl.cn//zh/js/bundle.8f271a7a6d395b2060587165126e81bf1265bf8be2a25f4da029201983fd6a1ce76d15acb6cec02a048c2818f979766a191371aff44d01905ff33ee0875706d0.js" as="script" integrity=
"sha512-jycaem05WyBgWHFlEm6BvxJlv4viol9NoCkgGYP9ahznbRWsts7AKgSMKBj5eXZqGRNxr/RNAZBf8z7gh1cG0A==" crossorigin="anonymous">


<link rel="stylesheet" type="text/css" href="https://yaoyl.cn//css/styles.dc38388a8f0b890e788bd3a99b7495d14e7d5ac4359ed3b49abeb778497863b284ad4cc7e496ef58c84139295f9bafed82f5a41345eda86bd2d429cccb7c2596.css" integrity="sha512-3Dg4io8LiQ54i9Opm3SV0U59WsQ1ntO0mr63eEl4Y7KErUzH5JbvWMhBOSlfm6/tgvWkE0XtqGvS1CnMy3wllg==" crossorigin="anonymous">

  </head>
  <body
    data-code="7"
    data-lines="false"
    id="documentTop"
    data-lang="zh"
  >

<header class="nav_header" >
  <nav class="nav"><a href='https://yaoyl.cn/' class="nav_brand nav_item" title="Clarity">
  <img src="https://yaoyl.cn/logos/logo.png" class="logo" alt="Clarity">
  <div class="nav_close">
    <div><svg class="icon">
  <title>open-menu</title>
  <use xlink:href="#open-menu"></use>
</svg>
<svg class="icon">
  <title>closeme</title>
  <use xlink:href="#closeme"></use>
</svg>
</div>
  </div>
</a>

    <div class='nav_body nav_body_left'>
      
      
      
        

  <div class="nav_parent">
    <a href="https://yaoyl.cn/" class="nav_item" title="主页">主页 </a>
  </div>
  <div class="nav_parent">
    <a href="https://yaoyl.cn/post/rich-content/" class="nav_item" title="加精">加精 </a>
  </div>
  <div class="nav_parent">
    <a href="https://yaoyl.cn/" class="nav_item" title="外链">外链 <img src='https://yaoyl.cn/icons/caret-icon.svg' alt="icon" class="nav_icon"></a>
    <div class="nav_sub">
      <span class="nav_child"></span>
        <a href="https://www.linkedin.com/" class="nav_child nav_item" title="LinkedIn">LinkedIn</a>
    </div>
  </div>
  <div class="nav_parent">
    <a href="https://yaoyl.cn/about/" class="nav_item" title="关于我">关于我 </a>
  </div>
      
      <div class="nav_parent">
        <a href="#" class="nav_item"></a>
        <div class="nav_sub">
          <span class="nav_child"></span>
          
          <a href="https://yaoyl.cn//en/" class="nav_child nav_item">English</a>
          
          <a href="https://yaoyl.cn//pt/" class="nav_child nav_item">Português</a>
          
          <a href="https://yaoyl.cn//" class="nav_child nav_item">中文</a>
          
        </div>
      </div>
<div class='follow'>
  <a href="https://github.com/YunyaoLong">
    <svg class="icon">
  <title>github</title>
  <use xlink:href="#github"></use>
</svg>

  </a>
  <a href="https://www.linkedin.com/in/yunyaolong/">
    <svg class="icon">
  <title>linkedin</title>
  <use xlink:href="#linkedin"></use>
</svg>

  </a>
<div class="color_mode">
  <input type="checkbox" class="color_choice" id="mode">
</div>

</div>

    </div>
  </nav>
</header>

    <main>
  
<div class="grid-inverse wrap content">
  <article class="post_content">
    <h1 class="post_title">OpenGL学习笔记（五）</h1>
  <div class="post_meta">
    <span><svg class="icon">
  <title>calendar</title>
  <use xlink:href="#calendar"></use>
</svg>
</span>
    <span class="post_date">
      May 7, 2017	  
    </span>
    <span class="post_time"> · 9 分钟阅读</span><span>&nbsp;· <a href='https://yaoyl.cn/tags/nehe/' title="nehe" class="post_tag button button_translucent">nehe
        </a><a href='https://yaoyl.cn/tags/opengl/' title="OpenGL" class="post_tag button button_translucent">OpenGL
        </a><a href='https://yaoyl.cn/tags/c&#43;&#43;/' title="C&#43;&#43;" class="post_tag button button_translucent">C&#43;&#43;
        </a>
    </span>
    <span class="page_only">&nbsp;·
  <div class="post_share">
    分享到:
    <a href="https://twitter.com/intent/tweet?text=OpenGL%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0%ef%bc%88%e4%ba%94%ef%bc%89&url=https%3a%2f%2fyaoyl.cn%2f%2fpost%2f%25E5%258E%2586%25E5%258F%25B2%2fopengl%25E5%25AD%25A6%25E4%25B9%25A0%25E7%25AC%2594%25E8%25AE%25B0%25E4%25BA%2594%2f&tw_p=tweetbutton" class="twitter" title="分享到 Twitter" target="_blank" rel="nofollow">
      <svg class="icon">
  <title>twitter</title>
  <use xlink:href="#twitter"></use>
</svg>

    </a>
    <a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fyaoyl.cn%2f%2fpost%2f%25E5%258E%2586%25E5%258F%25B2%2fopengl%25E5%25AD%25A6%25E4%25B9%25A0%25E7%25AC%2594%25E8%25AE%25B0%25E4%25BA%2594%2f&t=OpenGL%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0%ef%bc%88%e4%ba%94%ef%bc%89" class="facebook" title="分享到 Facebook" target="_blank" rel="nofollow">
      <svg class="icon">
  <title>facebook</title>
  <use xlink:href="#facebook"></use>
</svg>

    </a>
    <a href="#linkedinshare" id = "linkedinshare" class="linkedin" title="分享到 LinkedIn" rel="nofollow">
      <svg class="icon">
  <title>linkedin</title>
  <use xlink:href="#linkedin"></use>
</svg>

    </a>
    <a href="https://yaoyl.cn//post/%E5%8E%86%E5%8F%B2/opengl%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BA%94/" title="Copy Link" class="link link_yank">
      <svg class="icon">
  <title>copy</title>
  <use xlink:href="#copy"></use>
</svg>

    </a>
  </div>
  </span>
  </div>

    <div class="post_body"><p><strong>龙云尧个人博客，转载请注明出处。</strong></p>
<p>CSDN地址：http://blog.csdn.net/michael753951/article/details/71316132</p>
<p>个人blog地址：http://yaoyl.cn/nehexue-xi-bi-ji-wu/</p>
<hr>
<p>这次我们将尝试Lesson6和Lesson7的内容。这个部分我们将学习怎么给一个模型进行纹理映射（其实就是贴图）。</p>
<h2 id="环境搭建">环境搭建</h2>
<p>这次实验因为需要使用OpenGL的glaux.h库头使用位图对构建的图形进行纹理映射。所以我们需要进一步进行环境搭建。（注：环境搭建很麻烦，因为微软的VS环境很乱）</p>
<p>如何布置这个库头可以参考<a href="http://blog.csdn.net/delphiwcdj/article/details/6326586/">【 VS2008无法打开gl/glaux.h头文件的解决方法】</a>我使用的是方法4，测试能够正确include库头。</p>
<p>在高版本的VS中，因为VS使用的是自己重新修改过的C++，所以在进行编译的过程中，可能会出现ERROR LNK2019报错，无法解析“_sscanf,_sscanf_s”，这个时候我们可以参考<a href="http://blog.csdn.net/u010317005/article/details/51155363">【 VS2015 无法解析的外部符号 __vsnwprintf_s】</a></p>
<p>如果我们在使用AUX_RGBImageRec定义变量的时候，系统没有报错的话，就说明我们本次基本的环境已经搭建好了。</p>
<p>另外，因为我们在实验中需要使用fopen，而微软的VS2015中会强行报错，为了避免不必要的麻烦，我们需要关掉fopen的报错。这个部分我们可以参考<a href="http://jingyan.baidu.com/article/ce436649fd61543773afd32e.html">【百度经验：VS2013中如何解决error C4996: 'fopen'问题】</a></p>
<h2 id="开始实现">开始实现</h2>
<p>如果没出什么问题的话，到这里我们应该能够正常的编写这一刻的代码了。（如果还有什么报错请尝试自行解决或者戳我）。</p>
<p>本次需要在3维图像上添加纹理映射，首先需要的是读取位图像文件。读取的代码如下。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="n">AUX_RGBImageRec</span> <span class="o">*</span><span class="nf">LoadBMP</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">Filename</span><span class="p">)</span>                <span class="c1">// Loads A Bitmap Image
</span></span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="c1"></span><span class="p">{</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">    <span class="n">FILE</span> <span class="o">*</span><span class="n">File</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>                                    <span class="c1">// File Handle
</span></span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">Filename</span><span class="p">)</span>                                      <span class="c1">// Make Sure A Filename Was Given
</span></span></span><span class="line"><span class="ln"> 6</span><span class="cl"><span class="c1"></span>    <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>                                    <span class="c1">// If Not Return NULL
</span></span></span><span class="line"><span class="ln"> 8</span><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">
</span></span><span class="line"><span class="ln">10</span><span class="cl">    <span class="n">File</span><span class="o">=</span><span class="nf">fopen</span><span class="p">(</span><span class="n">Filename</span><span class="p">,</span><span class="s">&#34;r&#34;</span><span class="p">);</span>                           <span class="c1">// Check To See If The File Exists
</span></span></span><span class="line"><span class="ln">11</span><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="ln">12</span><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">File</span><span class="p">)</span>                                           <span class="c1">// Does The File Exist?
</span></span></span><span class="line"><span class="ln">13</span><span class="cl"><span class="c1"></span>    <span class="p">{</span>
</span></span><span class="line"><span class="ln">14</span><span class="cl">        <span class="nf">fclose</span><span class="p">(</span><span class="n">File</span><span class="p">);</span>                                   <span class="c1">// Close The Handle
</span></span></span><span class="line"><span class="ln">15</span><span class="cl"><span class="c1"></span>        <span class="k">return</span> <span class="nf">auxDIBImageLoad</span><span class="p">(</span><span class="n">Filename</span><span class="p">);</span>               <span class="c1">// Load The Bitmap And Return A Pointer
</span></span></span><span class="line"><span class="ln">16</span><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="ln">17</span><span class="cl">
</span></span><span class="line"><span class="ln">18</span><span class="cl">    <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>                                        <span class="c1">// If Load Failed Return NULL
</span></span></span><span class="line"><span class="ln">19</span><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="ln">20</span><span class="cl">
</span></span><span class="line"><span class="ln">21</span><span class="cl"><span class="kt">int</span> <span class="nf">LoadGLTextures</span><span class="p">()</span>                                    <span class="c1">// Load Bitmaps And Convert To Textures
</span></span></span><span class="line"><span class="ln">22</span><span class="cl"><span class="c1"></span><span class="p">{</span>
</span></span><span class="line"><span class="ln">23</span><span class="cl">    <span class="kt">int</span> <span class="n">Status</span><span class="o">=</span><span class="n">FALSE</span><span class="p">;</span>                                   <span class="c1">// Status Indicator
</span></span></span><span class="line"><span class="ln">24</span><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="ln">25</span><span class="cl">    <span class="n">AUX_RGBImageRec</span> <span class="o">*</span><span class="n">TextureImage</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>                   <span class="c1">// Create Storage Space For The Texture
</span></span></span><span class="line"><span class="ln">26</span><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="ln">27</span><span class="cl">    <span class="nf">memset</span><span class="p">(</span><span class="n">TextureImage</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="o">*</span><span class="mi">1</span><span class="p">);</span>            <span class="c1">// Set The Pointer To NULL
</span></span></span><span class="line"><span class="ln">28</span><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="ln">29</span><span class="cl">    <span class="c1">// Load The Bitmap, Check For Errors, If Bitmap&#39;s Not Found Quit
</span></span></span><span class="line"><span class="ln">30</span><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">TextureImage</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="nf">LoadBMP</span><span class="p">(</span><span class="s">&#34;Data/NeHe.bmp&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="ln">31</span><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="ln">32</span><span class="cl">        <span class="n">Status</span><span class="o">=</span><span class="n">TRUE</span><span class="p">;</span>                                    <span class="c1">// Set The Status To TRUE
</span></span></span><span class="line"><span class="ln">33</span><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="ln">34</span><span class="cl">        <span class="nf">glGenTextures</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">texture</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>                  <span class="c1">// Create The Texture
</span></span></span><span class="line"><span class="ln">35</span><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="ln">36</span><span class="cl">        <span class="c1">// Typical Texture Generation Using Data From The Bitmap
</span></span></span><span class="line"><span class="ln">37</span><span class="cl"><span class="c1"></span>        <span class="nf">glBindTexture</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">texture</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span></span><span class="line"><span class="ln">38</span><span class="cl">        <span class="nf">glTexImage2D</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">TextureImage</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">sizeX</span><span class="p">,</span> <span class="n">TextureImage</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">sizeY</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">GL_RGB</span><span class="p">,</span> <span class="n">GL_UNSIGNED_BYTE</span><span class="p">,</span> <span class="n">TextureImage</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">39</span><span class="cl">        <span class="nf">glTexParameteri</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span><span class="n">GL_TEXTURE_MIN_FILTER</span><span class="p">,</span><span class="n">GL_LINEAR</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">40</span><span class="cl">        <span class="nf">glTexParameteri</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span><span class="n">GL_TEXTURE_MAG_FILTER</span><span class="p">,</span><span class="n">GL_LINEAR</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">41</span><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="ln">42</span><span class="cl">
</span></span><span class="line"><span class="ln">43</span><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">TextureImage</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>                                    <span class="c1">// If Texture Exists
</span></span></span><span class="line"><span class="ln">44</span><span class="cl"><span class="c1"></span>    <span class="p">{</span>
</span></span><span class="line"><span class="ln">45</span><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">TextureImage</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">)</span>                          <span class="c1">// If Texture Image Exists
</span></span></span><span class="line"><span class="ln">46</span><span class="cl"><span class="c1"></span>        <span class="p">{</span>
</span></span><span class="line"><span class="ln">47</span><span class="cl">            <span class="nf">free</span><span class="p">(</span><span class="n">TextureImage</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">);</span>                    <span class="c1">// Free The Texture Image Memory
</span></span></span><span class="line"><span class="ln">48</span><span class="cl"><span class="c1"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="ln">49</span><span class="cl">
</span></span><span class="line"><span class="ln">50</span><span class="cl">        <span class="nf">free</span><span class="p">(</span><span class="n">TextureImage</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>                              <span class="c1">// Free The Image Structure
</span></span></span><span class="line"><span class="ln">51</span><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="ln">52</span><span class="cl">
</span></span><span class="line"><span class="ln">53</span><span class="cl">    <span class="k">return</span> <span class="n">Status</span><span class="p">;</span>                                      <span class="c1">// Return The Status
</span></span></span><span class="line"><span class="ln">54</span><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></div><p>第一个函数LoadBMP不需要解释，主要功能就是探寻目的位置中是否存在该图像文件。如果存在就调用auxDIBImageLoad将位图加载成渲染文件返回出来。</p>
<p>第二个函数LoadGLTextures要稍微注意一下，在本次实验中是很重要的一个功能函数。</p>
<p>函数中定义了一个LoadGLTextures数组用来存放位图的句柄，这里因为我们只读取了一张位图，所以只开了一个大小的数组。</p>
<p>接着调用LoadBMP将位图转换成为纹理渲染文件存进TextureImage， glGenTextures(1, &amp;texture[0]) 告诉OpenGL我们想生成一个纹理名字，glBindTexture将纹理名字 texture[0] 绑定到纹理目标上。</p>
<p>然后我们调用glTexImage2D进行纹理的创建。然后使用glTexParameteri对图像进行放大和缩小的滤波器进行设置。</p>
<p>最后再纹理穿件完成之后，我们需要释放掉纹理渲染数组中的内容。</p>
<p>整个纹理渲染工作到这里也就结束了。我们对InitGL稍作修改，使用LoadGLTextures检验位图是否存在，然后调用glEnable启用映射</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="kt">int</span> <span class="nf">InitGL</span><span class="p">(</span><span class="n">GLvoid</span><span class="p">)</span>        <span class="c1">// 此处开始对OpenGL进行所有设置
</span></span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="c1"></span><span class="p">{</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl"> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nf">LoadGLTextures</span><span class="p">())</span>       <span class="c1">// 调用纹理载入子例程
</span></span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="c1"></span> <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">  <span class="k">return</span> <span class="n">FALSE</span><span class="p">;</span>       <span class="c1">// 如果未能载入，返回FALSE
</span></span></span><span class="line"><span class="ln"> 6</span><span class="cl"><span class="c1"></span> <span class="p">}</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl"> <span class="nf">glEnable</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">);</span>      <span class="c1">// 启用纹理映射
</span></span></span><span class="line"><span class="ln"> 8</span><span class="cl"><span class="c1"></span> <span class="nf">glShadeModel</span><span class="p">(</span><span class="n">GL_SMOOTH</span><span class="p">);</span>      <span class="c1">// 启用阴影平滑
</span></span></span><span class="line"><span class="ln"> 9</span><span class="cl"><span class="c1"></span> <span class="nf">glClearColor</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.5f</span><span class="p">);</span>     <span class="c1">// 黑色背景
</span></span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="c1"></span> <span class="nf">glClearDepth</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">);</span>       <span class="c1">// 设置深度缓存
</span></span></span><span class="line"><span class="ln">11</span><span class="cl"><span class="c1"></span> <span class="nf">glEnable</span><span class="p">(</span><span class="n">GL_DEPTH_TEST</span><span class="p">);</span>      <span class="c1">// 启用深度测试
</span></span></span><span class="line"><span class="ln">12</span><span class="cl"><span class="c1"></span> <span class="nf">glDepthFunc</span><span class="p">(</span><span class="n">GL_LEQUAL</span><span class="p">);</span>       <span class="c1">// 所作深度测试的类型
</span></span></span><span class="line"><span class="ln">13</span><span class="cl"><span class="c1"></span> <span class="nf">glHint</span><span class="p">(</span><span class="n">GL_PERSPECTIVE_CORRECTION_HINT</span><span class="p">,</span> <span class="n">GL_NICEST</span><span class="p">);</span>   <span class="c1">// 真正精细的透视修正
</span></span></span><span class="line"><span class="ln">14</span><span class="cl"><span class="c1"></span> <span class="k">return</span> <span class="n">TRUE</span><span class="p">;</span>        <span class="c1">// 初始化 OK
</span></span></span><span class="line"><span class="ln">15</span><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></div><p>最后我们按照惯例，修改DrawGLScene方法，需要注意的是，在将纹理贴上模型的时候，需要调用glTexCoord2f方法，第一个参数是X坐标，0.0是纹理的左侧，0.5是纹理的中点，1.0是纹理的右侧。第二个参数是Y坐标，0.0是纹理的底部，0.5是纹理的中点，1.0是纹理的顶部。将4个点全部绑定在张芳行上面之后，便能够正常的显示了。需要注意的是，在glTexCoord2f方法中，参考系是以图像的右下角作为原点，左边为X轴正方向，上方为Y轴正方向（和绘图中的直角坐标系的设定相似）。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="ln"> 1</span><span class="cl">int DrawGLScene(GLvoid)                                 // Here&#39;s Where We Do All The Drawing
</span></span><span class="line"><span class="ln"> 2</span><span class="cl">{
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); // Clear The Screen And The Depth Buffer
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">    glLoadIdentity();                                   // Reset The View
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">    glTranslatef(0.0f,0.0f,-5.0f);
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">    glRotatef(xrot,1.0f,0.0f,0.0f);
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">    glRotatef(yrot,0.0f,1.0f,0.0f);
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">    glRotatef(zrot,0.0f,0.0f,1.0f);
</span></span><span class="line"><span class="ln">10</span><span class="cl">
</span></span><span class="line"><span class="ln">11</span><span class="cl">    glBindTexture(GL_TEXTURE_2D, texture[0]);
</span></span><span class="line"><span class="ln">12</span><span class="cl">
</span></span><span class="line"><span class="ln">13</span><span class="cl">    glBegin(GL_QUADS);
</span></span><span class="line"><span class="ln">14</span><span class="cl">        // Front Face
</span></span><span class="line"><span class="ln">15</span><span class="cl">        glTexCoord2f(0.0f, 0.0f); glVertex3f(-1.0f, -1.0f,  1.0f);
</span></span><span class="line"><span class="ln">16</span><span class="cl">        glTexCoord2f(1.0f, 0.0f); glVertex3f( 1.0f, -1.0f,  1.0f);
</span></span><span class="line"><span class="ln">17</span><span class="cl">        glTexCoord2f(1.0f, 1.0f); glVertex3f( 1.0f,  1.0f,  1.0f);
</span></span><span class="line"><span class="ln">18</span><span class="cl">        glTexCoord2f(0.0f, 1.0f); glVertex3f(-1.0f,  1.0f,  1.0f);
</span></span><span class="line"><span class="ln">19</span><span class="cl">        // Back Face
</span></span><span class="line"><span class="ln">20</span><span class="cl">        glTexCoord2f(1.0f, 0.0f); glVertex3f(-1.0f, -1.0f, -1.0f);
</span></span><span class="line"><span class="ln">21</span><span class="cl">        glTexCoord2f(1.0f, 1.0f); glVertex3f(-1.0f,  1.0f, -1.0f);
</span></span><span class="line"><span class="ln">22</span><span class="cl">        glTexCoord2f(0.0f, 1.0f); glVertex3f( 1.0f,  1.0f, -1.0f);
</span></span><span class="line"><span class="ln">23</span><span class="cl">        glTexCoord2f(0.0f, 0.0f); glVertex3f( 1.0f, -1.0f, -1.0f);
</span></span><span class="line"><span class="ln">24</span><span class="cl">        // Top Face
</span></span><span class="line"><span class="ln">25</span><span class="cl">        glTexCoord2f(0.0f, 1.0f); glVertex3f(-1.0f,  1.0f, -1.0f);
</span></span><span class="line"><span class="ln">26</span><span class="cl">        glTexCoord2f(0.0f, 0.0f); glVertex3f(-1.0f,  1.0f,  1.0f);
</span></span><span class="line"><span class="ln">27</span><span class="cl">        glTexCoord2f(1.0f, 0.0f); glVertex3f( 1.0f,  1.0f,  1.0f);
</span></span><span class="line"><span class="ln">28</span><span class="cl">        glTexCoord2f(1.0f, 1.0f); glVertex3f( 1.0f,  1.0f, -1.0f);
</span></span><span class="line"><span class="ln">29</span><span class="cl">        // Bottom Face
</span></span><span class="line"><span class="ln">30</span><span class="cl">        glTexCoord2f(1.0f, 1.0f); glVertex3f(-1.0f, -1.0f, -1.0f);
</span></span><span class="line"><span class="ln">31</span><span class="cl">        glTexCoord2f(0.0f, 1.0f); glVertex3f( 1.0f, -1.0f, -1.0f);
</span></span><span class="line"><span class="ln">32</span><span class="cl">        glTexCoord2f(0.0f, 0.0f); glVertex3f( 1.0f, -1.0f,  1.0f);
</span></span><span class="line"><span class="ln">33</span><span class="cl">        glTexCoord2f(1.0f, 0.0f); glVertex3f(-1.0f, -1.0f,  1.0f);
</span></span><span class="line"><span class="ln">34</span><span class="cl">        // Right face
</span></span><span class="line"><span class="ln">35</span><span class="cl">        glTexCoord2f(1.0f, 0.0f); glVertex3f( 1.0f, -1.0f, -1.0f);
</span></span><span class="line"><span class="ln">36</span><span class="cl">        glTexCoord2f(1.0f, 1.0f); glVertex3f( 1.0f,  1.0f, -1.0f);
</span></span><span class="line"><span class="ln">37</span><span class="cl">        glTexCoord2f(0.0f, 1.0f); glVertex3f( 1.0f,  1.0f,  1.0f);
</span></span><span class="line"><span class="ln">38</span><span class="cl">        glTexCoord2f(0.0f, 0.0f); glVertex3f( 1.0f, -1.0f,  1.0f);
</span></span><span class="line"><span class="ln">39</span><span class="cl">        // Left Face
</span></span><span class="line"><span class="ln">40</span><span class="cl">        glTexCoord2f(0.0f, 0.0f); glVertex3f(-1.0f, -1.0f, -1.0f);
</span></span><span class="line"><span class="ln">41</span><span class="cl">        glTexCoord2f(1.0f, 0.0f); glVertex3f(-1.0f, -1.0f,  1.0f);
</span></span><span class="line"><span class="ln">42</span><span class="cl">        glTexCoord2f(1.0f, 1.0f); glVertex3f(-1.0f,  1.0f,  1.0f);
</span></span><span class="line"><span class="ln">43</span><span class="cl">        glTexCoord2f(0.0f, 1.0f); glVertex3f(-1.0f,  1.0f, -1.0f);
</span></span><span class="line"><span class="ln">44</span><span class="cl">    glEnd();
</span></span><span class="line"><span class="ln">45</span><span class="cl">
</span></span><span class="line"><span class="ln">46</span><span class="cl">    xrot+=0.3f;
</span></span><span class="line"><span class="ln">47</span><span class="cl">    yrot+=0.2f;
</span></span><span class="line"><span class="ln">48</span><span class="cl">    zrot+=0.4f;
</span></span><span class="line"><span class="ln">49</span><span class="cl">    return TRUE;                                        // Keep Going
</span></span><span class="line"><span class="ln">50</span><span class="cl">}
</span></span></code></pre></div><p>方法中，在begin之前，我们先预先定义好图像的旋转方式（不一定非要放在begin之前）。</p>
<p>接着调用glBindTexture进行绑定。我们就能够开始进行纹理渲染的绑定操作了。</p>
<p>操作中我们在每次定义点的同时，将纹理的四个角也固定在对应的点上，便能够完成绑定工作。</p>
<p>注意，用原引博客的话说，<strong>当您想改变纹理时，应该绑定新的纹理。有一点值得指出的是，您不能在 glBegin() 和 glEnd() 之间绑定纹理，必须在 glBegin() 之前或 glEnd() 之后绑定。</strong></p>
<p>到这一步，这一课内容也就结束了。</p>
<p><figure>
  <picture>

    
      
        
        
        
        
        
        
    <img
      loading="lazy"
      decoding="async"
      alt="section5.1"
      
        class="image_figure image_external image_unprocessed"
        src="http://img.blog.csdn.net/20170516074420532?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvTWljaGFlbDc1Mzk1MQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast"
      
      
    />

    </picture>
</figure>
</p>
<h2 id="课程7的实现">课程7的实现</h2>
<p>我们接下来尝试课程7的内容。</p>
<p>课程7将带领我们建立一个光照系统，我们也将在这个课程中尝试添加按键控制。通过这个课程，我们会对OpenGL中的光照系统的实现、控制以及如何实现按键控制有一个入门的了解。本次实验基于课程6的内容进行进一步扩展。</p>
<p>实验中，因为我们需要首先添加一些群居变量用来对按键状态进行识别，同时也还要添加一些全局变量用来记录图像的旋转角度。</p>
<p>因此我们在全局变量中添加如下变量。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="n">GLfloat</span> <span class="n">xrot</span><span class="p">;</span>               <span class="c1">// X 旋转角度
</span></span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="c1"></span><span class="n">GLfloat</span> <span class="n">yrot</span><span class="p">;</span>               <span class="c1">// Y 旋转角度
</span></span></span><span class="line"><span class="ln"> 3</span><span class="cl"><span class="c1"></span><span class="n">GLfloat</span> <span class="n">xspeed</span><span class="p">;</span>             <span class="c1">// X 旋转速度
</span></span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="c1"></span><span class="n">GLfloat</span> <span class="n">yspeed</span><span class="p">;</span>             <span class="c1">// Y 旋转速度
</span></span></span><span class="line"><span class="ln"> 5</span><span class="cl"><span class="c1"></span><span class="n">GLfloat</span> <span class="n">z</span><span class="o">=-</span><span class="mf">5.0f</span><span class="p">;</span>            <span class="c1">// Depth Into The Screen
</span></span></span><span class="line"><span class="ln"> 6</span><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl"><span class="n">GLfloat</span> <span class="n">LightAmbient</span><span class="p">[]</span><span class="o">=</span>     <span class="p">{</span> <span class="mf">0.5f</span><span class="p">,</span> <span class="mf">0.5f</span><span class="p">,</span> <span class="mf">0.5f</span><span class="p">,</span> <span class="mf">1.0f</span> <span class="p">};</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl"><span class="n">GLfloat</span> <span class="n">LightDiffuse</span><span class="p">[]</span><span class="o">=</span>     <span class="p">{</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">1.0f</span> <span class="p">};</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl"><span class="n">GLfloat</span> <span class="n">LightPosition</span><span class="p">[]</span><span class="o">=</span>    <span class="p">{</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">2.0f</span><span class="p">,</span> <span class="mf">1.0f</span> <span class="p">};</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl">
</span></span><span class="line"><span class="ln">11</span><span class="cl"><span class="n">GLuint</span>  <span class="n">filter</span><span class="p">;</span>             <span class="c1">// 滤波器类型
</span></span></span><span class="line"><span class="ln">12</span><span class="cl"><span class="c1"></span><span class="n">GLuint</span>  <span class="n">texture</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>         <span class="c1">// 3中纹理文件指针
</span></span></span></code></pre></div><p>上面代码中，中间3行数组分别表示环境光变量数组，漫射光变量数组，以及光源位置数组。</p>
<p>其中，我们需要了解一下环境光和漫射光的意义是什么。<strong>环境光来自于四面八方。所有场景中的对象都处于环境光的照射中；漫射光由特定的光源产生，并在您的场景中的对象表面上产生反射。处于漫射光直接照射下的任何对象表面都变得很亮，而几乎未被照射到的区域就显得要暗一些。</strong></p>
<p>LightAmbient和LightDiffuse创建光源的过程和颜色的创建完全一致。前三个参数分别是RGB三色分量，最后一个是alpha通道参数。</p>
<p>而LightPosition中，前三个参数表示光源的XYZ左坐标，最后一个参数将告诉OpenGL这里指定的坐标就是光源的位置。</p>
<p>然后我们在上一次实验的基础上稍稍稍修改LoadGLTextures函数。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="kt">int</span> <span class="nf">LoadGLTextures</span><span class="p">()</span>                                    <span class="c1">// Load Bitmaps And Convert To Textures
</span></span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="c1"></span><span class="p">{</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">    <span class="kt">int</span> <span class="n">Status</span><span class="o">=</span><span class="n">FALSE</span><span class="p">;</span>                                   <span class="c1">// Status Indicator
</span></span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">    <span class="n">AUX_RGBImageRec</span> <span class="o">*</span><span class="n">TextureImage</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>                   <span class="c1">// Create Storage Space For The Texture
</span></span></span><span class="line"><span class="ln"> 6</span><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">    <span class="nf">memset</span><span class="p">(</span><span class="n">TextureImage</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="o">*</span><span class="mi">1</span><span class="p">);</span>            <span class="c1">// Set The Pointer To NULL
</span></span></span><span class="line"><span class="ln"> 8</span><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">    <span class="c1">// Load The Bitmap, Check For Errors, If Bitmap&#39;s Not Found Quit
</span></span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">TextureImage</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="nf">LoadBMP</span><span class="p">(</span><span class="s">&#34;Data/Crate.bmp&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="ln">12</span><span class="cl">        <span class="n">Status</span><span class="o">=</span><span class="n">TRUE</span><span class="p">;</span>                                    <span class="c1">// Set The Status To TRUE
</span></span></span><span class="line"><span class="ln">13</span><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="ln">14</span><span class="cl">        <span class="nf">glGenTextures</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">texture</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>                  <span class="c1">// Create Three Textures
</span></span></span><span class="line"><span class="ln">15</span><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="ln">16</span><span class="cl">        <span class="c1">// Create Nearest Filtered Texture
</span></span></span><span class="line"><span class="ln">17</span><span class="cl"><span class="c1"></span>        <span class="nf">glBindTexture</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">texture</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span></span><span class="line"><span class="ln">18</span><span class="cl">        <span class="nf">glTexParameteri</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span><span class="n">GL_TEXTURE_MAG_FILTER</span><span class="p">,</span><span class="n">GL_NEAREST</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">19</span><span class="cl">        <span class="nf">glTexParameteri</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span><span class="n">GL_TEXTURE_MIN_FILTER</span><span class="p">,</span><span class="n">GL_NEAREST</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">20</span><span class="cl">        <span class="nf">glTexImage2D</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">TextureImage</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">sizeX</span><span class="p">,</span> <span class="n">TextureImage</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">sizeY</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">GL_RGB</span><span class="p">,</span> <span class="n">GL_UNSIGNED_BYTE</span><span class="p">,</span> <span class="n">TextureImage</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">21</span><span class="cl">
</span></span><span class="line"><span class="ln">22</span><span class="cl">        <span class="c1">// Create Linear Filtered Texture
</span></span></span><span class="line"><span class="ln">23</span><span class="cl"><span class="c1"></span>        <span class="nf">glBindTexture</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">texture</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
</span></span><span class="line"><span class="ln">24</span><span class="cl">        <span class="nf">glTexParameteri</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span><span class="n">GL_TEXTURE_MAG_FILTER</span><span class="p">,</span><span class="n">GL_LINEAR</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">25</span><span class="cl">        <span class="nf">glTexParameteri</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span><span class="n">GL_TEXTURE_MIN_FILTER</span><span class="p">,</span><span class="n">GL_LINEAR</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">26</span><span class="cl">        <span class="nf">glTexImage2D</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">TextureImage</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">sizeX</span><span class="p">,</span> <span class="n">TextureImage</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">sizeY</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">GL_RGB</span><span class="p">,</span> <span class="n">GL_UNSIGNED_BYTE</span><span class="p">,</span> <span class="n">TextureImage</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">27</span><span class="cl">
</span></span><span class="line"><span class="ln">28</span><span class="cl">        <span class="c1">// Create MipMapped Texture
</span></span></span><span class="line"><span class="ln">29</span><span class="cl"><span class="c1"></span>        <span class="nf">glBindTexture</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">texture</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
</span></span><span class="line"><span class="ln">30</span><span class="cl">        <span class="nf">glTexParameteri</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span><span class="n">GL_TEXTURE_MAG_FILTER</span><span class="p">,</span><span class="n">GL_LINEAR</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">31</span><span class="cl">        <span class="nf">glTexParameteri</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span><span class="n">GL_TEXTURE_MIN_FILTER</span><span class="p">,</span><span class="n">GL_LINEAR_MIPMAP_NEAREST</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">32</span><span class="cl">        
</span></span><span class="line"><span class="ln">33</span><span class="cl">        <span class="nf">gluBuild2DMipmaps</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">TextureImage</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">sizeX</span><span class="p">,</span> <span class="n">TextureImage</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">sizeY</span><span class="p">,</span> <span class="n">GL_RGB</span><span class="p">,</span> <span class="n">GL_UNSIGNED_BYTE</span><span class="p">,</span> <span class="n">TextureImage</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">34</span><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="ln">35</span><span class="cl">
</span></span><span class="line"><span class="ln">36</span><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">TextureImage</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>                                <span class="c1">// If Texture Exists
</span></span></span><span class="line"><span class="ln">37</span><span class="cl"><span class="c1"></span>    <span class="p">{</span>
</span></span><span class="line"><span class="ln">38</span><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">TextureImage</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">)</span>                      <span class="c1">// If Texture Image Exists
</span></span></span><span class="line"><span class="ln">39</span><span class="cl"><span class="c1"></span>        <span class="p">{</span>
</span></span><span class="line"><span class="ln">40</span><span class="cl">            <span class="nf">free</span><span class="p">(</span><span class="n">TextureImage</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">);</span>                <span class="c1">// Free The Texture Image Memory
</span></span></span><span class="line"><span class="ln">41</span><span class="cl"><span class="c1"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="ln">42</span><span class="cl">
</span></span><span class="line"><span class="ln">43</span><span class="cl">        <span class="nf">free</span><span class="p">(</span><span class="n">TextureImage</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>                          <span class="c1">// Free The Image Structure
</span></span></span><span class="line"><span class="ln">44</span><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="ln">45</span><span class="cl">
</span></span><span class="line"><span class="ln">46</span><span class="cl">    <span class="k">return</span> <span class="n">Status</span><span class="p">;</span>                                      <span class="c1">// Return The Status
</span></span></span><span class="line"><span class="ln">47</span><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></div><p>在读过上一次的代码之后，我们可以很容易的知道这段代码就是将Data/Crate.bmp这张位图转换成纹理并且存放在texture数组中，并且3次渲染的画面都一致（基于这一点，其实我们也可以自己实现不同的3张图片做出3种不同的，不同的是3章图像的glTexParameteri进行滤波的方式并不相同，第一张渲染使用最邻近过滤（GL_NEAREST），第二张使用线性滤波（GL_LINEAR），第三张使用选择最邻近的mip层，使用线性过滤（GL_LINEAR_MIPMAP_NEAREST）。然后就可以在立方体上渲染出不同的团了）。其他的部分改变不大。</p>
<p>上面对纹理映射的滤波器的选择可以参考<a href="https://my.oschina.net/sweetdark/blog/177812">【OpenGL超级宝典笔记——纹理映射Mipmap】</a>这篇博客，在上面有很详细的解释和说明。</p>
<p>然后在滤波器设置结束之后，最后一行还添加了一个gluBuild2DMipmaps方法，这个在上面的【OpenGL超级宝典笔记——纹理映射Mipmap】中也有提到，是一个能够将任意图像正常缩放到适当大小的方法函数，这样就不用我们费心进行图像的预处理工作了。</p>
<p>好了，到这里LoadGLTextures就设置完毕了。</p>
<p>接着就到InitGL函数了，我们在第六课中已经设置了GLEnable以及glHint进行纹理绑定工作了。我们需要在后面添加新的方法，用来实现光源的初始化。具体参考代码如下：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="kt">int</span> <span class="nf">InitGL</span><span class="p">(</span><span class="n">GLvoid</span><span class="p">)</span>                                      <span class="c1">// All Setup For OpenGL Goes Here
</span></span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="c1"></span><span class="p">{</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nf">LoadGLTextures</span><span class="p">())</span>                              <span class="c1">// Jump To Texture Loading Routine
</span></span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="c1"></span>    <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">        <span class="k">return</span> <span class="n">FALSE</span><span class="p">;</span>                                   <span class="c1">// If Texture Didn&#39;t Load Return FALSE
</span></span></span><span class="line"><span class="ln"> 6</span><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">    <span class="nf">glEnable</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">);</span>                            <span class="c1">// Enable Texture Mapping
</span></span></span><span class="line"><span class="ln"> 9</span><span class="cl"><span class="c1"></span>    <span class="nf">glShadeModel</span><span class="p">(</span><span class="n">GL_SMOOTH</span><span class="p">);</span>                            <span class="c1">// Enable Smooth Shading
</span></span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="c1"></span>    <span class="nf">glClearColor</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.5f</span><span class="p">);</span>               <span class="c1">// Black Background
</span></span></span><span class="line"><span class="ln">11</span><span class="cl"><span class="c1"></span>    <span class="nf">glClearDepth</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">);</span>                                 <span class="c1">// Depth Buffer Setup
</span></span></span><span class="line"><span class="ln">12</span><span class="cl"><span class="c1"></span>    <span class="nf">glEnable</span><span class="p">(</span><span class="n">GL_DEPTH_TEST</span><span class="p">);</span>                            <span class="c1">// Enables Depth Testing
</span></span></span><span class="line"><span class="ln">13</span><span class="cl"><span class="c1"></span>    <span class="nf">glDepthFunc</span><span class="p">(</span><span class="n">GL_LEQUAL</span><span class="p">);</span>                             <span class="c1">// The Type Of Depth Testing To Do
</span></span></span><span class="line"><span class="ln">14</span><span class="cl"><span class="c1"></span>    <span class="nf">glHint</span><span class="p">(</span><span class="n">GL_PERSPECTIVE_CORRECTION_HINT</span><span class="p">,</span> <span class="n">GL_NICEST</span><span class="p">);</span>  <span class="c1">// Really Nice Perspective Calculations
</span></span></span><span class="line"><span class="ln">15</span><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="ln">16</span><span class="cl">    <span class="nf">glLightfv</span><span class="p">(</span><span class="n">GL_LIGHT1</span><span class="p">,</span> <span class="n">GL_AMBIENT</span><span class="p">,</span> <span class="n">LightAmbient</span><span class="p">);</span>     <span class="c1">// Setup The Ambient Light
</span></span></span><span class="line"><span class="ln">17</span><span class="cl"><span class="c1"></span>    <span class="nf">glLightfv</span><span class="p">(</span><span class="n">GL_LIGHT1</span><span class="p">,</span> <span class="n">GL_DIFFUSE</span><span class="p">,</span> <span class="n">LightDiffuse</span><span class="p">);</span>     <span class="c1">// Setup The Diffuse Light
</span></span></span><span class="line"><span class="ln">18</span><span class="cl"><span class="c1"></span>    <span class="nf">glLightfv</span><span class="p">(</span><span class="n">GL_LIGHT1</span><span class="p">,</span> <span class="n">GL_POSITION</span><span class="p">,</span><span class="n">LightPosition</span><span class="p">);</span>    <span class="c1">// Position The Light
</span></span></span><span class="line"><span class="ln">19</span><span class="cl"><span class="c1"></span>    <span class="nf">glEnable</span><span class="p">(</span><span class="n">GL_LIGHT1</span><span class="p">);</span>                                <span class="c1">// Enable Light One
</span></span></span><span class="line"><span class="ln">20</span><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="n">TRUE</span><span class="p">;</span>                                        <span class="c1">// Initialization Went OK
</span></span></span><span class="line"><span class="ln">21</span><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></div><p>新增了一个1号光源GL_LIGHT1。在对GL_LIGHT新增的3个glLightfv方法中，第一个表示设置环境光（Ambient Light），传入我们已经定义好的全局变量LightAmbient；第二个是漫射光（Diffuse Light），传入我们已经定义好的全局变量LightDiffuse；第三个是光源位置，传入我们定义好的LightPosition。最后使用glEnable启用光源。</p>
<p>到这里点光源的初始化操作就结束了。和设置渲染一样，我们接着要在DrawGLScene中添加光源的某些设置，</p>
<p>在OpenGL中，法线是指经过面(多边形）上的一点且垂直于这个面(多边形)的直线。使用光源的时候必须指定一条法线。法线告诉OpenGL这个多边形的朝向，并指明多边形的正面和背面。如果没有指定法线，什么怪事情都可能发生：不该照亮的面被照亮了，多边形的背面也被照亮....。对了，法线应该指向多边形的外侧。</p>
<p>所以我们在DrawGLScene中绘制图像的时候，也要同时设置法线。一般来说在绘制一个平面之前，我们就要预先定义好这个平面的法线。参考代码如下。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="kt">int</span> <span class="nf">DrawGLScene</span><span class="p">(</span><span class="n">GLvoid</span><span class="p">)</span>                                 <span class="c1">// Here&#39;s Where We Do All The Drawing
</span></span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="c1"></span><span class="p">{</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">    <span class="nf">glClear</span><span class="p">(</span><span class="n">GL_COLOR_BUFFER_BIT</span> <span class="o">|</span> <span class="n">GL_DEPTH_BUFFER_BIT</span><span class="p">);</span> <span class="c1">// Clear The Screen And The Depth Buffer
</span></span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="c1"></span>    <span class="nf">glLoadIdentity</span><span class="p">();</span>                                   <span class="c1">// Reset The View
</span></span></span><span class="line"><span class="ln"> 5</span><span class="cl"><span class="c1"></span>    <span class="nf">glTranslatef</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">,</span><span class="mf">0.0f</span><span class="p">,</span><span class="n">z</span><span class="p">);</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">    <span class="nf">glRotatef</span><span class="p">(</span><span class="n">xrot</span><span class="p">,</span><span class="mf">1.0f</span><span class="p">,</span><span class="mf">0.0f</span><span class="p">,</span><span class="mf">0.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl">    <span class="nf">glRotatef</span><span class="p">(</span><span class="n">yrot</span><span class="p">,</span><span class="mf">0.0f</span><span class="p">,</span><span class="mf">1.0f</span><span class="p">,</span><span class="mf">0.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">
</span></span><span class="line"><span class="ln">10</span><span class="cl">    <span class="nf">glBindTexture</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">texture</span><span class="p">[</span><span class="n">filter</span><span class="p">]);</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl">
</span></span><span class="line"><span class="ln">12</span><span class="cl">    <span class="nf">glBegin</span><span class="p">(</span><span class="n">GL_QUADS</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">13</span><span class="cl">        <span class="c1">// Front Face
</span></span></span><span class="line"><span class="ln">14</span><span class="cl"><span class="c1"></span>        <span class="nf">glNormal3f</span><span class="p">(</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">15</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">16</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">17</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span> <span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">18</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">19</span><span class="cl">        <span class="c1">// Back Face
</span></span></span><span class="line"><span class="ln">20</span><span class="cl"><span class="c1"></span>        <span class="nf">glNormal3f</span><span class="p">(</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span><span class="o">-</span><span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">21</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">22</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">23</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span> <span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">24</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">25</span><span class="cl">        <span class="c1">// Top Face
</span></span></span><span class="line"><span class="ln">26</span><span class="cl"><span class="c1"></span>        <span class="nf">glNormal3f</span><span class="p">(</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">27</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">28</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">29</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span> <span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">30</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span> <span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">31</span><span class="cl">        <span class="c1">// Bottom Face
</span></span></span><span class="line"><span class="ln">32</span><span class="cl"><span class="c1"></span>        <span class="nf">glNormal3f</span><span class="p">(</span> <span class="mf">0.0f</span><span class="p">,</span><span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">33</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">34</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">35</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">36</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">37</span><span class="cl">        <span class="c1">// Right face
</span></span></span><span class="line"><span class="ln">38</span><span class="cl"><span class="c1"></span>        <span class="nf">glNormal3f</span><span class="p">(</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">39</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">40</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span> <span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">41</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span> <span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">42</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span> <span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">43</span><span class="cl">        <span class="c1">// Left Face
</span></span></span><span class="line"><span class="ln">44</span><span class="cl"><span class="c1"></span>        <span class="nf">glNormal3f</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">45</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">46</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">47</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">1.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">48</span><span class="cl">        <span class="nf">glTexCoord2f</span><span class="p">(</span><span class="mf">0.0f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">);</span> <span class="nf">glVertex3f</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0f</span><span class="p">,</span>  <span class="mf">1.0f</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0f</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">49</span><span class="cl">    <span class="nf">glEnd</span><span class="p">();</span>
</span></span><span class="line"><span class="ln">50</span><span class="cl">
</span></span><span class="line"><span class="ln">51</span><span class="cl">    <span class="n">xrot</span><span class="o">+=</span><span class="n">xspeed</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">52</span><span class="cl">    <span class="n">yrot</span><span class="o">+=</span><span class="n">yspeed</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">53</span><span class="cl">    <span class="k">return</span> <span class="n">TRUE</span><span class="p">;</span>                                        <span class="c1">// Keep Going
</span></span></span><span class="line"><span class="ln">54</span><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></div><p>每新定义一个平面，我们都需要调用glNormal3f定义好一个法向量。法向量的3个参数分别表示其在X轴，Y轴，Z轴上的分量的长度。法向量的值是由面上的点计算出来的。</p>
<p>到这一步，我们编译运行以后就已经能够看到在点光源下的一个木箱子的图案，接下来我们将为其添加键盘控制功能。这部分在WinMain内。</p>
<p>我们在课程1上已经知道，nehe教程中，按键的反馈是在WinMain的一个while循环中，不断检测事件，然后对不同事件进行相应的反馈。里面已经添加了F1进行全屏控制的时间控制，我们要做的就是模仿F1的工作机制，添加其他按键的反馈。</p>
<p>在以前的while循环中，按键的触发设置代码如下。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="ln"> 1</span><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="n">done</span><span class="p">)</span>                                    <span class="c1">// Loop That Runs While done=FALSE
</span></span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="c1"></span>    <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nf">PeekMessage</span><span class="p">(</span><span class="o">&amp;</span><span class="n">msg</span><span class="p">,</span><span class="nb">NULL</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">PM_REMOVE</span><span class="p">))</span>   <span class="c1">// Is There A Message Waiting?
</span></span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="c1"></span>        <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">msg</span><span class="p">.</span><span class="n">message</span><span class="o">==</span><span class="n">WM_QUIT</span><span class="p">)</span>               <span class="c1">// Have We Received A Quit Message?
</span></span></span><span class="line"><span class="ln"> 6</span><span class="cl"><span class="c1"></span>            <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">                <span class="n">done</span><span class="o">=</span><span class="n">TRUE</span><span class="p">;</span>                          <span class="c1">// If So done=TRUE
</span></span></span><span class="line"><span class="ln"> 8</span><span class="cl"><span class="c1"></span>            <span class="p">}</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">            <span class="k">else</span>                                    <span class="c1">// If Not, Deal With Window Messages
</span></span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="c1"></span>            <span class="p">{</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl">                <span class="nf">TranslateMessage</span><span class="p">(</span><span class="o">&amp;</span><span class="n">msg</span><span class="p">);</span>             <span class="c1">// Translate The Message
</span></span></span><span class="line"><span class="ln">12</span><span class="cl"><span class="c1"></span>                <span class="nf">DispatchMessage</span><span class="p">(</span><span class="o">&amp;</span><span class="n">msg</span><span class="p">);</span>              <span class="c1">// Dispatch The Message
</span></span></span><span class="line"><span class="ln">13</span><span class="cl"><span class="c1"></span>            <span class="p">}</span>
</span></span><span class="line"><span class="ln">14</span><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="ln">15</span><span class="cl">        <span class="k">else</span>                                        <span class="c1">// If There Are No Messages
</span></span></span><span class="line"><span class="ln">16</span><span class="cl"><span class="c1"></span>        <span class="p">{</span>
</span></span><span class="line"><span class="ln">17</span><span class="cl">            <span class="c1">// Draw The Scene.  Watch For ESC Key And Quit Messages From DrawGLScene()
</span></span></span><span class="line"><span class="ln">18</span><span class="cl"><span class="c1"></span>            <span class="k">if</span> <span class="p">((</span><span class="n">active</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nf">DrawGLScene</span><span class="p">())</span> <span class="o">||</span> <span class="n">keys</span><span class="p">[</span><span class="n">VK_ESCAPE</span><span class="p">])</span>  <span class="c1">// Active?  Was There A Quit Received?
</span></span></span><span class="line"><span class="ln">19</span><span class="cl"><span class="c1"></span>            <span class="p">{</span>
</span></span><span class="line"><span class="ln">20</span><span class="cl">                <span class="n">done</span><span class="o">=</span><span class="n">TRUE</span><span class="p">;</span>                          <span class="c1">// ESC or DrawGLScene Signalled A Quit
</span></span></span><span class="line"><span class="ln">21</span><span class="cl"><span class="c1"></span>            <span class="p">}</span>
</span></span><span class="line"><span class="ln">22</span><span class="cl">            <span class="k">else</span>                                    <span class="c1">// Not Time To Quit, Update Screen
</span></span></span><span class="line"><span class="ln">23</span><span class="cl"><span class="c1"></span>            <span class="p">{</span>
</span></span><span class="line"><span class="ln">24</span><span class="cl">                <span class="nf">SwapBuffers</span><span class="p">(</span><span class="n">hDC</span><span class="p">);</span>                   <span class="c1">// Swap Buffers (Double Buffering)
</span></span></span><span class="line"><span class="ln">25</span><span class="cl"><span class="c1"></span>            <span class="p">}</span>
</span></span><span class="line"><span class="ln">26</span><span class="cl">
</span></span><span class="line"><span class="ln">27</span><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">keys</span><span class="p">[</span><span class="n">VK_F1</span><span class="p">])</span>                        <span class="c1">// Is F1 Being Pressed?
</span></span></span><span class="line"><span class="ln">28</span><span class="cl"><span class="c1"></span>            <span class="p">{</span>
</span></span><span class="line"><span class="ln">29</span><span class="cl">                <span class="n">keys</span><span class="p">[</span><span class="n">VK_F1</span><span class="p">]</span><span class="o">=</span><span class="n">FALSE</span><span class="p">;</span>                  <span class="c1">// If So Make Key FALSE
</span></span></span><span class="line"><span class="ln">30</span><span class="cl"><span class="c1"></span>                <span class="nf">KillGLWindow</span><span class="p">();</span>                     <span class="c1">// Kill Our Current Window
</span></span></span><span class="line"><span class="ln">31</span><span class="cl"><span class="c1"></span>                <span class="n">fullscreen</span><span class="o">=!</span><span class="n">fullscreen</span><span class="p">;</span>             <span class="c1">// Toggle Fullscreen / Windowed Mode
</span></span></span><span class="line"><span class="ln">32</span><span class="cl"><span class="c1"></span>                <span class="c1">// Recreate Our OpenGL Window
</span></span></span><span class="line"><span class="ln">33</span><span class="cl"><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nf">CreateGLWindow</span><span class="p">(</span><span class="s">&#34;NeHe&#39;s Texture Mapping Tutorial&#34;</span><span class="p">,</span><span class="mi">640</span><span class="p">,</span><span class="mi">480</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="n">fullscreen</span><span class="p">))</span>
</span></span><span class="line"><span class="ln">34</span><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="ln">35</span><span class="cl">                    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>                       <span class="c1">// Quit If Window Was Not Created
</span></span></span><span class="line"><span class="ln">36</span><span class="cl"><span class="c1"></span>                <span class="p">}</span>
</span></span><span class="line"><span class="ln">37</span><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="ln">38</span><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="ln">39</span><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><p>在确认ESC按键未被按下之前，OpenGL将会不停的绘制图片。在这个窗口刷新工作结束以后，我们开始了F1的按键判断。由此，我们可以在这个基础上，进一步扩展了。扩展的代码如下。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">done</span><span class="p">)</span>                                   <span class="c1">// Loop That Runs While done=FALSE
</span></span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="c1"></span>    <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 3</span><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nf">PeekMessage</span><span class="p">(</span><span class="o">&amp;</span><span class="n">msg</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">PM_REMOVE</span><span class="p">))</span>   <span class="c1">// Is There A Message Waiting?
</span></span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="c1"></span>        <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">msg</span><span class="p">.</span><span class="n">message</span> <span class="o">==</span> <span class="n">WM_QUIT</span><span class="p">)</span>             <span class="c1">// Have We Received A Quit Message?
</span></span></span><span class="line"><span class="ln"> 6</span><span class="cl"><span class="c1"></span>            <span class="p">{</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">                <span class="n">done</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">;</span>                            <span class="c1">// If So done=TRUE
</span></span></span><span class="line"><span class="ln"> 8</span><span class="cl"><span class="c1"></span>            <span class="p">}</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">            <span class="k">else</span>                                    <span class="c1">// If Not, Deal With Window Messages
</span></span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="c1"></span>            <span class="p">{</span>
</span></span><span class="line"><span class="ln">11</span><span class="cl">                <span class="nf">TranslateMessage</span><span class="p">(</span><span class="o">&amp;</span><span class="n">msg</span><span class="p">);</span>             <span class="c1">// Translate The Message
</span></span></span><span class="line"><span class="ln">12</span><span class="cl"><span class="c1"></span>                <span class="nf">DispatchMessage</span><span class="p">(</span><span class="o">&amp;</span><span class="n">msg</span><span class="p">);</span>              <span class="c1">// Dispatch The Message
</span></span></span><span class="line"><span class="ln">13</span><span class="cl"><span class="c1"></span>            <span class="p">}</span>
</span></span><span class="line"><span class="ln">14</span><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="ln">15</span><span class="cl">        <span class="k">else</span>                                        <span class="c1">// If There Are No Messages
</span></span></span><span class="line"><span class="ln">16</span><span class="cl"><span class="c1"></span>        <span class="p">{</span>
</span></span><span class="line"><span class="ln">17</span><span class="cl">            <span class="c1">// Draw The Scene.  Watch For ESC Key And Quit Messages From DrawGLScene()
</span></span></span><span class="line"><span class="ln">18</span><span class="cl"><span class="c1"></span>            <span class="k">if</span> <span class="p">((</span><span class="n">active</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nf">DrawGLScene</span><span class="p">())</span> <span class="o">||</span> <span class="n">keys</span><span class="p">[</span><span class="n">VK_ESCAPE</span><span class="p">])</span>  <span class="c1">// Active?  Was There A Quit Received?
</span></span></span><span class="line"><span class="ln">19</span><span class="cl"><span class="c1"></span>            <span class="p">{</span>
</span></span><span class="line"><span class="ln">20</span><span class="cl">                <span class="n">done</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">;</span>                            <span class="c1">// ESC or DrawGLScene Signalled A Quit
</span></span></span><span class="line"><span class="ln">21</span><span class="cl"><span class="c1"></span>            <span class="p">}</span>
</span></span><span class="line"><span class="ln">22</span><span class="cl">            <span class="k">else</span>                                    <span class="c1">// Not Time To Quit, Update Screen
</span></span></span><span class="line"><span class="ln">23</span><span class="cl"><span class="c1"></span>            <span class="p">{</span>
</span></span><span class="line"><span class="ln">24</span><span class="cl">                <span class="nf">SwapBuffers</span><span class="p">(</span><span class="n">hDC</span><span class="p">);</span>                   <span class="c1">// Swap Buffers (Double Buffering)
</span></span></span><span class="line"><span class="ln">25</span><span class="cl"><span class="c1"></span>                
</span></span><span class="line"><span class="ln">26</span><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="ln">27</span><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">keys</span><span class="p">[</span><span class="sc">&#39;L&#39;</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">lp</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">28</span><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="ln">29</span><span class="cl">                <span class="n">lp</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">30</span><span class="cl">                <span class="n">light</span> <span class="o">=</span> <span class="o">!</span><span class="n">light</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">31</span><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">light</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">32</span><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="ln">33</span><span class="cl">                    <span class="nf">glDisable</span><span class="p">(</span><span class="n">GL_LIGHTING</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">34</span><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="ln">35</span><span class="cl">                <span class="k">else</span>
</span></span><span class="line"><span class="ln">36</span><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="ln">37</span><span class="cl">                    <span class="nf">glEnable</span><span class="p">(</span><span class="n">GL_LIGHTING</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">38</span><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="ln">39</span><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="ln">40</span><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">keys</span><span class="p">[</span><span class="sc">&#39;L&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="ln">41</span><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="ln">42</span><span class="cl">                <span class="n">lp</span> <span class="o">=</span> <span class="n">FALSE</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">43</span><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="ln">44</span><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">keys</span><span class="p">[</span><span class="sc">&#39;F&#39;</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">fp</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">45</span><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="ln">46</span><span class="cl">                <span class="n">fp</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">47</span><span class="cl">                <span class="n">filter</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">48</span><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">filter</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="ln">49</span><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="ln">50</span><span class="cl">                    <span class="n">filter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">51</span><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="ln">52</span><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="ln">53</span><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">keys</span><span class="p">[</span><span class="sc">&#39;F&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="ln">54</span><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="ln">55</span><span class="cl">                <span class="n">fp</span> <span class="o">=</span> <span class="n">FALSE</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">56</span><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="ln">57</span><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">keys</span><span class="p">[</span><span class="n">VK_PRIOR</span><span class="p">])</span>
</span></span><span class="line"><span class="ln">58</span><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="ln">59</span><span class="cl">                <span class="n">z</span> <span class="o">-=</span> <span class="mf">0.02f</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">60</span><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="ln">61</span><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">keys</span><span class="p">[</span><span class="n">VK_NEXT</span><span class="p">])</span>
</span></span><span class="line"><span class="ln">62</span><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="ln">63</span><span class="cl">                <span class="n">z</span> <span class="o">+=</span> <span class="mf">0.02f</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">64</span><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="ln">65</span><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">keys</span><span class="p">[</span><span class="n">VK_UP</span><span class="p">])</span>
</span></span><span class="line"><span class="ln">66</span><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="ln">67</span><span class="cl">                <span class="n">xspeed</span> <span class="o">-=</span> <span class="mf">0.01f</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">68</span><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="ln">69</span><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">keys</span><span class="p">[</span><span class="n">VK_DOWN</span><span class="p">])</span>
</span></span><span class="line"><span class="ln">70</span><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="ln">71</span><span class="cl">                <span class="n">xspeed</span> <span class="o">+=</span> <span class="mf">0.01f</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">72</span><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="ln">73</span><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">keys</span><span class="p">[</span><span class="n">VK_RIGHT</span><span class="p">])</span>
</span></span><span class="line"><span class="ln">74</span><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="ln">75</span><span class="cl">                <span class="n">yspeed</span> <span class="o">+=</span> <span class="mf">0.01f</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">76</span><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="ln">77</span><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">keys</span><span class="p">[</span><span class="n">VK_LEFT</span><span class="p">])</span>
</span></span><span class="line"><span class="ln">78</span><span class="cl">            <span class="p">{</span>
</span></span><span class="line"><span class="ln">79</span><span class="cl">                <span class="n">yspeed</span> <span class="o">-=</span> <span class="mf">0.01f</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">80</span><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="ln">81</span><span class="cl">
</span></span><span class="line"><span class="ln">82</span><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">keys</span><span class="p">[</span><span class="n">VK_F1</span><span class="p">])</span>                        <span class="c1">// Is F1 Being Pressed?
</span></span></span><span class="line"><span class="ln">83</span><span class="cl"><span class="c1"></span>            <span class="p">{</span>
</span></span><span class="line"><span class="ln">84</span><span class="cl">                <span class="n">keys</span><span class="p">[</span><span class="n">VK_F1</span><span class="p">]</span> <span class="o">=</span> <span class="n">FALSE</span><span class="p">;</span>                    <span class="c1">// If So Make Key FALSE
</span></span></span><span class="line"><span class="ln">85</span><span class="cl"><span class="c1"></span>                <span class="nf">KillGLWindow</span><span class="p">();</span>                     <span class="c1">// Kill Our Current Window
</span></span></span><span class="line"><span class="ln">86</span><span class="cl"><span class="c1"></span>                <span class="n">fullscreen</span> <span class="o">=</span> <span class="o">!</span><span class="n">fullscreen</span><span class="p">;</span>               <span class="c1">// Toggle Fullscreen / Windowed Mode
</span></span></span><span class="line"><span class="ln">87</span><span class="cl"><span class="c1"></span>                                                        <span class="c1">// Recreate Our OpenGL Window
</span></span></span><span class="line"><span class="ln">88</span><span class="cl"><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nf">CreateGLWindow</span><span class="p">(</span><span class="s">&#34;NeHe&#39;s Textures, Lighting &amp; Keyboard Tutorial&#34;</span><span class="p">,</span> <span class="mi">640</span><span class="p">,</span> <span class="mi">480</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="n">fullscreen</span><span class="p">))</span>
</span></span><span class="line"><span class="ln">89</span><span class="cl">                <span class="p">{</span>
</span></span><span class="line"><span class="ln">90</span><span class="cl">                    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>                       <span class="c1">// Quit If Window Was Not Created
</span></span></span><span class="line"><span class="ln">91</span><span class="cl"><span class="c1"></span>                <span class="p">}</span>
</span></span><span class="line"><span class="ln">92</span><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="ln">93</span><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="ln">94</span><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><p>如果按下L建，就对光源GL_LIGHTING进行改变（我们在初始化InitGL的时候，就曾经调用过glEnable，不知道你是否还有印象）。其他部分都不难，这里就不一一解释了。</p>
<p>另外需要说明的是，因为在NEHE教程的前文中，按键反馈是在刷新屏幕<code>if ((active &amp;&amp; !DrawGLScene()) || keys[VK_ESCAPE])</code>这个判断结束之后才进行的按键反馈，而在其之后的代码中，却又将ESC之外的按键触发部分放进了判断条件之内。我这里模仿的是作者以前的按键触发设置，所以代码和作者lesson7的代码稍有不同。不过最终效果其实一致——只不过我的会在按下ESC之后延迟一帧才推出，而作者按下ESC立刻退出，因为刷新频率很快，所以其实想过一只。</p>
<p>最后，实验正确运行的话，你应该能够在窗口中正常的运行你的第一个有按键反馈的窗口游戏了。L打开灯光，F设置不同的滤波器，上下左右方向键分别设置不同的旋转方向，PageUp和PageDown分别将图形靠近或者远离我们。</p>

    </div><div class="post_comments">
  
  
  
  
</div>




  </article>
<aside class="sidebar">
  <section class="sidebar_inner">
    <br>
    
  
  <div class="search">
    <input type="search" class="search_field form_field" placeholder='搜索内容...' id="find" autocomplete="off" data-scope='post'>
    <label for="find" class="search_label"><svg class="icon">
  <title>search</title>
  <use xlink:href="#search"></use>
</svg>

    </label>
    
    <div class="search_results results"></div>
  </div>

        <h2>Yunyao Long</h2>
      <div class="author_bio">
        Coding for everything
      </div>
      <a href='https://yaoyl.cn/about/' class="button mt-1" role="button" title='阅读更多'>阅读更多</a>

    
    <h2 class="mt-4">精选文章</h2>
    <ul>
      <li>
        <a href="https://yaoyl.cn//post/2025/%E5%9F%BA%E4%BA%8Econtinue%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8%E5%A4%A7%E6%A8%A1%E5%9E%8B/" class="nav-link" title="M1芯片MacBook搭建本地大模型">M1芯片MacBook搭建本地大模型</a>
      </li>
      <li>
        <a href="https://yaoyl.cn//post/2025/%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0%E5%A4%A7%E6%A8%A1%E5%9E%8B/" class="nav-link" title="M1芯片MacBook搭建本地大模型">M1芯片MacBook搭建本地大模型</a>
      </li>
      <li>
        <a href="https://yaoyl.cn//post/2025/m1%E8%8A%AF%E7%89%87macbook%E5%AE%89%E8%A3%85docker/" class="nav-link" title="M1芯片MacBook安装Docker">M1芯片MacBook安装Docker</a>
      </li>
    </ul>
    <h2 class="mt-4">最新文章</h2>
    <ul class="flex-column">
      <li>
        <a href="https://yaoyl.cn//post/2025/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB-%E5%89%8D%E7%9E%BB/" class="nav-link" title="技术分享-前瞻">技术分享-前瞻</a>
      </li>
      <li>
        <a href="https://yaoyl.cn//post/%E5%8E%86%E5%8F%B2/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/" class="nav-link" title="设计模式-观察者模式">设计模式-观察者模式</a>
      </li>
      <li>
        <a href="https://yaoyl.cn//post/%E5%8E%86%E5%8F%B2/uml%E7%B1%BB%E5%9B%BE%E7%BB%98%E5%88%B6%E5%AE%9E%E4%BE%8B/" class="nav-link" title="UML类图绘制实例">UML类图绘制实例</a>
      </li>
      <li>
        <a href="https://yaoyl.cn//post/%E5%8E%86%E5%8F%B2/spring%E7%9A%84bean%E7%AE%A1%E7%90%86/" class="nav-link" title="Spring的Bean管理">Spring的Bean管理</a>
      </li>
      <li>
        <a href="https://yaoyl.cn//post/%E5%8E%86%E5%8F%B2/%E4%B8%80%E7%82%B9%E7%82%B9%E6%89%8B%E5%86%99spring/" class="nav-link" title="一点点手写Spring">一点点手写Spring</a>
      </li>
      <li>
        <a href="https://yaoyl.cn//post/%E5%8E%86%E5%8F%B2/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3%E5%B9%B6%E4%B8%94%E8%BF%9B%E8%A1%8C%E6%89%AB%E6%8F%8F%E8%A7%A3%E6%9E%90/" class="nav-link" title="自定义注解并且进行扫描解析">自定义注解并且进行扫描解析</a>
      </li>
      <li>
        <a href="https://yaoyl.cn//post/%E5%8E%86%E5%8F%B2/lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%8E%E5%87%BD%E6%95%B0%E5%BC%8F%E6%8E%A5%E5%8F%A3/" class="nav-link" title="Lambda表达式与函数式接口">Lambda表达式与函数式接口</a>
      </li>
      <li>
        <a href="https://yaoyl.cn//post/%E5%8E%86%E5%8F%B2/java%E7%9A%84integer%E7%B1%BB%E6%96%B9%E6%B3%95%E8%A7%A3%E8%AF%BB/" class="nav-link" title="Java的Integer类方法解读">Java的Integer类方法解读</a>
      </li>
    </ul>
    <div>
      <h2 class="mt-4 taxonomy" id="categories-section">分类</h2>
      <nav class="tags_nav">
        <a href='https://yaoyl.cn/categories/c&#43;&#43;/' class="post_tag button button_translucent" title="c&#43;&#43;">
          C&#43;&#43;
          <span class="button_tally">17</span>
        </a>
        
        <a href='https://yaoyl.cn/categories/java/' class="post_tag button button_translucent" title="java">
          JAVA
          <span class="button_tally">9</span>
        </a>
        
        <a href='https://yaoyl.cn/categories/%E9%9D%A2%E8%AF%95/' class="post_tag button button_translucent" title="面试">
          面试
          <span class="button_tally">5</span>
        </a>
        
        <a href='https://yaoyl.cn/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/' class="post_tag button button_translucent" title="技术分享">
          技术分享
          <span class="button_tally">4</span>
        </a>
        
        <a href='https://yaoyl.cn/categories/blog/' class="post_tag button button_translucent" title="blog">
          BLOG
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://yaoyl.cn/categories/python/' class="post_tag button button_translucent" title="python">
          PYTHON
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://yaoyl.cn/categories/%E6%9D%82%E8%B0%88/' class="post_tag button button_translucent" title="杂谈">
          杂谈
          <span class="button_tally">2</span>
        </a>
        
        <a href='https://yaoyl.cn/categories/ubuntu/' class="post_tag button button_translucent" title="ubuntu">
          UBUNTU
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://yaoyl.cn/categories/%E6%9E%B6%E6%9E%84/' class="post_tag button button_translucent" title="架构">
          架构
          <span class="button_tally">1</span>
        </a>
        
        <a href='https://yaoyl.cn/categories/%E8%BF%90%E7%BB%B4/' class="post_tag button button_translucent" title="运维">
          运维
          <span class="button_tally">1</span>
        </a>
        
        
      </nav>
    </div>
    <div>
      <h2 class="mt-4 taxonomy" id="series-section">专栏</h2>
      <nav class="tags_nav">
        <a href='https://yaoyl.cn/series/%E5%9F%BA%E7%A1%80%E6%90%AD%E5%BB%BA/' class="post_tag button button_translucent" title="基础搭建">
          基础搭建
          <span class="button_tally">3</span>
        </a>
        
        
      </nav>
    </div>
    <div>
      <h2 class="mt-4 taxonomy" id="tags-section">标签</h2>
      <nav class="tags_nav">
        <a href='https://yaoyl.cn/tags/c&#43;&#43;/' class="post_tag button button_translucent" title="c&#43;&#43;">
          C&#43;&#43;
          <span class="button_tally">16</span>
        </a>
        
        <a href='https://yaoyl.cn/tags/opengl/' class="post_tag button button_translucent" title="opengl">
          OPENGL
          <span class="button_tally">13</span>
        </a>
        
        <a href='https://yaoyl.cn/tags/java/' class="post_tag button button_translucent" title="java">
          JAVA
          <span class="button_tally">9</span>
        </a>
        
        <a href='https://yaoyl.cn/tags/nehe/' class="post_tag button button_translucent" title="nehe">
          NEHE
          <span class="button_tally">9</span>
        </a>
        
        <a href='https://yaoyl.cn/tags/ubuntu/' class="post_tag button button_translucent" title="ubuntu">
          UBUNTU
          <span class="button_tally">5</span>
        </a>
        
        <a href='https://yaoyl.cn/tags/%E9%9D%A2%E7%BB%8F/' class="post_tag button button_translucent" title="面经">
          面经
          <span class="button_tally">5</span>
        </a>
        
        <a href='https://yaoyl.cn/tags/%E8%99%9A%E6%8B%9F%E9%A9%BE%E9%A9%B6/' class="post_tag button button_translucent" title="虚拟驾驶">
          虚拟驾驶
          <span class="button_tally">4</span>
        </a>
        
        <a href='https://yaoyl.cn/tags/docker/' class="post_tag button button_translucent" title="docker">
          DOCKER
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://yaoyl.cn/tags/m1/' class="post_tag button button_translucent" title="m1">
          M1
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://yaoyl.cn/tags/macbook/' class="post_tag button button_translucent" title="macbook">
          MACBOOK
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://yaoyl.cn/tags/rfid/' class="post_tag button button_translucent" title="rfid">
          RFID
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://yaoyl.cn/tags/%E5%AE%B9%E5%99%A8/' class="post_tag button button_translucent" title="容器">
          容器
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://yaoyl.cn/tags/%E6%A0%A1%E6%8B%9B/' class="post_tag button button_translucent" title="校招">
          校招
          <span class="button_tally">3</span>
        </a>
        
        <a href='https://yaoyl.cn/tags/%E7%BD%91%E6%98%93/' class="post_tag button button_translucent" title="网易">
          网易
          <span class="button_tally">3</span>
        </a>
        
        
        <br>
        <div class="post_tags_toggle button">所有标签</div>
        <div class="post_tags">
          <div class="tags_list">
            
            <a href='https://yaoyl.cn/tags/apache/' class=" post_tag button button_translucent" data-position=1 title="apache">APACHE<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/bean%E7%AE%A1%E7%90%86/' class=" post_tag button button_translucent" data-position=1 title="bean管理">BEAN管理<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/blog/' class=" post_tag button button_translucent" data-position=2 title="blog">BLOG<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/c&#43;&#43;/' class=" post_tag button button_translucent" data-position=16 title="c&#43;&#43;">C&#43;&#43;<span class="button_tally">16</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/continue%E6%8F%92%E4%BB%B6/' class=" post_tag button button_translucent" data-position=1 title="continue插件">CONTINUE插件<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/csdn/' class=" post_tag button button_translucent" data-position=1 title="csdn">CSDN<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/c%E8%AF%AD%E8%A8%80/' class=" post_tag button button_translucent" data-position=2 title="c语言">C语言<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/docker/' class=" post_tag button button_translucent" data-position=3 title="docker">DOCKER<span class="button_tally">3</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/ghost/' class=" post_tag button button_translucent" data-position=2 title="ghost">GHOST<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/glgenlists/' class=" post_tag button button_translucent" data-position=1 title="glgenlists">GLGENLISTS<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/glpolygonm/' class=" post_tag button button_translucent" data-position=1 title="glpolygonm">GLPOLYGONM<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/index/' class=" post_tag button button_translucent" data-position=1 title="index">INDEX<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/integer/' class=" post_tag button button_translucent" data-position=1 title="integer">INTEGER<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/java/' class=" post_tag button button_translucent" data-position=9 title="java">JAVA<span class="button_tally">9</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/' class=" post_tag button button_translucent" data-position=1 title="lambda表达式">LAMBDA表达式<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/llm/' class=" post_tag button button_translucent" data-position=1 title="llm">LLM<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/m1/' class=" post_tag button button_translucent" data-position=3 title="m1">M1<span class="button_tally">3</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/macbook/' class=" post_tag button button_translucent" data-position=3 title="macbook">MACBOOK<span class="button_tally">3</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/nehe/' class=" post_tag button button_translucent" data-position=9 title="nehe">NEHE<span class="button_tally">9</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/opengl/' class=" post_tag button button_translucent" data-position=13 title="opengl">OPENGL<span class="button_tally">13</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/python/' class=" post_tag button button_translucent" data-position=2 title="python">PYTHON<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/qwen/' class=" post_tag button button_translucent" data-position=1 title="qwen">QWEN<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/rfid/' class=" post_tag button button_translucent" data-position=3 title="rfid">RFID<span class="button_tally">3</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/socket/' class=" post_tag button button_translucent" data-position=2 title="socket">SOCKET<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/spring/' class=" post_tag button button_translucent" data-position=2 title="spring">SPRING<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/ubuntu/' class=" post_tag button button_translucent" data-position=5 title="ubuntu">UBUNTU<span class="button_tally">5</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/uml/' class=" post_tag button button_translucent" data-position=1 title="uml">UML<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/vs/' class=" post_tag button button_translucent" data-position=1 title="vs">VS<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E5%8F%98%E6%8D%A2/' class=" post_tag button button_translucent" data-position=1 title="变换">变换<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/' class=" post_tag button button_translucent" data-position=1 title="多线程">多线程<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/' class=" post_tag button button_translucent" data-position=1 title="观察者模式">观察者模式<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E6%8E%A5%E5%8F%A3/' class=" post_tag button button_translucent" data-position=1 title="函数式接口">函数式接口<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E5%8D%8E%E4%B8%BA/' class=" post_tag button button_translucent" data-position=1 title="华为">华为<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E6%B7%B7%E5%90%88/' class=" post_tag button button_translucent" data-position=1 title="混合">混合<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E6%9E%B6%E6%9E%84/' class=" post_tag button button_translucent" data-position=1 title="架构">架构<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/' class=" post_tag button button_translucent" data-position=1 title="快捷键">快捷键<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E6%97%85%E6%B8%B8/' class=" post_tag button button_translucent" data-position=1 title="旅游">旅游<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E9%9D%A2%E7%BB%8F/' class=" post_tag button button_translucent" data-position=5 title="面经">面经<span class="button_tally">5</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E7%88%AC%E8%99%AB/' class=" post_tag button button_translucent" data-position=2 title="爬虫">爬虫<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E9%A3%98%E5%8A%A8/' class=" post_tag button button_translucent" data-position=1 title="飘动">飘动<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E5%AE%B9%E5%99%A8/' class=" post_tag button button_translucent" data-position=3 title="容器">容器<span class="button_tally">3</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E8%AE%BE%E8%AE%A1/' class=" post_tag button button_translucent" data-position=1 title="设计">设计<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/' class=" post_tag button button_translucent" data-position=1 title="设计模式">设计模式<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E5%8F%8C%E7%B3%BB%E7%BB%9F/' class=" post_tag button button_translucent" data-position=1 title="双系统">双系统<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E9%9A%8F%E7%AC%94/' class=" post_tag button button_translucent" data-position=3 title="随笔">随笔<span class="button_tally">3</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E8%85%BE%E8%AE%AF/' class=" post_tag button button_translucent" data-position=1 title="腾讯">腾讯<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E5%9B%BE%E5%BA%8A/' class=" post_tag button button_translucent" data-position=1 title="图床">图床<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/' class=" post_tag button button_translucent" data-position=2 title="网络编程">网络编程<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E7%BD%91%E6%98%93/' class=" post_tag button button_translucent" data-position=3 title="网易">网易<span class="button_tally">3</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E6%96%87%E4%BB%B6%E8%BF%81%E7%A7%BB/' class=" post_tag button button_translucent" data-position=1 title="文件迁移">文件迁移<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E6%A0%A1%E6%8B%9B/' class=" post_tag button button_translucent" data-position=3 title="校招">校招<span class="button_tally">3</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E8%99%9A%E6%8B%9F%E9%A9%BE%E9%A9%B6/' class=" post_tag button button_translucent" data-position=4 title="虚拟驾驶">虚拟驾驶<span class="button_tally">4</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E5%BC%82%E6%AD%A5%E9%80%9A%E4%BF%A1/' class=" post_tag button button_translucent" data-position=1 title="异步通信">异步通信<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E6%BA%90%E4%BB%A3%E7%A0%81/' class=" post_tag button button_translucent" data-position=1 title="源代码">源代码<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E6%BA%90%E7%A0%81/' class=" post_tag button button_translucent" data-position=2 title="源码">源码<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E8%BF%90%E7%BB%B4/' class=" post_tag button button_translucent" data-position=1 title="运维">运维<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E6%9D%82%E8%B0%88/' class=" post_tag button button_translucent" data-position=2 title="杂谈">杂谈<span class="button_tally">2</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E6%B3%A8%E8%A7%A3/' class=" post_tag button button_translucent" data-position=1 title="注解">注解<span class="button_tally">1</span>
            </a>
            
            
            <a href='https://yaoyl.cn/tags/%E6%B3%A8%E8%A7%A3%E6%89%AB%E6%8F%8F/' class=" post_tag button button_translucent" data-position=1 title="注解扫描">注解扫描<span class="button_tally">1</span>
            </a>
            
            <div class="tags_sort"><span title="sort alphabetically">[A~Z]</span><span title="sort by count">[0~9]</span>
            </div>
            <span class="tags_hide"><svg class="icon">
            <use xlink:href="#closeme"></use>
          </svg></span>
          </div>
        </div>
      </nav>
    </div>
  </section>
</aside>

  
</div>
    </main><svg width="0" height="0" class="hidden">
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="facebook">
    <path d="M437 0H75C33.648 0 0 33.648 0 75v362c0 41.352 33.648 75 75 75h151V331h-60v-90h60v-61c0-49.629 40.371-90 90-90h91v90h-91v61h91l-15 90h-76v181h121c41.352 0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zm0 0"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.001 18.001" id="twitter">
    <path d="M15.891 4.013c.808-.496 1.343-1.173 1.605-2.034a8.68 8.68 0 0 1-2.351.861c-.703-.756-1.593-1.14-2.66-1.14-1.043 0-1.924.366-2.643 1.078a3.56 3.56 0 0 0-1.076 2.605c0 .309.039.585.117.819-3.076-.105-5.622-1.381-7.628-3.837-.34.601-.51 1.213-.51 1.846 0 1.301.549 2.332 1.645 3.089-.625-.053-1.176-.211-1.645-.47 0 .929.273 1.705.82 2.388a3.623 3.623 0 0 0 2.115 1.291c-.312.08-.641.118-.979.118-.312 0-.533-.026-.664-.083.23.757.664 1.371 1.291 1.841a3.652 3.652 0 0 0 2.152.743C4.148 14.173 2.625 14.69.902 14.69c-.422 0-.721-.006-.902-.038 1.697 1.102 3.586 1.649 5.676 1.649 2.139 0 4.029-.542 5.674-1.626 1.645-1.078 2.859-2.408 3.639-3.974a10.77 10.77 0 0 0 1.172-4.892v-.468a7.788 7.788 0 0 0 1.84-1.921 8.142 8.142 0 0 1-2.11.593z"
      ></path>
  </symbol>
  <symbol aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="mail">
    <path  d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="calendar">
    <path d="M452 40h-24V0h-40v40H124V0H84v40H60C26.916 40 0 66.916 0 100v352c0 33.084 26.916 60 60 60h392c33.084 0 60-26.916 60-60V100c0-33.084-26.916-60-60-60zm20 412c0 11.028-8.972 20-20 20H60c-11.028 0-20-8.972-20-20V188h432v264zm0-304H40v-48c0-11.028 8.972-20 20-20h24v40h40V80h264v40h40V80h24c11.028 0 20 8.972 20 20v48z"></path>
    <path d="M76 230h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 310h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 390h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80-80h40v40h-40z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="github">
    <path d="M255.968 5.329C114.624 5.329 0 120.401 0 262.353c0 113.536 73.344 209.856 175.104 243.872 12.8 2.368 17.472-5.568 17.472-12.384 0-6.112-.224-22.272-.352-43.712-71.2 15.52-86.24-34.464-86.24-34.464-11.616-29.696-28.416-37.6-28.416-37.6-23.264-15.936 1.728-15.616 1.728-15.616 25.696 1.824 39.2 26.496 39.2 26.496 22.848 39.264 59.936 27.936 74.528 21.344 2.304-16.608 8.928-27.936 16.256-34.368-56.832-6.496-116.608-28.544-116.608-127.008 0-28.064 9.984-51.008 26.368-68.992-2.656-6.496-11.424-32.64 2.496-68 0 0 21.504-6.912 70.4 26.336 20.416-5.696 42.304-8.544 64.096-8.64 21.728.128 43.648 2.944 64.096 8.672 48.864-33.248 70.336-26.336 70.336-26.336 13.952 35.392 5.184 61.504 2.56 68 16.416 17.984 26.304 40.928 26.304 68.992 0 98.72-59.84 120.448-116.864 126.816 9.184 7.936 17.376 23.616 17.376 47.584 0 34.368-.32 62.08-.32 70.496 0 6.88 4.608 14.88 17.6 12.352C438.72 472.145 512 375.857 512 262.353 512 120.401 397.376 5.329 255.968 5.329z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 212 212" id="gitlab">
    <path d="M12.3 74.7h54L43.3 3c-1-3.6-6.4-3.6-7.6 0L12.3 74.8z" />
    <path d="M12.3 74.7L.5 111c-1 3.2 0 6.8 3 8.8l101.6 74-92.5-119z"/>
    <path d="M105 193.7l-38.6-119h-54l92.7 119z"/>
    <path d="M105 193.7l38.7-119H66.4l38.7 119z"/>
    <path d="M105 193.7l38.7-119H198l-93 119z"/>
    <path d="M198 74.7l11.6 36.2c1 3 0 6.6-3 8.6l-101.5 74 93-119z"/>
    <path d="M198 74.7h-54.3L167 3c1.2-3.6 6.4-3.6 7.6 0L198 74.8z"/>
  </symbol>
  <symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="rss">
    <circle cx="3.429" cy="20.571" r="3.429"></circle>
    <path d="M11.429 24h4.57C15.999 15.179 8.821 8.001 0 8v4.572c6.302.001 11.429 5.126 11.429 11.428z"></path>
    <path d="M24 24C24 10.766 13.234 0 0 0v4.571c10.714 0 19.43 8.714 19.43 19.429z"></path>
  </symbol>
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="linkedin">
    <path d="M437 0H75C33.648 0 0 33.648 0 75v362c0 41.352 33.648 75 75 75h362c41.352 0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zM181 406h-60V196h60zm0-240h-60v-60h60zm210 240h-60V286c0-16.54-13.46-30-30-30s-30 13.46-30 30v120h-60V196h60v11.309C286.719 202.422 296.93 196 316 196c40.691.043 75 36.547 75 79.688zm0 0"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612" id="to-top">
    <path d="M604.501 440.509L325.398 134.956c-5.331-5.357-12.423-7.627-19.386-7.27-6.989-.357-14.056 1.913-19.387 7.27L7.499 440.509c-9.999 10.024-9.999 26.298 0 36.323s26.223 10.024 36.222 0l262.293-287.164L568.28 476.832c9.999 10.024 26.222 10.024 36.221 0 9.999-10.023 9.999-26.298 0-36.323z"></path>
  </symbol>
  <symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="carly">
    <path d="M504.971 239.029L448 182.059V84c0-46.317-37.682-84-84-84h-44c-13.255 0-24 10.745-24 24s10.745 24 24 24h44c19.851 0 36 16.149 36 36v108c0 6.365 2.529 12.47 7.029 16.971L454.059 256l-47.029 47.029A24.002 24.002 0 0 0 400 320v108c0 19.851-16.149 36-36 36h-44c-13.255 0-24 10.745-24 24s10.745 24 24 24h44c46.318 0 84-37.683 84-84v-98.059l56.971-56.971c9.372-9.372 9.372-24.568 0-33.941zM112 192V84c0-19.851 16.149-36 36-36h44c13.255 0 24-10.745 24-24S205.255 0 192 0h-44c-46.318 0-84 37.683-84 84v98.059l-56.971 56.97c-9.373 9.373-9.373 24.568 0 33.941L64 329.941V428c0 46.317 37.682 84 84 84h44c13.255 0 24-10.745 24-24s-10.745-24-24-24h-44c-19.851 0-36-16.149-36-36V320c0-6.365-2.529-12.47-7.029-16.971L57.941 256l47.029-47.029A24.002 24.002 0 0 0 112 192z"></path>
  </symbol>
  <symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="copy">
    <path d="M23 2.75A2.75 2.75 0 0 0 20.25 0H8.75A2.75 2.75 0 0 0 6 2.75v13.5A2.75 2.75 0 0 0 8.75 19h11.5A2.75 2.75 0 0 0 23 16.25zM18.25 14.5h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5zm0-3h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5zm0-3h-7.5a.75.75 0 0 1 0-1.5h7.5a.75.75 0 0 1 0 1.5z"></path>
    <path d="M8.75 20.5a4.255 4.255 0 0 1-4.25-4.25V2.75c0-.086.02-.166.025-.25H3.75A2.752 2.752 0 0 0 1 5.25v16A2.752 2.752 0 0 0 3.75 24h12a2.752 2.752 0 0 0 2.75-2.75v-.75z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.001 512.001" id="closeme">
    <path d="M284.286 256.002L506.143 34.144c7.811-7.811 7.811-20.475 0-28.285-7.811-7.81-20.475-7.811-28.285 0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285 0-7.81 7.811-7.811 20.475 0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475 0 28.285a19.938 19.938 0 0 0 14.143 5.857 19.94 19.94 0 0 0 14.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475 0-28.285L284.286 256.002z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="open-menu">
    <path d="M492 236H20c-11.046 0-20 8.954-20 20s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20zm0-160H20C8.954 76 0 84.954 0 96s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20zm0 320H20c-11.046 0-20 8.954-20 20s8.954 20 20 20h472c11.046 0 20-8.954 20-20s-8.954-20-20-20z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="instagram">
    <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id=youtube>
    <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="stackoverflow">
    <path d="M21 27v-8h3v11H0V19h3v8h18z"></path><path d="M17.1.2L15 1.8l7.9 10.6 2.1-1.6L17.1.2zm3.7 14.7L10.6 6.4l1.7-2 10.2 8.5-1.7 2zM7.2 12.3l12 5.6 1.1-2.4-12-5.6-1.1 2.4zm-1.8 6.8l13.56 1.96.17-2.38-13.26-2.55-.47 2.97zM19 25H5v-3h14v3z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="xing">
    <path d="M18.188 0c-.517 0-.741.325-.927.66 0 0-7.455 13.224-7.702 13.657.015.024 4.919 9.023 4.919 9.023.17.308.436.66.967.66h3.454c.211 0 .375-.078.463-.22.089-.151.089-.346-.009-.536l-4.879-8.916c-.004-.006-.004-.016 0-.022L22.139.756c.095-.191.097-.387.006-.535C22.056.078 21.894 0 21.686 0h-3.498zM3.648 4.74c-.211 0-.385.074-.473.216-.09.149-.078.339.02.531l2.34 4.05c.004.01.004.016 0 .021L1.86 16.051c-.099.188-.093.381 0 .529.085.142.239.234.45.234h3.461c.518 0 .766-.348.945-.667l3.734-6.609-2.378-4.155c-.172-.315-.434-.659-.962-.659H3.648v.016z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 71 55" id="discord">
    <path d="M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527 0.41542C45.5603 0.39851 45.468 0.440769 45.4204 0.525289C44.7963 1.6353 44.105 3.0834 43.6209 4.2216C38.1637 3.4046 32.7345 3.4046 27.3892 4.2216C26.905 3.0581 26.1886 1.6353 25.5617 0.525289C25.5141 0.443589 25.4218 0.40133 25.3294 0.41542C20.2584 1.2888 15.4057 2.8186 10.8776 4.8978C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795C1.57795 18.7309 -0.943561 32.1443 0.293408 45.3914C0.299005 45.4562 0.335386 45.5182 0.385761 45.5576C6.45866 50.0174 12.3413 52.7249 18.1147 54.5195C18.2071 54.5477 18.305 54.5139 18.3638 54.4378C19.7295 52.5728 20.9469 50.6063 21.9907 48.5383C22.0523 48.4172 21.9935 48.2735 21.8676 48.2256C19.9366 47.4931 18.0979 46.6 16.3292 45.5858C16.1893 45.5041 16.1781 45.304 16.3068 45.2082C16.679 44.9293 17.0513 44.6391 17.4067 44.3461C17.471 44.2926 17.5606 44.2813 17.6362 44.3151C29.2558 49.6202 41.8354 49.6202 53.3179 44.3151C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433C53.9057 44.6363 54.2779 44.9293 54.6529 45.2082C54.7816 45.304 54.7732 45.5041 54.6333 45.5858C52.8646 46.6197 51.0259 47.4931 49.0921 48.2228C48.9662 48.2707 48.9102 48.4172 48.9718 48.5383C50.038 50.6034 51.2554 52.5699 52.5959 54.435C52.6519 54.5139 52.7526 54.5477 52.845 54.5195C58.6464 52.7249 64.529 50.0174 70.6019 45.5576C70.6551 45.5182 70.6887 45.459 70.6943 45.3942C72.1747 30.0791 68.2147 16.7757 60.1968 4.9823C60.1772 4.9429 60.1437 4.9147 60.1045 4.8978ZM23.7259 37.3253C20.2276 37.3253 17.3451 34.1136 17.3451 30.1693C17.3451 26.225 20.1717 23.0133 23.7259 23.0133C27.308 23.0133 30.1626 26.2532 30.1066 30.1693C30.1066 34.1136 27.28 37.3253 23.7259 37.3253ZM47.3178 37.3253C43.8196 37.3253 40.9371 34.1136 40.9371 30.1693C40.9371 26.225 43.7636 23.0133 47.3178 23.0133C50.9 23.0133 53.7545 26.2532 53.6986 30.1693C53.6986 34.1136 50.9 37.3253 47.3178 37.3253Z"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 18" id="mastodon">
    <path
    fill="#ffffff"
    d="m 15.054695,9.8859583 c -0.22611,1.1632697 -2.02517,2.4363497 -4.09138,2.6830797 -1.0774504,0.12856 -2.1382704,0.24673 -3.2694704,0.19484 -1.84996,-0.0848 -3.30971,-0.44157 -3.30971,-0.44157 0,0.1801 0.0111,0.35157 0.0333,0.51194 0.24051,1.82571 1.81034,1.93508 3.29737,1.98607 1.50088,0.0514 2.8373104,-0.37004 2.8373104,-0.37004 l 0.0617,1.35686 c 0,0 -1.0498104,0.56374 -2.9199404,0.66742 -1.03124,0.0567 -2.3117,-0.0259 -3.80308,-0.42069 -3.23454998,-0.85613 -3.79081998,-4.304 -3.87592998,-7.8024197 -0.026,-1.03871 -0.01,-2.01815 -0.01,-2.83732 0,-3.57732 2.34385998,-4.62587996 2.34385998,-4.62587996 1.18184,-0.54277 3.20976,-0.77101 5.318,-0.7882499985409 h 0.0518 C 9.8267646,0.01719834 11.856025,0.24547834 13.037775,0.78824834 c 0,0 2.34377,1.04855996 2.34377,4.62587996 0,0 0.0294,2.63937 -0.32687,4.47183"/>
 <path
    fill="#000000"
    d="m 12.616925,5.6916583 v 4.3315297 h -1.71607 V 5.8189683 c 0,-0.88624 -0.37289,-1.33607 -1.1187604,-1.33607 -0.82467,0 -1.23799,0.53361 -1.23799,1.58875 v 2.30122 h -1.70594 v -2.30122 c 0,-1.05514 -0.4134,-1.58875 -1.23808,-1.58875 -0.74587,0 -1.11876,0.44983 -1.11876,1.33607 v 4.2042197 h -1.71607 V 5.6916583 c 0,-0.88527 0.22541,-1.58876 0.67817,-2.10922 0.46689,-0.52047 1.07833,-0.78727 1.83735,-0.78727 0.87816,0 1.54317,0.33752 1.98288,1.01267 l 0.42744,0.71655 0.42753,-0.71655 c 0.43961,-0.67515 1.10463,-1.01267 1.9828704,-1.01267 0.75893,0 1.37037,0.2668 1.83735,0.78727 0.45268,0.52046 0.67808,1.22395 0.67808,2.10922"/>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 530" id="bluesky" >
    <path d="m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z"/>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" id="ko-fi">
    <path fill="#ffffff" d="M4.5,9.8527H32.7947a0,0,0,0,1,0,0v19.225a9.07,9.07,0,0,1-9.07,9.07H13.57a9.07,9.07,0,0,1-9.07-9.07V9.8527A0,0,0,0,1,4.5,9.8527Z"/>
    <path fill="#000000" d="M12.197,25.9493l6.45,6.45,6.45-6.45a8.2,8.2,0,0,0,2.4016-5.798h0a4.5082,4.5082,0,0,0-4.212-4.5459,4.4262,4.4262,0,0,0-4.64,4.4209,4.4261,4.4261,0,0,0-4.64-4.4209,4.5082,4.5082,0,0,0-4.212,4.5459h0A8.2,8.2,0,0,0,12.197,25.9493Z"/>
    <path fill="#ffffff" d="M32.7947,9.8527H35.73a7.77,7.77,0,0,1,0,15.5394H32.7947"/>
  </svg>
  </symbol>
</svg>

<footer class="footer">
  <div class="footer_inner wrap pale">
    <img src='https://yaoyl.cn/icons/apple-touch-icon.png' class="icon icon_2 transparent" alt="Copyright © 2017–2025, Yunyao Long and the Hugo Authors; 粤ICP备-17050867-1号">
    <p>Copyright&nbsp;<span class="year"></span>&nbsp;COPYRIGHT © 2017–2025, YUNYAO LONG AND THE HUGO AUTHORS; 粤ICP备-17050867-1号. All Rights Reserved</p><a class="to_top" href="#documentTop">
  <svg class="icon">
  <title>to-top</title>
  <use xlink:href="#to-top"></use>
</svg>

</a>

  </div>
</footer>

<script type="text/javascript" src="https://yaoyl.cn//zh/js/bundle.8f271a7a6d395b2060587165126e81bf1265bf8be2a25f4da029201983fd6a1ce76d15acb6cec02a048c2818f979766a191371aff44d01905ff33ee0875706d0.js" integrity="sha512-jycaem05WyBgWHFlEm6BvxJlv4viol9NoCkgGYP9ahznbRWsts7AKgSMKBj5eXZqGRNxr/RNAZBf8z7gh1cG0A==" crossorigin="anonymous"></script>

  <script src="https://yaoyl.cn//js/search.min.4c2b0421d128bbd7c43fc7d662fb5dfd8e439c60ee92c900a26d72d9c3271d2256f5bac9f6f919cddfd55101e9272898716cbb3381b4360bf43a66a5f7664f54.js"></script>

  </body>
</html>
