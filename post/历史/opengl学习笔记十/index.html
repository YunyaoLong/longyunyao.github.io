<!doctype html><html lang=zh data-figures class=page><head><title>OpenGL学习笔记（十） | Chinese</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta name=description content="龙云尧个人博客，转载请注明出处。
CSDN地址：http://blog.csdn.net/michael753951/article/details/72810534
个人blog地址：http://yaoyl.cn/nehexue-xi-bi-ji-shi/

概述
本部分博客将以nehe教程第2课，笔记（三）为蓝 …"><meta name=twitter:card content="summary"><meta name=twitter:creator content="@janedoe"><meta name=twitter:title content="OpenGL学习笔记（十）"><meta name=twitter:image content="https://yaoyl.cn/images/thumbnail.png"><meta property="og:url" content="https://yaoyl.cn/post/%E5%8E%86%E5%8F%B2/opengl%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%8D%81/"><meta property="og:title" content="OpenGL学习笔记（十）"><meta property="og:description" content="龙云尧个人博客，转载请注明出处。
CSDN地址：http://blog.csdn.net/michael753951/article/details/72810534
个人blog地址：http://yaoyl.cn/nehexue-xi-bi-ji-shi/

概述
本部分博客将以nehe教程第2课，笔记（三）为蓝 …"><meta property="og:image" content="https://yaoyl.cn/images/thumbnail.png"><meta name=keywords content="nehe,OpenGL,C++,Ubuntu"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":"https:\/\/yaoyl.cn\/post\/%E5%8E%86%E5%8F%B2\/opengl%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%8D%81\/","name":"Chinese","headline":"OpenGL学习笔记（十）","description":"\u003cp\u003e\u003cstrong\u003e龙云尧个人博客，转载请注明出处。\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eCSDN地址：http://blog.csdn.net/michael753951/article/details/72810534\u003c/p\u003e\n\u003cp\u003e个人blog地址：http://yaoyl.cn/nehexue-xi-bi-ji-shi/\u003c/p\u003e\n\u003chr\u003e\n\u003ch1 id=\"概述\"\u003e概述\u003c/h1\u003e\n\u003cp\u003e本部分博客将以nehe教程第2课，笔记（三）为蓝 …\u003c/p\u003e","url":"https:\/\/yaoyl.cn\/post\/%E5%8E%86%E5%8F%B2\/opengl%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%8D%81\/","datePublished":"2017-05-13T16:49:22Z","dateModified":"2017-05-13T16:49:22Z","keywords":["nehe","OpenGL","C++","Ubuntu"],"articleSection":["C++"],"author":{"@type":"Person","name":"map[name:Yunyao Long]"},"image":{"@type":"ImageObject","url":"https:\/\/yaoyl.cn\/images\/thumbnail.png"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https:\/\/yaoyl.cn\/logos\/logo.png"},"name":"Chinese"}}</script><link rel=apple-touch-icon sizes=180x180 href=https://yaoyl.cn/icons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://yaoyl.cn/icons/favicon-32x32.png><link rel=manifest href=https://yaoyl.cn/icons/site.webmanifest><link rel=canonical href=https://yaoyl.cn/post/%E5%8E%86%E5%8F%B2/opengl%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%8D%81/><link rel=preload href=https://yaoyl.cn/css/styles.dc38388a8f0b890e788bd3a99b7495d14e7d5ac4359ed3b49abeb778497863b284ad4cc7e496ef58c84139295f9bafed82f5a41345eda86bd2d429cccb7c2596.css integrity="sha512-3Dg4io8LiQ54i9Opm3SV0U59WsQ1ntO0mr63eEl4Y7KErUzH5JbvWMhBOSlfm6/tgvWkE0XtqGvS1CnMy3wllg==" as=style crossorigin=anonymous><link rel=preload href=https://yaoyl.cn/zh/js/bundle.a218cea21dfa8b9c5346bc507dae1a9753e4e347b6bdb2e71b8684278779920ccb8c67121f2b77caa97cc3bb82e1f55b11cfea79e196aaafe8c20be128212e2b.js as=script integrity="sha512-ohjOoh36i5xTRrxQfa4al1Pk40e2vbLnG4aEJ4d5kgzLjGcSHyt3yql8w7uC4fVbEc/qeeGWqq/owgvhKCEuKw==" crossorigin=anonymous><link rel=stylesheet type=text/css href=https://yaoyl.cn/css/styles.dc38388a8f0b890e788bd3a99b7495d14e7d5ac4359ed3b49abeb778497863b284ad4cc7e496ef58c84139295f9bafed82f5a41345eda86bd2d429cccb7c2596.css integrity="sha512-3Dg4io8LiQ54i9Opm3SV0U59WsQ1ntO0mr63eEl4Y7KErUzH5JbvWMhBOSlfm6/tgvWkE0XtqGvS1CnMy3wllg==" crossorigin=anonymous></head><body data-code=7 data-lines=false id=documentTop data-lang=zh><header class=nav_header><nav class=nav><a href=https://yaoyl.cn/ class="nav_brand nav_item" title=Chinese><img src=https://yaoyl.cn/logos/logo.png class=logo alt=Chinese><div class=nav_close><div><svg class="icon"><title>open-menu</title><use xlink:href="#open-menu"/></svg>
<svg class="icon"><title>closeme</title><use xlink:href="#closeme"/></svg></div></div></a><div class='nav_body nav_body_left'><div class=nav_parent><a href=https://yaoyl.cn/ class=nav_item title=主页>主页</a></div><div class=nav_parent><a href=https://yaoyl.cn/post/2025/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB-%E5%89%8D%E7%9E%BB/ class=nav_item title=加精>加精</a></div><div class=nav_parent><a href=https://yaoyl.cn/ class=nav_item title=外链>外链 <img src=https://yaoyl.cn/icons/caret-icon.svg alt=icon class=nav_icon></a><div class=nav_sub><span class=nav_child></span>
<a href=https://www.linkedin.com/ class="nav_child nav_item" title=LinkedIn>LinkedIn</a></div></div><div class=nav_parent><a href=https://yaoyl.cn/about/ class=nav_item title=关于我>关于我</a></div><div class=nav_parent><a href=# class=nav_item></a><div class=nav_sub><span class=nav_child></span>
<a href=https://yaoyl.cn/en/ class="nav_child nav_item">English</a>
<a href=https://yaoyl.cn/pt/ class="nav_child nav_item">Português</a>
<a href=https://yaoyl.cn/ class="nav_child nav_item">中文</a></div></div><div class=follow><a href=https://github.com/YunyaoLong><svg class="icon"><title>github</title><use xlink:href="#github"/></svg>
</a><a href=https://www.linkedin.com/in/yunyaolong/><svg class="icon"><title>linkedin</title><use xlink:href="#linkedin"/></svg></a><div class=color_mode><input type=checkbox class=color_choice id=mode></div></div></div></nav></header><main><div class="grid-inverse wrap content"><article class=post_content><h1 class=post_title>OpenGL学习笔记（十）</h1><div class=post_meta><span><svg class="icon"><title>calendar</title><use xlink:href="#calendar"/></svg>
</span><span class=post_date>May 13, 2017
</span><span class=post_time>· 11 分钟阅读</span><span>&nbsp;· <a href=https://yaoyl.cn/tags/nehe/ title=nehe class="post_tag button button_translucent">nehe
</a><a href=https://yaoyl.cn/tags/opengl/ title=OpenGL class="post_tag button button_translucent">OpenGL
</a><a href=https://yaoyl.cn/tags/c++/ title=C++ class="post_tag button button_translucent">C++
</a><a href=https://yaoyl.cn/tags/ubuntu/ title=Ubuntu class="post_tag button button_translucent">Ubuntu
</a></span><span class=page_only>&nbsp;·<div class=post_share>分享到:
<a href="https://twitter.com/intent/tweet?text=OpenGL%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0%ef%bc%88%e5%8d%81%ef%bc%89&url=https%3a%2f%2fyaoyl.cn%2fpost%2f%25E5%258E%2586%25E5%258F%25B2%2fopengl%25E5%25AD%25A6%25E4%25B9%25A0%25E7%25AC%2594%25E8%25AE%25B0%25E5%258D%2581%2f&tw_p=tweetbutton" class=twitter title="分享到 Twitter" target=_blank rel=nofollow><svg class="icon"><title>twitter</title><use xlink:href="#twitter"/></svg>
</a><a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fyaoyl.cn%2fpost%2f%25E5%258E%2586%25E5%258F%25B2%2fopengl%25E5%25AD%25A6%25E4%25B9%25A0%25E7%25AC%2594%25E8%25AE%25B0%25E5%258D%2581%2f&t=OpenGL%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0%ef%bc%88%e5%8d%81%ef%bc%89" class=facebook title="分享到 Facebook" target=_blank rel=nofollow><svg class="icon"><title>facebook</title><use xlink:href="#facebook"/></svg>
</a><a href=#linkedinshare id=linkedinshare class=linkedin title="分享到 LinkedIn" rel=nofollow><svg class="icon"><title>linkedin</title><use xlink:href="#linkedin"/></svg>
</a><a href=https://yaoyl.cn/post/%E5%8E%86%E5%8F%B2/opengl%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E5%8D%81/ title="Copy Link" class="link link_yank"><svg class="icon"><title>copy</title><use xlink:href="#copy"/></svg></a></div></span></div><div class=post_body><p><strong>龙云尧个人博客，转载请注明出处。</strong></p><p>CSDN地址：http://blog.csdn.net/michael753951/article/details/72810534</p><p>个人blog地址：http://yaoyl.cn/nehexue-xi-bi-ji-shi/</p><hr><h1 id=概述>概述</h1><p>本部分博客将以nehe教程第2课，笔记（三）为蓝本，将Windows中完成的基础实验在Ubuntu中进行实现。</p><p>在<a href=http://yaoyl.cn/ubuntu-huan-jing-pei-zhi/>【Ubuntu环境配置】</a>中我们已经对Ubuntu中的OpenGL环境进行了配置，并且完成了最基础的茶壶demo，接下来我们将进行实验相关的后续开发。</p><h1 id=需求分析>需求分析</h1><p>因为实验中我们需要终端接收到的数据能够在图形界面中实时显示出来，这里我们使用nehe教程的第二课内容，绘制一个矩形作为进度条，起始为0%，最高为100%。接着我们将让这个进度条能够对传输过来的信号产生反馈。将整个过程进行拆分，我们可以按照如下步骤进行实现。</p><ol><li>构建一个OpenGL窗口，能够根据本地按键实现进度条控制</li><li>让OpenGL的窗口能够接收其他终端发送过来的消息</li><li>让OpenGL窗口对接收到的信息进行一定的实时反馈（比如进度条变换）</li></ol><h1 id=实验>实验</h1><h2 id=opengl窗口搭建>OpenGL窗口搭建</h2><p>本次使用的代码是以nehe教程第二课中，Linux代码为蓝本，进行修改实现的。<a href=http://nehe.gamedev.net/data/lessons/linux/lesson02.tar.gz>【代码链接】</a></p><p>首先我们将窗口显示中的三角形去掉，留下一个长方形，同时将长方形的右边两个点和左边两个点重合以做出进度条为0%的感觉。代码如下：</p><p><figure><picture><img loading=lazy decoding=async alt=进度条代码 class="image_figure image_internal image_unprocessed" src=https://yaoyl.cn/></picture></figure></p><h3 id=按钮控制的实现>按钮控制的实现</h3><p>我在初始化InitGL的时候，将square_len初始化为0，当有按键触发的时候，square_len++，这样就能够完成进度条的前进工作。</p><p>在原始代码中，我们可以看到main函数中，有一个<code>glutKeyboardFunc</code>方法，传入了<code>keyPressed</code>的地址，在<code>keyPressed</code>中，定义了使用<code>ESC</code>按钮进行退出的方法。我们将在这里进行尝试，试试方向键左和方向键右能不能让窗口出现一些反馈。</p><p>在经过不短的一段时间的寻找之后，我终于找到了在OpenGL中，各种按键的键值是在<code>glut.h</code>中预定义好的。</p><p><figure><picture><img loading=lazy decoding=async alt=键值 class="image_figure image_internal image_unprocessed" src=https://yaoyl.cn/></picture></figure></p><p>参考一片CSDN博客<a href=http://blog.csdn.net/andy20081251/article/details/38922295>【pengl键盘控制一】</a>，我们可以发现在本次程序中，ESC按键确实也刚好是27，这是不是也就意味着我们可以直接按照上面的方法进行修改了？首先我们将ESC的宏定义值修改为102(十进制，对应0x66)，尝试使用左键退出窗体程序。</p><p>但是很意外的，没有成功。是不是按键本身的键值并不是102？</p><p>我对代码进行进一步修改，当有按键活动的时候，记录下来当前按键的键值，将其存进本地文件中。（亲测不能直接printf，因为根本不会显示出来，至于原因待会会有解释）代码如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln> 1</span><span class=cl><span class=cm>/* The function called whenever a key is pressed. */</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=kt>void</span> <span class=nf>keyPressed</span><span class=p>(</span><span class=kt>unsigned</span> <span class=kt>char</span> <span class=n>key</span><span class=p>,</span> <span class=kt>int</span> <span class=n>x</span><span class=p>,</span> <span class=kt>int</span> <span class=n>y</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>    <span class=cm>/* avoid thrashing this procedure */</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=c1>//usleep(100);
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=n>fp</span> <span class=o>=</span> <span class=nf>fopen</span><span class=p>(</span><span class=s>&#34;key_value.txt&#34;</span><span class=p>,</span> <span class=s>&#34;a+&#34;</span><span class=p>);</span> <span class=c1>// a+意味着在文本最后追加
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=c1></span>    <span class=nf>fprintf</span><span class=p>(</span><span class=n>fp</span><span class=p>,</span> <span class=s>&#34;%d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>key</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=nf>fclose</span><span class=p>(</span><span class=n>fp</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=cm>/* If escape is pressed, kill everything. */</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>key</span> <span class=o>==</span> <span class=n>ESCAPE</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>        <span class=cm>/* shut down our window */</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>        <span class=nf>glutDestroyWindow</span><span class=p>(</span><span class=n>window</span><span class=p>);</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>
</span></span><span class=line><span class=ln>15</span><span class=cl>        <span class=cm>/* exit the program...normal termination. */</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>        <span class=nf>exit</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>18</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>尝试按下F1~F12的按键，以及上下左右等按键，以及数字按键之后，我们发现txt文档中只记录下来了数字键值，根本没有其他的键值。</p><p>为了解决这个问题，我特地打开了nehe的lesson10的linux代码（因为这一课会用到方向键进行控制）。发现原来上下左右这类按键需要在main函数中使用<code>glutSpecialFunc</code>方法，传入一个操作函数进行操作。这里我定义了一个<code>specialKeyPressed</code>方法。在尝试获取键值，并且成功之后，我开始在这里进行进度条的控制。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln> 1</span><span class=cl><span class=kt>void</span> <span class=nf>specialKeyPressed</span><span class=p>(</span><span class=kt>int</span> <span class=n>key</span><span class=p>,</span> <span class=kt>int</span> <span class=n>x</span><span class=p>,</span> <span class=kt>int</span> <span class=n>y</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>    <span class=c1>//usleep(100);
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=cm>/*
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=cm>    fp = fopen(&#34;key_value.txt&#34;, &#34;a+&#34;);
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=cm>    fprintf(fp, &#34;%d\n&#34;, key);
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=cm>    fclose(fp);
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=cm>    */</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=k>switch</span><span class=p>(</span><span class=n>key</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>    <span class=k>case</span> <span class=nl>GLUT_KEY_LEFT</span><span class=p>:</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>        <span class=n>square_len</span><span class=o>--</span><span class=p>;</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>square_len</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>)</span> <span class=n>square_len</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>    <span class=k>case</span> <span class=nl>GLUT_KEY_RIGHT</span><span class=p>:</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>        <span class=n>square_len</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>square_len</span> <span class=o>&gt;=</span> <span class=mi>100</span><span class=p>)</span> <span class=n>square_len</span> <span class=o>=</span> <span class=mi>100</span><span class=p>;</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>19</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>为了避免越界，我们需要将square_len控制在0-100之间。同时我们直接使用glut中宏定义的键值，进行按键判断（我已经对键值进行过测试。发现和宏定义的键值确实一致）。</p><p>到这里，我们完成了本次demo的step1，一个使用按键进行进度条控制的OpenGL窗口已经构建成功。</p><h3 id=在opengl创建的控制台窗口中使用网络协议传输>在OpenGL创建的控制台窗口中使用网络协议传输</h3><p>首先，我们需要知道，在之前的Socket编程中，我们使用的一直都是控制台窗口程序进行的测试，但是在本次实验中，我的理想状态是使用OpenGL建立的窗口作为server，新建一个控制台作为client，然后实验中使用client对server进行控制。</p><p>我先定义了一个tcp_server.h头文件。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln> 1</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;sys/types.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;sys/socket.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;netinet/in.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;arpa/inet.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;unistd.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;string.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdlib.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;fcntl.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;sys/shm.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=cp></span>
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=cp>#define MYPORT  8887
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=cp>#define QUEUE   20
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=cp></span>
</span></span><span class=line><span class=ln>15</span><span class=cl><span class=kt>bool</span> <span class=nf>tcp_server_init</span><span class=p>(</span><span class=kt>int</span> <span class=o>&amp;</span><span class=n>server_sockfd</span><span class=p>,</span> <span class=kt>int</span> <span class=o>&amp;</span><span class=n>conn</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>    <span class=c1>///定义sockfd
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=c1></span>    <span class=n>server_sockfd</span> <span class=o>=</span> <span class=nf>socket</span><span class=p>(</span><span class=n>AF_INET</span><span class=p>,</span><span class=n>SOCK_STREAM</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>
</span></span><span class=line><span class=ln>19</span><span class=cl>    <span class=c1>///定义sockaddr_in
</span></span></span><span class=line><span class=ln>20</span><span class=cl><span class=c1></span>    <span class=k>struct</span> <span class=n>sockaddr_in</span> <span class=n>server_sockaddr</span><span class=p>;</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>    <span class=n>server_sockaddr</span><span class=p>.</span><span class=n>sin_family</span> <span class=o>=</span> <span class=n>AF_INET</span><span class=p>;</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>    <span class=n>server_sockaddr</span><span class=p>.</span><span class=n>sin_port</span> <span class=o>=</span> <span class=nf>htons</span><span class=p>(</span><span class=n>MYPORT</span><span class=p>);</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>    <span class=n>server_sockaddr</span><span class=p>.</span><span class=n>sin_addr</span><span class=p>.</span><span class=n>s_addr</span> <span class=o>=</span> <span class=nf>htonl</span><span class=p>(</span><span class=n>INADDR_ANY</span><span class=p>);</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>
</span></span><span class=line><span class=ln>25</span><span class=cl>    <span class=c1>///bind，成功返回0，出错返回-1
</span></span></span><span class=line><span class=ln>26</span><span class=cl><span class=c1></span>    <span class=k>if</span><span class=p>(</span><span class=nf>bind</span><span class=p>(</span><span class=n>server_sockfd</span><span class=p>,(</span><span class=k>struct</span> <span class=n>sockaddr</span> <span class=o>*</span><span class=p>)</span><span class=o>&amp;</span><span class=n>server_sockaddr</span><span class=p>,</span><span class=k>sizeof</span><span class=p>(</span><span class=n>server_sockaddr</span><span class=p>))</span><span class=o>==-</span><span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>        <span class=nf>perror</span><span class=p>(</span><span class=s>&#34;bind&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>        <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>
</span></span><span class=line><span class=ln>31</span><span class=cl>    <span class=c1>///listen，成功返回0，出错返回-1
</span></span></span><span class=line><span class=ln>32</span><span class=cl><span class=c1></span>    <span class=k>if</span><span class=p>(</span><span class=nf>listen</span><span class=p>(</span><span class=n>server_sockfd</span><span class=p>,</span><span class=n>QUEUE</span><span class=p>)</span> <span class=o>==</span> <span class=o>-</span><span class=mi>1</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>        <span class=nf>perror</span><span class=p>(</span><span class=s>&#34;listen&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=ln>34</span><span class=cl>        <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>
</span></span><span class=line><span class=ln>37</span><span class=cl>    <span class=c1>///客户端套接字
</span></span></span><span class=line><span class=ln>38</span><span class=cl><span class=c1></span>    <span class=k>struct</span> <span class=n>sockaddr_in</span> <span class=n>client_addr</span><span class=p>;</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>    <span class=kt>socklen_t</span> <span class=n>length</span> <span class=o>=</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>client_addr</span><span class=p>);</span>
</span></span><span class=line><span class=ln>40</span><span class=cl>
</span></span><span class=line><span class=ln>41</span><span class=cl>    <span class=c1>///成功返回非负描述字，出错返回-1
</span></span></span><span class=line><span class=ln>42</span><span class=cl><span class=c1></span>    <span class=n>conn</span> <span class=o>=</span> <span class=nf>accept</span><span class=p>(</span><span class=n>server_sockfd</span><span class=p>,</span> <span class=p>(</span><span class=k>struct</span> <span class=n>sockaddr</span><span class=o>*</span><span class=p>)</span><span class=o>&amp;</span><span class=n>client_addr</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>length</span><span class=p>);</span>
</span></span><span class=line><span class=ln>43</span><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=n>conn</span><span class=o>&lt;</span><span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>44</span><span class=cl>        <span class=nf>perror</span><span class=p>(</span><span class=s>&#34;connect&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=ln>45</span><span class=cl>        <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=ln>46</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>47</span><span class=cl>    <span class=c1>//printf(&#34;before_conn\n&#34;);
</span></span></span><span class=line><span class=ln>48</span><span class=cl><span class=c1></span>    <span class=k>return</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=ln>49</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>50</span><span class=cl>
</span></span><span class=line><span class=ln>51</span><span class=cl><span class=kt>bool</span> <span class=nf>tcp_server_close</span><span class=p>(</span><span class=kt>int</span> <span class=o>&amp;</span><span class=n>server_sockfd</span><span class=p>,</span> <span class=kt>int</span> <span class=o>&amp;</span><span class=n>conn</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>52</span><span class=cl>    <span class=nf>close</span><span class=p>(</span><span class=n>conn</span><span class=p>);</span>
</span></span><span class=line><span class=ln>53</span><span class=cl>    <span class=nf>close</span><span class=p>(</span><span class=n>server_sockfd</span><span class=p>);</span>
</span></span><span class=line><span class=ln>54</span><span class=cl>    <span class=k>return</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=ln>55</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h4 id=方法一drawglscene中接收消息>方法一，DrawGLScene中接收消息</h4><p>首先我尝试直接在main函数中没有进入glutMainLoop之前，建立tcp连接。（<code>tcp_server_init(server_sockfd, conn);</code>方法在上面已经给出来了）然后在DrawGLScene中接受消息，代码如下。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln> 1</span><span class=cl><span class=cm>/* The main drawing function. */</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=kt>void</span> <span class=nf>DrawGLScene</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=nf>glClear</span><span class=p>(</span><span class=n>GL_COLOR_BUFFER_BIT</span> <span class=o>|</span> <span class=n>GL_DEPTH_BUFFER_BIT</span><span class=p>);</span>     <span class=c1>// Clear The Screen And The Depth Buffer
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=c1></span>    <span class=nf>glLoadIdentity</span><span class=p>();</span>               <span class=c1>// Reset The View
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=nf>memset</span><span class=p>(</span><span class=n>buffer</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=k>sizeof</span><span class=p>(</span><span class=n>buffer</span><span class=p>));</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=kt>int</span> <span class=n>len</span> <span class=o>=</span> <span class=nf>recv</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=n>buffer</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>buffer</span><span class=p>),</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span><span class=o>&lt;</span><span class=n>len</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>buffer</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=mh>0x66</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>            <span class=n>square_len</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>            <span class=k>if</span><span class=p>(</span><span class=n>square_len</span> <span class=o>&gt;=</span> <span class=mi>100</span><span class=p>)</span> <span class=n>square_len</span> <span class=o>=</span> <span class=mi>100</span><span class=p>;</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=n>buffer</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=mh>0x64</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>            <span class=n>square_len</span><span class=o>--</span><span class=p>;</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>            <span class=k>if</span><span class=p>(</span><span class=n>square_len</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>)</span> <span class=n>square_len</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>    <span class=nf>fputs</span><span class=p>(</span><span class=n>buffer</span><span class=p>,</span> <span class=n>stdout</span><span class=p>);</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>    <span class=nf>send</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=n>buffer</span><span class=p>,</span> <span class=n>len</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>
</span></span><span class=line><span class=ln>21</span><span class=cl>    <span class=nf>glTranslatef</span><span class=p>(</span><span class=o>-</span><span class=mf>1.5f</span><span class=p>,</span><span class=mf>0.0f</span><span class=p>,</span><span class=o>-</span><span class=mf>6.0f</span><span class=p>);</span>             <span class=c1>// Move Right 3 Units
</span></span></span><span class=line><span class=ln>22</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln>23</span><span class=cl>    <span class=c1>// draw a square (quadrilateral)
</span></span></span><span class=line><span class=ln>24</span><span class=cl><span class=c1></span>    <span class=nf>glBegin</span><span class=p>(</span><span class=n>GL_QUADS</span><span class=p>);</span>              <span class=c1>// start drawing a polygon (4 sided)
</span></span></span><span class=line><span class=ln>25</span><span class=cl><span class=c1></span>    <span class=nf>glVertex3f</span><span class=p>(</span><span class=o>-</span><span class=mf>1.0f</span><span class=p>,</span> <span class=mf>1.0f</span><span class=p>,</span> <span class=mf>0.0f</span><span class=p>);</span>      <span class=c1>// Top Left
</span></span></span><span class=line><span class=ln>26</span><span class=cl><span class=c1></span>    <span class=nf>glVertex3f</span><span class=p>(</span><span class=o>-</span><span class=mf>1.0f</span><span class=o>+</span><span class=n>square_len</span><span class=o>*</span><span class=mf>0.05</span><span class=p>,</span> <span class=mf>1.0f</span><span class=p>,</span> <span class=mf>0.0f</span><span class=p>);</span>      <span class=c1>// Top Right
</span></span></span><span class=line><span class=ln>27</span><span class=cl><span class=c1></span>    <span class=nf>glVertex3f</span><span class=p>(</span><span class=o>-</span><span class=mf>1.0f</span><span class=o>+</span><span class=n>square_len</span><span class=o>*</span><span class=mf>0.05</span><span class=p>,</span><span class=o>-</span><span class=mf>1.0f</span><span class=p>,</span> <span class=mf>0.0f</span><span class=p>);</span>      <span class=c1>// Bottom Right
</span></span></span><span class=line><span class=ln>28</span><span class=cl><span class=c1></span>    <span class=nf>glVertex3f</span><span class=p>(</span><span class=o>-</span><span class=mf>1.0f</span><span class=p>,</span><span class=o>-</span><span class=mf>1.0f</span><span class=p>,</span> <span class=mf>0.0f</span><span class=p>);</span>      <span class=c1>// Bottom Left
</span></span></span><span class=line><span class=ln>29</span><span class=cl><span class=c1></span>    <span class=nf>glEnd</span><span class=p>();</span>                    <span class=c1>// done with the polygon
</span></span></span><span class=line><span class=ln>30</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln>31</span><span class=cl>    <span class=c1>// swap buffers to display, since we&#39;re double buffered.
</span></span></span><span class=line><span class=ln>32</span><span class=cl><span class=c1></span>    <span class=nf>glutSwapBuffers</span><span class=p>();</span>
</span></span><span class=line><span class=ln>33</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><figure><picture><img loading=lazy decoding=async alt=初次尝试 class="image_figure image_internal image_unprocessed" src=https://yaoyl.cn/></picture></figure></p><p>运行结果如图。</p><p><figure><picture><img loading=lazy decoding=async alt=初次尝试-运行 class="image_figure image_internal image_unprocessed" src=https://yaoyl.cn/></picture></figure></p><p>刚看到这种情况的时候我以为是程序运行出错，于是经过很长一段时间的搜索才找到了一种解决办法，这个办法我待会会说，这里先说目前的这个问题的解决办法。</p><p>首先我们要知道，为什么会出现这个问题，它其实是TCP_\server_init函数中，执行到<code>conn = accept(server_sockfd, (struct sockaddr*)&amp;client\_addr, &amp;length);</code>的时候，在那里停止了，结果导致glut没有继续绘制窗口，最终造成我们看到的窗口很奇怪。对accept稍作了解便知道，这个方法是提取出所监听套接字的等待连接队列中第一个连接请求，创建一个新的套接字，并返回指向该套接字的文件描述符。（参见<a href=http://blog.csdn.net/david_xtd/article/details/7087843>【socket编程之accept()函数】</a>）这个时候，所以，OpenGL中绘制的窗口会这么奇怪，其实就只是因为server在等待客户端的连接，所以才会继续没有往下执行而已。</p><p>我们打开之前的tcp编程中，tcp_client_demo2项目，编译并且运行，和server成功建立上连接成功，理想中，这个时候应该是没有问题了，但是运行以后，显示依然有问题。</p><p><figure><picture><img loading=lazy decoding=async alt=问题2 class="image_figure image_internal image_unprocessed" src=https://yaoyl.cn/></picture></figure></p><p>这里我猜测是因为recv阻塞了整个进程，造成后续画笔绘制没办法绘制。因为当我在client中发送一个f之后，server中的窗口就立刻能够正常移动进度条了。</p><p><figure><picture><img loading=lazy decoding=async alt=解决1 class="image_figure image_internal image_unprocessed" src=https://yaoyl.cn/></picture></figure></p><p>最终的代码如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln>  1</span><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=ln>  2</span><span class=cl><span class=c1>// This code was created by Jeff Molofee &#39;99 (ported to Linux/GLUT by Richard Campbell &#39;99)
</span></span></span><span class=line><span class=ln>  3</span><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=ln>  4</span><span class=cl><span class=c1>// If you&#39;ve found this code useful, please let me know.
</span></span></span><span class=line><span class=ln>  5</span><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=ln>  6</span><span class=cl><span class=c1>// Visit me at www.demonews.com/hosted/nehe
</span></span></span><span class=line><span class=ln>  7</span><span class=cl><span class=c1>// (email Richard Campbell at ulmont@bellsouth.net)
</span></span></span><span class=line><span class=ln>  8</span><span class=cl><span class=c1>//
</span></span></span><span class=line><span class=ln>  9</span><span class=cl><span class=c1></span><span class=cp>#include</span> <span class=cpf>&lt;GL/glut.h&gt;    // Header File For The GLUT Library</span><span class=cp>
</span></span></span><span class=line><span class=ln> 10</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;GL/gl.h&gt;  // Header File For The OpenGL32 Library</span><span class=cp>
</span></span></span><span class=line><span class=ln> 11</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;GL/glu.h&gt; // Header File For The GLu32 Library</span><span class=cp>
</span></span></span><span class=line><span class=ln> 12</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;unistd.h&gt;     // Header File For sleeping.</span><span class=cp>
</span></span></span><span class=line><span class=ln> 13</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=ln> 14</span><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;tcp_server.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=ln> 15</span><span class=cl><span class=cp></span>
</span></span><span class=line><span class=ln> 16</span><span class=cl><span class=cm>/* ASCII code for the escape key. */</span>
</span></span><span class=line><span class=ln> 17</span><span class=cl><span class=cp>#define ESCAPE 27
</span></span></span><span class=line><span class=ln> 18</span><span class=cl><span class=cp>#define VK_LEFT 37
</span></span></span><span class=line><span class=ln> 19</span><span class=cl><span class=cp>#define VK_RIGHT 39
</span></span></span><span class=line><span class=ln> 20</span><span class=cl><span class=cp></span>
</span></span><span class=line><span class=ln> 21</span><span class=cl><span class=n>FILE</span> <span class=o>*</span><span class=n>fp</span> <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span><span class=c1>//需要注意
</span></span></span><span class=line><span class=ln> 22</span><span class=cl><span class=c1></span><span class=kt>int</span> <span class=n>square_len</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 23</span><span class=cl>
</span></span><span class=line><span class=ln> 24</span><span class=cl><span class=cm>/* TCP 链接  */</span>
</span></span><span class=line><span class=ln> 25</span><span class=cl><span class=cp>#define BUFFER_SIZE 1024
</span></span></span><span class=line><span class=ln> 26</span><span class=cl><span class=cp></span><span class=kt>int</span> <span class=n>server_sockfd</span><span class=p>,</span> <span class=n>conn</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 27</span><span class=cl><span class=kt>char</span> <span class=n>buffer</span><span class=p>[</span><span class=n>BUFFER_SIZE</span><span class=p>];</span>
</span></span><span class=line><span class=ln> 28</span><span class=cl><span class=kt>bool</span> <span class=n>server_init_flag</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 29</span><span class=cl>
</span></span><span class=line><span class=ln> 30</span><span class=cl><span class=cm>/* The number of our GLUT window */</span>
</span></span><span class=line><span class=ln> 31</span><span class=cl><span class=kt>int</span> <span class=n>window</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 32</span><span class=cl>
</span></span><span class=line><span class=ln> 33</span><span class=cl><span class=cm>/* A general OpenGL initialization function.  Sets all of the initial parameters. */</span>
</span></span><span class=line><span class=ln> 34</span><span class=cl><span class=kt>void</span> <span class=nf>InitGL</span><span class=p>(</span><span class=kt>int</span> <span class=n>Width</span><span class=p>,</span> <span class=kt>int</span> <span class=n>Height</span><span class=p>)</span> <span class=p>{</span>        <span class=c1>// We call this right after our OpenGL window is created.
</span></span></span><span class=line><span class=ln> 35</span><span class=cl><span class=c1></span>    <span class=nf>glClearColor</span><span class=p>(</span><span class=mf>0.0f</span><span class=p>,</span> <span class=mf>0.0f</span><span class=p>,</span> <span class=mf>0.0f</span><span class=p>,</span> <span class=mf>0.0f</span><span class=p>);</span>       <span class=c1>// This Will Clear The Background Color To Black
</span></span></span><span class=line><span class=ln> 36</span><span class=cl><span class=c1></span>    <span class=nf>glClearDepth</span><span class=p>(</span><span class=mf>1.0</span><span class=p>);</span>              <span class=c1>// Enables Clearing Of The Depth Buffer
</span></span></span><span class=line><span class=ln> 37</span><span class=cl><span class=c1></span>    <span class=nf>glDepthFunc</span><span class=p>(</span><span class=n>GL_LESS</span><span class=p>);</span>               <span class=c1>// The Type Of Depth Test To Do
</span></span></span><span class=line><span class=ln> 38</span><span class=cl><span class=c1></span>    <span class=nf>glEnable</span><span class=p>(</span><span class=n>GL_DEPTH_TEST</span><span class=p>);</span>            <span class=c1>// Enables Depth Testing
</span></span></span><span class=line><span class=ln> 39</span><span class=cl><span class=c1></span>    <span class=nf>glShadeModel</span><span class=p>(</span><span class=n>GL_SMOOTH</span><span class=p>);</span>            <span class=c1>// Enables Smooth Color Shading
</span></span></span><span class=line><span class=ln> 40</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln> 41</span><span class=cl>    <span class=nf>glMatrixMode</span><span class=p>(</span><span class=n>GL_PROJECTION</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 42</span><span class=cl>    <span class=nf>glLoadIdentity</span><span class=p>();</span>               <span class=c1>// Reset The Projection Matrix
</span></span></span><span class=line><span class=ln> 43</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln> 44</span><span class=cl>    <span class=nf>gluPerspective</span><span class=p>(</span><span class=mf>45.0f</span><span class=p>,(</span><span class=n>GLfloat</span><span class=p>)</span><span class=n>Width</span><span class=o>/</span><span class=p>(</span><span class=n>GLfloat</span><span class=p>)</span><span class=n>Height</span><span class=p>,</span><span class=mf>0.1f</span><span class=p>,</span><span class=mf>100.0f</span><span class=p>);</span>   <span class=c1>// Calculate The Aspect Ratio Of The Window
</span></span></span><span class=line><span class=ln> 45</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln> 46</span><span class=cl>    <span class=nf>glMatrixMode</span><span class=p>(</span><span class=n>GL_MODELVIEW</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 47</span><span class=cl>
</span></span><span class=line><span class=ln> 48</span><span class=cl>    <span class=n>square_len</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 49</span><span class=cl>    <span class=n>server_init_flag</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 50</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln> 51</span><span class=cl>
</span></span><span class=line><span class=ln> 52</span><span class=cl><span class=cm>/* The function called when our window is resized (which shouldn&#39;t happen, because we&#39;re fullscreen) */</span>
</span></span><span class=line><span class=ln> 53</span><span class=cl><span class=kt>void</span> <span class=nf>ReSizeGLScene</span><span class=p>(</span><span class=kt>int</span> <span class=n>Width</span><span class=p>,</span> <span class=kt>int</span> <span class=n>Height</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 54</span><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>Height</span><span class=o>==</span><span class=mi>0</span><span class=p>)</span>              <span class=c1>// Prevent A Divide By Zero If The Window Is Too Small
</span></span></span><span class=line><span class=ln> 55</span><span class=cl><span class=c1></span>        <span class=n>Height</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 56</span><span class=cl>
</span></span><span class=line><span class=ln> 57</span><span class=cl>    <span class=nf>glViewport</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=n>Width</span><span class=p>,</span> <span class=n>Height</span><span class=p>);</span>        <span class=c1>// Reset The Current Viewport And Perspective Transformation
</span></span></span><span class=line><span class=ln> 58</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln> 59</span><span class=cl>    <span class=nf>glMatrixMode</span><span class=p>(</span><span class=n>GL_PROJECTION</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 60</span><span class=cl>    <span class=nf>glLoadIdentity</span><span class=p>();</span>
</span></span><span class=line><span class=ln> 61</span><span class=cl>
</span></span><span class=line><span class=ln> 62</span><span class=cl>    <span class=nf>gluPerspective</span><span class=p>(</span><span class=mf>45.0f</span><span class=p>,(</span><span class=n>GLfloat</span><span class=p>)</span><span class=n>Width</span><span class=o>/</span><span class=p>(</span><span class=n>GLfloat</span><span class=p>)</span><span class=n>Height</span><span class=p>,</span><span class=mf>0.1f</span><span class=p>,</span><span class=mf>100.0f</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 63</span><span class=cl>    <span class=nf>glMatrixMode</span><span class=p>(</span><span class=n>GL_MODELVIEW</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 64</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln> 65</span><span class=cl>
</span></span><span class=line><span class=ln> 66</span><span class=cl><span class=cm>/* The main drawing function. */</span>
</span></span><span class=line><span class=ln> 67</span><span class=cl><span class=kt>void</span> <span class=nf>DrawGLScene</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 68</span><span class=cl>
</span></span><span class=line><span class=ln> 69</span><span class=cl>    <span class=nf>glClear</span><span class=p>(</span><span class=n>GL_COLOR_BUFFER_BIT</span> <span class=o>|</span> <span class=n>GL_DEPTH_BUFFER_BIT</span><span class=p>);</span>     <span class=c1>// Clear The Screen And The Depth Buffer
</span></span></span><span class=line><span class=ln> 70</span><span class=cl><span class=c1></span>    <span class=nf>glLoadIdentity</span><span class=p>();</span>               <span class=c1>// Reset The View
</span></span></span><span class=line><span class=ln> 71</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln> 72</span><span class=cl>    <span class=nf>memset</span><span class=p>(</span><span class=n>buffer</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=k>sizeof</span><span class=p>(</span><span class=n>buffer</span><span class=p>));</span>
</span></span><span class=line><span class=ln> 73</span><span class=cl>    <span class=kt>int</span> <span class=n>len</span> <span class=o>=</span> <span class=nf>recv</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=n>buffer</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>buffer</span><span class=p>),</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 74</span><span class=cl>    <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span><span class=o>&lt;</span><span class=n>len</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 75</span><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>buffer</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=mh>0x66</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 76</span><span class=cl>            <span class=n>square_len</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 77</span><span class=cl>            <span class=k>if</span><span class=p>(</span><span class=n>square_len</span> <span class=o>&gt;=</span> <span class=mi>100</span><span class=p>)</span> <span class=n>square_len</span> <span class=o>=</span> <span class=mi>100</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 78</span><span class=cl>        <span class=p>}</span> <span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=n>buffer</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=mh>0x64</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 79</span><span class=cl>            <span class=n>square_len</span><span class=o>--</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 80</span><span class=cl>            <span class=k>if</span><span class=p>(</span><span class=n>square_len</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>)</span> <span class=n>square_len</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 81</span><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=ln> 82</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln> 83</span><span class=cl>    <span class=nf>fputs</span><span class=p>(</span><span class=n>buffer</span><span class=p>,</span> <span class=n>stdout</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 84</span><span class=cl>    <span class=nf>send</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=n>buffer</span><span class=p>,</span> <span class=n>len</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 85</span><span class=cl>
</span></span><span class=line><span class=ln> 86</span><span class=cl>    <span class=nf>glTranslatef</span><span class=p>(</span><span class=o>-</span><span class=mf>1.5f</span><span class=p>,</span><span class=mf>0.0f</span><span class=p>,</span><span class=o>-</span><span class=mf>6.0f</span><span class=p>);</span>             <span class=c1>// Move Right 3 Units
</span></span></span><span class=line><span class=ln> 87</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln> 88</span><span class=cl>    <span class=c1>// draw a square (quadrilateral)
</span></span></span><span class=line><span class=ln> 89</span><span class=cl><span class=c1></span>    <span class=nf>glBegin</span><span class=p>(</span><span class=n>GL_QUADS</span><span class=p>);</span>              <span class=c1>// start drawing a polygon (4 sided)
</span></span></span><span class=line><span class=ln> 90</span><span class=cl><span class=c1></span>    <span class=nf>glVertex3f</span><span class=p>(</span><span class=o>-</span><span class=mf>1.0f</span><span class=p>,</span> <span class=mf>1.0f</span><span class=p>,</span> <span class=mf>0.0f</span><span class=p>);</span>      <span class=c1>// Top Left
</span></span></span><span class=line><span class=ln> 91</span><span class=cl><span class=c1></span>    <span class=nf>glVertex3f</span><span class=p>(</span><span class=o>-</span><span class=mf>1.0f</span><span class=o>+</span><span class=n>square_len</span><span class=o>*</span><span class=mf>0.05</span><span class=p>,</span> <span class=mf>1.0f</span><span class=p>,</span> <span class=mf>0.0f</span><span class=p>);</span>      <span class=c1>// Top Right
</span></span></span><span class=line><span class=ln> 92</span><span class=cl><span class=c1></span>    <span class=nf>glVertex3f</span><span class=p>(</span><span class=o>-</span><span class=mf>1.0f</span><span class=o>+</span><span class=n>square_len</span><span class=o>*</span><span class=mf>0.05</span><span class=p>,</span><span class=o>-</span><span class=mf>1.0f</span><span class=p>,</span> <span class=mf>0.0f</span><span class=p>);</span>      <span class=c1>// Bottom Right
</span></span></span><span class=line><span class=ln> 93</span><span class=cl><span class=c1></span>    <span class=nf>glVertex3f</span><span class=p>(</span><span class=o>-</span><span class=mf>1.0f</span><span class=p>,</span><span class=o>-</span><span class=mf>1.0f</span><span class=p>,</span> <span class=mf>0.0f</span><span class=p>);</span>      <span class=c1>// Bottom Left
</span></span></span><span class=line><span class=ln> 94</span><span class=cl><span class=c1></span>    <span class=nf>glEnd</span><span class=p>();</span>                    <span class=c1>// done with the polygon
</span></span></span><span class=line><span class=ln> 95</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln> 96</span><span class=cl>    <span class=c1>// swap buffers to display, since we&#39;re double buffered.
</span></span></span><span class=line><span class=ln> 97</span><span class=cl><span class=c1></span>    <span class=nf>glutSwapBuffers</span><span class=p>();</span>
</span></span><span class=line><span class=ln> 98</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln> 99</span><span class=cl>
</span></span><span class=line><span class=ln>100</span><span class=cl><span class=cm>/* The function called whenever a key is pressed. */</span>
</span></span><span class=line><span class=ln>101</span><span class=cl><span class=kt>void</span> <span class=nf>keyPressed</span><span class=p>(</span><span class=kt>unsigned</span> <span class=kt>char</span> <span class=n>key</span><span class=p>,</span> <span class=kt>int</span> <span class=n>x</span><span class=p>,</span> <span class=kt>int</span> <span class=n>y</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>102</span><span class=cl>
</span></span><span class=line><span class=ln>103</span><span class=cl>    <span class=cm>/* If escape is pressed, kill everything. */</span>
</span></span><span class=line><span class=ln>104</span><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>key</span> <span class=o>==</span> <span class=n>ESCAPE</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>105</span><span class=cl>        <span class=cm>/* shut down our window */</span>
</span></span><span class=line><span class=ln>106</span><span class=cl>        <span class=nf>glutDestroyWindow</span><span class=p>(</span><span class=n>window</span><span class=p>);</span>
</span></span><span class=line><span class=ln>107</span><span class=cl>
</span></span><span class=line><span class=ln>108</span><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=nf>tcp_server_close</span><span class=p>(</span><span class=n>server_sockfd</span><span class=p>,</span> <span class=n>conn</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>109</span><span class=cl>            <span class=nf>exit</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=ln>110</span><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=ln>111</span><span class=cl>        <span class=cm>/* exit the program...normal termination. */</span>
</span></span><span class=line><span class=ln>112</span><span class=cl>        <span class=nf>exit</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=ln>113</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>114</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>115</span><span class=cl>
</span></span><span class=line><span class=ln>116</span><span class=cl><span class=kt>void</span> <span class=nf>specialKeyPressed</span><span class=p>(</span><span class=kt>int</span> <span class=n>key</span><span class=p>,</span> <span class=kt>int</span> <span class=n>x</span><span class=p>,</span> <span class=kt>int</span> <span class=n>y</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>117</span><span class=cl>    <span class=c1>//usleep(100);
</span></span></span><span class=line><span class=ln>118</span><span class=cl><span class=c1></span>    <span class=k>switch</span><span class=p>(</span><span class=n>key</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>119</span><span class=cl>    <span class=k>case</span> <span class=nl>GLUT_KEY_LEFT</span><span class=p>:</span>
</span></span><span class=line><span class=ln>120</span><span class=cl>        <span class=n>square_len</span><span class=o>--</span><span class=p>;</span>
</span></span><span class=line><span class=ln>121</span><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>square_len</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>)</span> <span class=n>square_len</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=ln>122</span><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=ln>123</span><span class=cl>    <span class=k>case</span> <span class=nl>GLUT_KEY_RIGHT</span><span class=p>:</span>
</span></span><span class=line><span class=ln>124</span><span class=cl>        <span class=n>square_len</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=ln>125</span><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>square_len</span> <span class=o>&gt;=</span> <span class=mi>100</span><span class=p>)</span> <span class=n>square_len</span> <span class=o>=</span> <span class=mi>100</span><span class=p>;</span>
</span></span><span class=line><span class=ln>126</span><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=ln>127</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>128</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>129</span><span class=cl>
</span></span><span class=line><span class=ln>130</span><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>(</span><span class=kt>int</span> <span class=n>argc</span><span class=p>,</span> <span class=kt>char</span> <span class=o>**</span><span class=n>argv</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>131</span><span class=cl>
</span></span><span class=line><span class=ln>132</span><span class=cl>
</span></span><span class=line><span class=ln>133</span><span class=cl>    <span class=cm>/* Initialize GLUT state - glut will take any command line arguments that pertain to it or
</span></span></span><span class=line><span class=ln>134</span><span class=cl><span class=cm>       X Windows - look at its documentation at http://reality.sgi.com/mjk/spec3/spec3.html */</span>
</span></span><span class=line><span class=ln>135</span><span class=cl>    <span class=nf>glutInit</span><span class=p>(</span><span class=o>&amp;</span><span class=n>argc</span><span class=p>,</span> <span class=n>argv</span><span class=p>);</span>
</span></span><span class=line><span class=ln>136</span><span class=cl>
</span></span><span class=line><span class=ln>137</span><span class=cl>    <span class=cm>/* Select type of Display mode:
</span></span></span><span class=line><span class=ln>138</span><span class=cl><span class=cm>       Double buffer
</span></span></span><span class=line><span class=ln>139</span><span class=cl><span class=cm>       RGBA color
</span></span></span><span class=line><span class=ln>140</span><span class=cl><span class=cm>       Alpha components supported
</span></span></span><span class=line><span class=ln>141</span><span class=cl><span class=cm>       Depth buffer */</span>
</span></span><span class=line><span class=ln>142</span><span class=cl>    <span class=nf>glutInitDisplayMode</span><span class=p>(</span><span class=n>GLUT_RGBA</span> <span class=o>|</span> <span class=n>GLUT_DOUBLE</span> <span class=o>|</span> <span class=n>GLUT_ALPHA</span> <span class=o>|</span> <span class=n>GLUT_DEPTH</span><span class=p>);</span>
</span></span><span class=line><span class=ln>143</span><span class=cl>
</span></span><span class=line><span class=ln>144</span><span class=cl>    <span class=cm>/* get a 640 x 480 window */</span>
</span></span><span class=line><span class=ln>145</span><span class=cl>    <span class=nf>glutInitWindowSize</span><span class=p>(</span><span class=mi>640</span><span class=p>,</span> <span class=mi>480</span><span class=p>);</span>
</span></span><span class=line><span class=ln>146</span><span class=cl>
</span></span><span class=line><span class=ln>147</span><span class=cl>    <span class=cm>/* the window starts at the upper left corner of the screen */</span>
</span></span><span class=line><span class=ln>148</span><span class=cl>    <span class=nf>glutInitWindowPosition</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=ln>149</span><span class=cl>
</span></span><span class=line><span class=ln>150</span><span class=cl>    <span class=cm>/* Open a window */</span>
</span></span><span class=line><span class=ln>151</span><span class=cl>    <span class=n>window</span> <span class=o>=</span> <span class=nf>glutCreateWindow</span><span class=p>(</span><span class=s>&#34;我的第一个长方形进度条demo&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=ln>152</span><span class=cl>
</span></span><span class=line><span class=ln>153</span><span class=cl>    <span class=cm>/* Register the function to do all our OpenGL drawing. */</span>
</span></span><span class=line><span class=ln>154</span><span class=cl>    <span class=nf>glutDisplayFunc</span><span class=p>(</span><span class=o>&amp;</span><span class=n>DrawGLScene</span><span class=p>);</span>
</span></span><span class=line><span class=ln>155</span><span class=cl>
</span></span><span class=line><span class=ln>156</span><span class=cl>    <span class=c1>// 全屏
</span></span></span><span class=line><span class=ln>157</span><span class=cl><span class=c1></span>    <span class=cm>/* Go fullscreen.  This is the soonest we could possibly go fullscreen. */</span>
</span></span><span class=line><span class=ln>158</span><span class=cl>    <span class=c1>//glutFullScreen();
</span></span></span><span class=line><span class=ln>159</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln>160</span><span class=cl>    <span class=cm>/* Even if there are no events, redraw our gl scene. */</span>
</span></span><span class=line><span class=ln>161</span><span class=cl>    <span class=nf>glutIdleFunc</span><span class=p>(</span><span class=o>&amp;</span><span class=n>DrawGLScene</span><span class=p>);</span>
</span></span><span class=line><span class=ln>162</span><span class=cl>
</span></span><span class=line><span class=ln>163</span><span class=cl>    <span class=cm>/* Register the function called when our window is resized. */</span>
</span></span><span class=line><span class=ln>164</span><span class=cl>    <span class=nf>glutReshapeFunc</span><span class=p>(</span><span class=o>&amp;</span><span class=n>ReSizeGLScene</span><span class=p>);</span>
</span></span><span class=line><span class=ln>165</span><span class=cl>
</span></span><span class=line><span class=ln>166</span><span class=cl>    <span class=cm>/* Register the function called when the keyboard is pressed. */</span>
</span></span><span class=line><span class=ln>167</span><span class=cl>    <span class=nf>glutKeyboardFunc</span><span class=p>(</span><span class=o>&amp;</span><span class=n>keyPressed</span><span class=p>);</span>
</span></span><span class=line><span class=ln>168</span><span class=cl>
</span></span><span class=line><span class=ln>169</span><span class=cl>    <span class=cm>/* Register the function called when special keys (arrows, page down, etc) are pressed. */</span>
</span></span><span class=line><span class=ln>170</span><span class=cl>    <span class=nf>glutSpecialFunc</span><span class=p>(</span><span class=o>&amp;</span><span class=n>specialKeyPressed</span><span class=p>);</span>
</span></span><span class=line><span class=ln>171</span><span class=cl>
</span></span><span class=line><span class=ln>172</span><span class=cl>    <span class=cm>/* Initialize our window. */</span>
</span></span><span class=line><span class=ln>173</span><span class=cl>    <span class=nf>InitGL</span><span class=p>(</span><span class=mi>640</span><span class=p>,</span> <span class=mi>480</span><span class=p>);</span>
</span></span><span class=line><span class=ln>174</span><span class=cl>
</span></span><span class=line><span class=ln>175</span><span class=cl>    <span class=c1>// 尝试在glutMainLoop之外建立tcp连接
</span></span></span><span class=line><span class=ln>176</span><span class=cl><span class=c1></span>    <span class=nf>tcp_server_init</span><span class=p>(</span><span class=n>server_sockfd</span><span class=p>,</span> <span class=n>conn</span><span class=p>);</span>
</span></span><span class=line><span class=ln>177</span><span class=cl>
</span></span><span class=line><span class=ln>178</span><span class=cl>    <span class=cm>/* Start Event Processing Engine */</span>
</span></span><span class=line><span class=ln>179</span><span class=cl>    <span class=nf>glutMainLoop</span><span class=p>();</span>
</span></span><span class=line><span class=ln>180</span><span class=cl>
</span></span><span class=line><span class=ln>181</span><span class=cl>    <span class=k>return</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=ln>182</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h4 id=方法二在空闲回调函数中接受消息>方法二，在空闲回调函数中接受消息</h4><p>使用空闲回调函数<code>glutIdleFunc</code>。参考博客<a href=http://blog.csdn.net/wuxinliulei/article/details/9103249>【Idle回调函数的使用】</a>（原出处未知），以及一篇很有用的博客<a href=http://blog.163.com/tfn2008@yeah/blog/static/110321319201271153932982/>【OpenGL下图形的交互控制[转]】</a></p><p>在nehe的所有教程中，图像的转变均是在<code>DrawGLScene</code>实现的，这种方法在单纯的图像变换，不存在任何等待的时候，是没有问题的。但是一旦需要等待的时候，就会出现之前截图中那样，图片绘制上出现问题，画面显示会很不流畅，我刚开始接触的时候也以为是自己的代码写的有问题。为了解决这个问题，我们可以试试其他的方法。</p><p>在博客中我们也知道，一般更新场景数据的时候，使用的就是Idle Callback。刚好符合我们的需求。下面我将说明一下代码的编写。</p><p>首先在main函数中已经定义好的部分回调函数后面加上一行空闲回调函数。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln>1</span><span class=cl>    <span class=c1>//tcp_server_init(server_sockfd, conn);
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=c1></span>    <span class=nf>glutIdleFunc</span><span class=p>(</span><span class=o>&amp;</span><span class=n>IdleFun</span><span class=p>);</span>  <span class=c1>// idle 回调函数
</span></span></span></code></pre></div><p>有趣的是，我们发现，<code>DrawGLScene</code>方法也是在空闲回调函数中执行的。不过在main函数中出现两个DrawGLScene函数的时候，对程序的执行并不影响。</p><p>接下来我们定义<code>IdleFun</code>。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln> 1</span><span class=cl><span class=kt>void</span> <span class=nf>IdleFun</span><span class=p>()</span> <span class=p>{</span> <span class=c1>// 回调函数，在控制台中的一些操作，需要在本部分进行控制
</span></span></span><span class=line><span class=ln> 2</span><span class=cl><span class=c1></span>    <span class=c1>//printf(&#34;test\n&#34;);
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=c1></span>    <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>server_init_flag</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>        <span class=c1>//square_len++;
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=c1></span>        <span class=c1>//if(square_len &gt;= 100) square_len = 0;
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=c1></span>        <span class=c1>//printf(&#34;init\n&#34;);
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=c1></span>        <span class=k>if</span><span class=p>(</span><span class=nf>tcp_server_init</span><span class=p>(</span><span class=n>server_sockfd</span><span class=p>,</span> <span class=n>conn</span><span class=p>))</span> <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;success</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>        <span class=k>else</span> <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;false</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>        <span class=n>server_init_flag</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>        <span class=nf>glutPostRedisplay</span><span class=p>();</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>        <span class=nf>memset</span><span class=p>(</span><span class=n>buffer</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=k>sizeof</span><span class=p>(</span><span class=n>buffer</span><span class=p>));</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>        <span class=kt>int</span> <span class=n>len</span> <span class=o>=</span> <span class=nf>recv</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=n>buffer</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>buffer</span><span class=p>),</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>        <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span><span class=o>&lt;</span><span class=n>len</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>            <span class=k>if</span><span class=p>(</span><span class=n>buffer</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=mh>0x66</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>16</span><span class=cl>                <span class=n>square_len</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>                <span class=k>if</span><span class=p>(</span><span class=n>square_len</span> <span class=o>&gt;=</span> <span class=mi>100</span><span class=p>)</span> <span class=n>square_len</span> <span class=o>=</span> <span class=mi>100</span><span class=p>;</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>            <span class=p>}</span> <span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=n>buffer</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=mh>0x64</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>                <span class=n>square_len</span><span class=o>--</span><span class=p>;</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>                <span class=k>if</span><span class=p>(</span><span class=n>square_len</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>)</span> <span class=n>square_len</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>        <span class=nf>fputs</span><span class=p>(</span><span class=n>buffer</span><span class=p>,</span> <span class=n>stdout</span><span class=p>);</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>        <span class=nf>send</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=n>buffer</span><span class=p>,</span> <span class=n>len</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>    <span class=nf>glutPostRedisplay</span><span class=p>();</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>27</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>为了避免反复创建tcp连接，我们使用一个全局bool变量来标志是否已经创建连接。并且我们在刷新完场景数据之后，<strong>一定</strong>要调用<code>glutPostRedisplay</code>刷新当前屏幕，否则当前屏幕不会自动刷新，你也将看不到场景变化。具体参考可见<a href=http://www.cnblogs.com/live41/p/3395899.html>【[译]GLUT教程 - glutPostRedisplay函数】</a>。（这是一篇很好的博客）最终的参考代码如下。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=ln>  1</span><span class=cl>
</span></span><span class=line><span class=ln>  2</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;GL/glut.h&gt;    // Header File For The GLUT Library</span><span class=cp>
</span></span></span><span class=line><span class=ln>  3</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;GL/gl.h&gt;  // Header File For The OpenGL32 Library</span><span class=cp>
</span></span></span><span class=line><span class=ln>  4</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;GL/glu.h&gt; // Header File For The GLu32 Library</span><span class=cp>
</span></span></span><span class=line><span class=ln>  5</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;unistd.h&gt;     // Header File For sleeping.</span><span class=cp>
</span></span></span><span class=line><span class=ln>  6</span><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=ln>  7</span><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;tcp_server.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=ln>  8</span><span class=cl><span class=cp></span>
</span></span><span class=line><span class=ln>  9</span><span class=cl><span class=cm>/* ASCII code for the escape key. */</span>
</span></span><span class=line><span class=ln> 10</span><span class=cl><span class=cp>#define ESCAPE 27
</span></span></span><span class=line><span class=ln> 11</span><span class=cl><span class=cp>#define VK_LEFT 37
</span></span></span><span class=line><span class=ln> 12</span><span class=cl><span class=cp>#define VK_RIGHT 39
</span></span></span><span class=line><span class=ln> 13</span><span class=cl><span class=cp></span>
</span></span><span class=line><span class=ln> 14</span><span class=cl><span class=n>FILE</span> <span class=o>*</span><span class=n>fp</span> <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span><span class=c1>//需要注意
</span></span></span><span class=line><span class=ln> 15</span><span class=cl><span class=c1></span><span class=kt>int</span> <span class=n>square_len</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 16</span><span class=cl>
</span></span><span class=line><span class=ln> 17</span><span class=cl><span class=cm>/* TCP 链接  */</span>
</span></span><span class=line><span class=ln> 18</span><span class=cl><span class=cp>#define BUFFER_SIZE 1024
</span></span></span><span class=line><span class=ln> 19</span><span class=cl><span class=cp></span><span class=kt>int</span> <span class=n>server_sockfd</span><span class=p>,</span> <span class=n>conn</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 20</span><span class=cl><span class=kt>char</span> <span class=n>buffer</span><span class=p>[</span><span class=n>BUFFER_SIZE</span><span class=p>];</span>
</span></span><span class=line><span class=ln> 21</span><span class=cl><span class=kt>bool</span> <span class=n>server_init_flag</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 22</span><span class=cl>
</span></span><span class=line><span class=ln> 23</span><span class=cl><span class=cm>/* The number of our GLUT window */</span>
</span></span><span class=line><span class=ln> 24</span><span class=cl><span class=kt>int</span> <span class=n>window</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 25</span><span class=cl>
</span></span><span class=line><span class=ln> 26</span><span class=cl><span class=cm>/* A general OpenGL initialization function.  Sets all of the initial parameters. */</span>
</span></span><span class=line><span class=ln> 27</span><span class=cl><span class=kt>void</span> <span class=nf>InitGL</span><span class=p>(</span><span class=kt>int</span> <span class=n>Width</span><span class=p>,</span> <span class=kt>int</span> <span class=n>Height</span><span class=p>)</span> <span class=p>{</span>        <span class=c1>// We call this right after our OpenGL window is created.
</span></span></span><span class=line><span class=ln> 28</span><span class=cl><span class=c1></span>    <span class=nf>glClearColor</span><span class=p>(</span><span class=mf>0.0f</span><span class=p>,</span> <span class=mf>0.0f</span><span class=p>,</span> <span class=mf>0.0f</span><span class=p>,</span> <span class=mf>0.0f</span><span class=p>);</span>       <span class=c1>// This Will Clear The Background Color To Black
</span></span></span><span class=line><span class=ln> 29</span><span class=cl><span class=c1></span>    <span class=nf>glClearDepth</span><span class=p>(</span><span class=mf>1.0</span><span class=p>);</span>              <span class=c1>// Enables Clearing Of The Depth Buffer
</span></span></span><span class=line><span class=ln> 30</span><span class=cl><span class=c1></span>    <span class=nf>glDepthFunc</span><span class=p>(</span><span class=n>GL_LESS</span><span class=p>);</span>               <span class=c1>// The Type Of Depth Test To Do
</span></span></span><span class=line><span class=ln> 31</span><span class=cl><span class=c1></span>    <span class=nf>glEnable</span><span class=p>(</span><span class=n>GL_DEPTH_TEST</span><span class=p>);</span>            <span class=c1>// Enables Depth Testing
</span></span></span><span class=line><span class=ln> 32</span><span class=cl><span class=c1></span>    <span class=nf>glShadeModel</span><span class=p>(</span><span class=n>GL_SMOOTH</span><span class=p>);</span>            <span class=c1>// Enables Smooth Color Shading
</span></span></span><span class=line><span class=ln> 33</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln> 34</span><span class=cl>    <span class=nf>glMatrixMode</span><span class=p>(</span><span class=n>GL_PROJECTION</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 35</span><span class=cl>    <span class=nf>glLoadIdentity</span><span class=p>();</span>               <span class=c1>// Reset The Projection Matrix
</span></span></span><span class=line><span class=ln> 36</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln> 37</span><span class=cl>    <span class=nf>gluPerspective</span><span class=p>(</span><span class=mf>45.0f</span><span class=p>,(</span><span class=n>GLfloat</span><span class=p>)</span><span class=n>Width</span><span class=o>/</span><span class=p>(</span><span class=n>GLfloat</span><span class=p>)</span><span class=n>Height</span><span class=p>,</span><span class=mf>0.1f</span><span class=p>,</span><span class=mf>100.0f</span><span class=p>);</span>   <span class=c1>// Calculate The Aspect Ratio Of The Window
</span></span></span><span class=line><span class=ln> 38</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln> 39</span><span class=cl>    <span class=nf>glMatrixMode</span><span class=p>(</span><span class=n>GL_MODELVIEW</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 40</span><span class=cl>
</span></span><span class=line><span class=ln> 41</span><span class=cl>    <span class=n>square_len</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 42</span><span class=cl>    <span class=n>server_init_flag</span> <span class=o>=</span> <span class=nb>false</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 43</span><span class=cl>    <span class=c1>//if(!tcp_server_init(server_sockfd, conn)) exit(1);
</span></span></span><span class=line><span class=ln> 44</span><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=ln> 45</span><span class=cl>
</span></span><span class=line><span class=ln> 46</span><span class=cl><span class=cm>/* The function called when our window is resized (which shouldn&#39;t happen, because we&#39;re fullscreen) */</span>
</span></span><span class=line><span class=ln> 47</span><span class=cl><span class=kt>void</span> <span class=nf>ReSizeGLScene</span><span class=p>(</span><span class=kt>int</span> <span class=n>Width</span><span class=p>,</span> <span class=kt>int</span> <span class=n>Height</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 48</span><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>Height</span><span class=o>==</span><span class=mi>0</span><span class=p>)</span>              <span class=c1>// Prevent A Divide By Zero If The Window Is Too Small
</span></span></span><span class=line><span class=ln> 49</span><span class=cl><span class=c1></span>        <span class=n>Height</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=ln> 50</span><span class=cl>
</span></span><span class=line><span class=ln> 51</span><span class=cl>    <span class=nf>glViewport</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=n>Width</span><span class=p>,</span> <span class=n>Height</span><span class=p>);</span>        <span class=c1>// Reset The Current Viewport And Perspective Transformation
</span></span></span><span class=line><span class=ln> 52</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln> 53</span><span class=cl>    <span class=nf>glMatrixMode</span><span class=p>(</span><span class=n>GL_PROJECTION</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 54</span><span class=cl>    <span class=nf>glLoadIdentity</span><span class=p>();</span>
</span></span><span class=line><span class=ln> 55</span><span class=cl>
</span></span><span class=line><span class=ln> 56</span><span class=cl>    <span class=nf>gluPerspective</span><span class=p>(</span><span class=mf>45.0f</span><span class=p>,(</span><span class=n>GLfloat</span><span class=p>)</span><span class=n>Width</span><span class=o>/</span><span class=p>(</span><span class=n>GLfloat</span><span class=p>)</span><span class=n>Height</span><span class=p>,</span><span class=mf>0.1f</span><span class=p>,</span><span class=mf>100.0f</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 57</span><span class=cl>    <span class=nf>glMatrixMode</span><span class=p>(</span><span class=n>GL_MODELVIEW</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 58</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln> 59</span><span class=cl>
</span></span><span class=line><span class=ln> 60</span><span class=cl><span class=cm>/* The main drawing function. */</span>
</span></span><span class=line><span class=ln> 61</span><span class=cl><span class=kt>void</span> <span class=nf>DrawGLScene</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 62</span><span class=cl>    <span class=nf>glClear</span><span class=p>(</span><span class=n>GL_COLOR_BUFFER_BIT</span> <span class=o>|</span> <span class=n>GL_DEPTH_BUFFER_BIT</span><span class=p>);</span>     <span class=c1>// Clear The Screen And The Depth Buffer
</span></span></span><span class=line><span class=ln> 63</span><span class=cl><span class=c1></span>    <span class=nf>glLoadIdentity</span><span class=p>();</span>               <span class=c1>// Reset The View
</span></span></span><span class=line><span class=ln> 64</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln> 65</span><span class=cl>    <span class=nf>glTranslatef</span><span class=p>(</span><span class=o>-</span><span class=mf>1.5f</span><span class=p>,</span><span class=mf>0.0f</span><span class=p>,</span><span class=o>-</span><span class=mf>6.0f</span><span class=p>);</span>             <span class=c1>// Move Right 3 Units
</span></span></span><span class=line><span class=ln> 66</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln> 67</span><span class=cl>    <span class=c1>// draw a square (quadrilateral)
</span></span></span><span class=line><span class=ln> 68</span><span class=cl><span class=c1></span>    <span class=nf>glBegin</span><span class=p>(</span><span class=n>GL_QUADS</span><span class=p>);</span>              <span class=c1>// start drawing a polygon (4 sided)
</span></span></span><span class=line><span class=ln> 69</span><span class=cl><span class=c1></span>    <span class=nf>glVertex3f</span><span class=p>(</span><span class=o>-</span><span class=mf>1.0f</span><span class=p>,</span> <span class=mf>1.0f</span><span class=p>,</span> <span class=mf>0.0f</span><span class=p>);</span>      <span class=c1>// Top Left
</span></span></span><span class=line><span class=ln> 70</span><span class=cl><span class=c1></span>    <span class=nf>glVertex3f</span><span class=p>(</span><span class=o>-</span><span class=mf>1.0f</span><span class=o>+</span><span class=n>square_len</span><span class=o>*</span><span class=mf>0.05</span><span class=p>,</span> <span class=mf>1.0f</span><span class=p>,</span> <span class=mf>0.0f</span><span class=p>);</span>      <span class=c1>// Top Right
</span></span></span><span class=line><span class=ln> 71</span><span class=cl><span class=c1></span>    <span class=nf>glVertex3f</span><span class=p>(</span><span class=o>-</span><span class=mf>1.0f</span><span class=o>+</span><span class=n>square_len</span><span class=o>*</span><span class=mf>0.05</span><span class=p>,</span><span class=o>-</span><span class=mf>1.0f</span><span class=p>,</span> <span class=mf>0.0f</span><span class=p>);</span>      <span class=c1>// Bottom Right
</span></span></span><span class=line><span class=ln> 72</span><span class=cl><span class=c1></span>    <span class=nf>glVertex3f</span><span class=p>(</span><span class=o>-</span><span class=mf>1.0f</span><span class=p>,</span><span class=o>-</span><span class=mf>1.0f</span><span class=p>,</span> <span class=mf>0.0f</span><span class=p>);</span>      <span class=c1>// Bottom Left
</span></span></span><span class=line><span class=ln> 73</span><span class=cl><span class=c1></span>    <span class=nf>glEnd</span><span class=p>();</span>                    <span class=c1>// done with the polygon
</span></span></span><span class=line><span class=ln> 74</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln> 75</span><span class=cl>    <span class=c1>// swap buffers to display, since we&#39;re double buffered.
</span></span></span><span class=line><span class=ln> 76</span><span class=cl><span class=c1></span>    <span class=nf>glutSwapBuffers</span><span class=p>();</span>
</span></span><span class=line><span class=ln> 77</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln> 78</span><span class=cl>
</span></span><span class=line><span class=ln> 79</span><span class=cl><span class=cm>/* The function called whenever a key is pressed. */</span>
</span></span><span class=line><span class=ln> 80</span><span class=cl><span class=kt>void</span> <span class=nf>keyPressed</span><span class=p>(</span><span class=kt>unsigned</span> <span class=kt>char</span> <span class=n>key</span><span class=p>,</span> <span class=kt>int</span> <span class=n>x</span><span class=p>,</span> <span class=kt>int</span> <span class=n>y</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 81</span><span class=cl>    <span class=cm>/* avoid thrashing this procedure */</span>
</span></span><span class=line><span class=ln> 82</span><span class=cl>    <span class=c1>//usleep(100);
</span></span></span><span class=line><span class=ln> 83</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln> 84</span><span class=cl>    <span class=cm>/* If escape is pressed, kill everything. */</span>
</span></span><span class=line><span class=ln> 85</span><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>key</span> <span class=o>==</span> <span class=n>ESCAPE</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 86</span><span class=cl>        <span class=cm>/* shut down our window */</span>
</span></span><span class=line><span class=ln> 87</span><span class=cl>        <span class=nf>glutDestroyWindow</span><span class=p>(</span><span class=n>window</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 88</span><span class=cl>
</span></span><span class=line><span class=ln> 89</span><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=nf>tcp_server_close</span><span class=p>(</span><span class=n>server_sockfd</span><span class=p>,</span> <span class=n>conn</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 90</span><span class=cl>            <span class=nf>exit</span><span class=p>(</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 91</span><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=ln> 92</span><span class=cl>        <span class=cm>/* exit the program...normal termination. */</span>
</span></span><span class=line><span class=ln> 93</span><span class=cl>        <span class=nf>exit</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=ln> 94</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln> 95</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln> 96</span><span class=cl>
</span></span><span class=line><span class=ln> 97</span><span class=cl><span class=kt>void</span> <span class=nf>specialKeyPressed</span><span class=p>(</span><span class=kt>int</span> <span class=n>key</span><span class=p>,</span> <span class=kt>int</span> <span class=n>x</span><span class=p>,</span> <span class=kt>int</span> <span class=n>y</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 98</span><span class=cl>    <span class=c1>//usleep(100);
</span></span></span><span class=line><span class=ln> 99</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln>100</span><span class=cl>    <span class=k>switch</span><span class=p>(</span><span class=n>key</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>101</span><span class=cl>    <span class=k>case</span> <span class=nl>GLUT_KEY_LEFT</span><span class=p>:</span>
</span></span><span class=line><span class=ln>102</span><span class=cl>        <span class=n>square_len</span><span class=o>--</span><span class=p>;</span>
</span></span><span class=line><span class=ln>103</span><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>square_len</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>)</span> <span class=n>square_len</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=ln>104</span><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=ln>105</span><span class=cl>    <span class=k>case</span> <span class=nl>GLUT_KEY_RIGHT</span><span class=p>:</span>
</span></span><span class=line><span class=ln>106</span><span class=cl>        <span class=n>square_len</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=ln>107</span><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>square_len</span> <span class=o>&gt;=</span> <span class=mi>100</span><span class=p>)</span> <span class=n>square_len</span> <span class=o>=</span> <span class=mi>100</span><span class=p>;</span>
</span></span><span class=line><span class=ln>108</span><span class=cl>        <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=ln>109</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>110</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>111</span><span class=cl>
</span></span><span class=line><span class=ln>112</span><span class=cl><span class=kt>void</span> <span class=nf>IdleFun</span><span class=p>()</span> <span class=p>{</span> <span class=c1>// 回调函数，在控制台中的一些操作，需要在本部分进行控制
</span></span></span><span class=line><span class=ln>113</span><span class=cl><span class=c1></span>    <span class=c1>//printf(&#34;test\n&#34;);
</span></span></span><span class=line><span class=ln>114</span><span class=cl><span class=c1></span>    <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>server_init_flag</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>115</span><span class=cl>        <span class=c1>//square_len++;
</span></span></span><span class=line><span class=ln>116</span><span class=cl><span class=c1></span>        <span class=c1>//if(square_len &gt;= 100) square_len = 0;
</span></span></span><span class=line><span class=ln>117</span><span class=cl><span class=c1></span>        <span class=c1>//printf(&#34;init\n&#34;);
</span></span></span><span class=line><span class=ln>118</span><span class=cl><span class=c1></span>        <span class=k>if</span><span class=p>(</span><span class=nf>tcp_server_init</span><span class=p>(</span><span class=n>server_sockfd</span><span class=p>,</span> <span class=n>conn</span><span class=p>))</span> <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;success</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=ln>119</span><span class=cl>        <span class=k>else</span> <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;false</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=ln>120</span><span class=cl>        <span class=n>server_init_flag</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span>
</span></span><span class=line><span class=ln>121</span><span class=cl>        <span class=nf>glutPostRedisplay</span><span class=p>();</span>
</span></span><span class=line><span class=ln>122</span><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>123</span><span class=cl>        <span class=nf>memset</span><span class=p>(</span><span class=n>buffer</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=k>sizeof</span><span class=p>(</span><span class=n>buffer</span><span class=p>));</span>
</span></span><span class=line><span class=ln>124</span><span class=cl>        <span class=kt>int</span> <span class=n>len</span> <span class=o>=</span> <span class=nf>recv</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=n>buffer</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>buffer</span><span class=p>),</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=ln>125</span><span class=cl>        <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span><span class=o>&lt;</span><span class=n>len</span><span class=p>;</span> <span class=o>++</span><span class=n>i</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>126</span><span class=cl>            <span class=k>if</span><span class=p>(</span><span class=n>buffer</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=mh>0x66</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>127</span><span class=cl>                <span class=n>square_len</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=ln>128</span><span class=cl>                <span class=k>if</span><span class=p>(</span><span class=n>square_len</span> <span class=o>&gt;=</span> <span class=mi>100</span><span class=p>)</span> <span class=n>square_len</span> <span class=o>=</span> <span class=mi>100</span><span class=p>;</span>
</span></span><span class=line><span class=ln>129</span><span class=cl>            <span class=p>}</span> <span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=n>buffer</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>==</span> <span class=mh>0x64</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>130</span><span class=cl>                <span class=n>square_len</span><span class=o>--</span><span class=p>;</span>
</span></span><span class=line><span class=ln>131</span><span class=cl>                <span class=k>if</span><span class=p>(</span><span class=n>square_len</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>)</span> <span class=n>square_len</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=ln>132</span><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=ln>133</span><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=ln>134</span><span class=cl>        <span class=nf>fputs</span><span class=p>(</span><span class=n>buffer</span><span class=p>,</span> <span class=n>stdout</span><span class=p>);</span>
</span></span><span class=line><span class=ln>135</span><span class=cl>        <span class=nf>send</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=n>buffer</span><span class=p>,</span> <span class=n>len</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=ln>136</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>137</span><span class=cl>    <span class=nf>glutPostRedisplay</span><span class=p>();</span>
</span></span><span class=line><span class=ln>138</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>139</span><span class=cl>
</span></span><span class=line><span class=ln>140</span><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>(</span><span class=kt>int</span> <span class=n>argc</span><span class=p>,</span> <span class=kt>char</span> <span class=o>**</span><span class=n>argv</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>141</span><span class=cl>
</span></span><span class=line><span class=ln>142</span><span class=cl>    <span class=cm>/* Initialize GLUT state - glut will take any command line arguments that pertain to it or
</span></span></span><span class=line><span class=ln>143</span><span class=cl><span class=cm>       X Windows - look at its documentation at http://reality.sgi.com/mjk/spec3/spec3.html */</span>
</span></span><span class=line><span class=ln>144</span><span class=cl>    <span class=nf>glutInit</span><span class=p>(</span><span class=o>&amp;</span><span class=n>argc</span><span class=p>,</span> <span class=n>argv</span><span class=p>);</span>
</span></span><span class=line><span class=ln>145</span><span class=cl>
</span></span><span class=line><span class=ln>146</span><span class=cl>    <span class=cm>/* Select type of Display mode:
</span></span></span><span class=line><span class=ln>147</span><span class=cl><span class=cm>       Double buffer
</span></span></span><span class=line><span class=ln>148</span><span class=cl><span class=cm>       RGBA color
</span></span></span><span class=line><span class=ln>149</span><span class=cl><span class=cm>       Alpha components supported
</span></span></span><span class=line><span class=ln>150</span><span class=cl><span class=cm>       Depth buffer */</span>
</span></span><span class=line><span class=ln>151</span><span class=cl>    <span class=nf>glutInitDisplayMode</span><span class=p>(</span><span class=n>GLUT_RGBA</span> <span class=o>|</span> <span class=n>GLUT_DOUBLE</span> <span class=o>|</span> <span class=n>GLUT_ALPHA</span> <span class=o>|</span> <span class=n>GLUT_DEPTH</span><span class=p>);</span>
</span></span><span class=line><span class=ln>152</span><span class=cl>
</span></span><span class=line><span class=ln>153</span><span class=cl>    <span class=cm>/* get a 640 x 480 window */</span>
</span></span><span class=line><span class=ln>154</span><span class=cl>    <span class=nf>glutInitWindowSize</span><span class=p>(</span><span class=mi>640</span><span class=p>,</span> <span class=mi>480</span><span class=p>);</span>
</span></span><span class=line><span class=ln>155</span><span class=cl>
</span></span><span class=line><span class=ln>156</span><span class=cl>    <span class=cm>/* the window starts at the upper left corner of the screen */</span>
</span></span><span class=line><span class=ln>157</span><span class=cl>    <span class=nf>glutInitWindowPosition</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=ln>158</span><span class=cl>
</span></span><span class=line><span class=ln>159</span><span class=cl>    <span class=cm>/* Open a window */</span>
</span></span><span class=line><span class=ln>160</span><span class=cl>    <span class=n>window</span> <span class=o>=</span> <span class=nf>glutCreateWindow</span><span class=p>(</span><span class=s>&#34;我的第一个长方形进度条demo&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=ln>161</span><span class=cl>
</span></span><span class=line><span class=ln>162</span><span class=cl>    <span class=cm>/* Register the function to do all our OpenGL drawing. */</span>
</span></span><span class=line><span class=ln>163</span><span class=cl>    <span class=nf>glutDisplayFunc</span><span class=p>(</span><span class=o>&amp;</span><span class=n>DrawGLScene</span><span class=p>);</span>
</span></span><span class=line><span class=ln>164</span><span class=cl>
</span></span><span class=line><span class=ln>165</span><span class=cl>    <span class=c1>// 全屏
</span></span></span><span class=line><span class=ln>166</span><span class=cl><span class=c1></span>    <span class=cm>/* Go fullscreen.  This is the soonest we could possibly go fullscreen. */</span>
</span></span><span class=line><span class=ln>167</span><span class=cl>    <span class=c1>//glutFullScreen();
</span></span></span><span class=line><span class=ln>168</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln>169</span><span class=cl>    <span class=cm>/* Even if there are no events, redraw our gl scene. */</span>
</span></span><span class=line><span class=ln>170</span><span class=cl>    <span class=nf>glutIdleFunc</span><span class=p>(</span><span class=o>&amp;</span><span class=n>DrawGLScene</span><span class=p>);</span>
</span></span><span class=line><span class=ln>171</span><span class=cl>
</span></span><span class=line><span class=ln>172</span><span class=cl>    <span class=cm>/* Register the function called when our window is resized. */</span>
</span></span><span class=line><span class=ln>173</span><span class=cl>    <span class=nf>glutReshapeFunc</span><span class=p>(</span><span class=o>&amp;</span><span class=n>ReSizeGLScene</span><span class=p>);</span>
</span></span><span class=line><span class=ln>174</span><span class=cl>
</span></span><span class=line><span class=ln>175</span><span class=cl>    <span class=cm>/* Register the function called when the keyboard is pressed. */</span>
</span></span><span class=line><span class=ln>176</span><span class=cl>    <span class=nf>glutKeyboardFunc</span><span class=p>(</span><span class=o>&amp;</span><span class=n>keyPressed</span><span class=p>);</span>
</span></span><span class=line><span class=ln>177</span><span class=cl>
</span></span><span class=line><span class=ln>178</span><span class=cl>    <span class=c1>//tcp_server_init(server_sockfd, conn);
</span></span></span><span class=line><span class=ln>179</span><span class=cl><span class=c1></span>    <span class=nf>glutIdleFunc</span><span class=p>(</span><span class=o>&amp;</span><span class=n>IdleFun</span><span class=p>);</span>  <span class=c1>// idle 回调函数
</span></span></span><span class=line><span class=ln>180</span><span class=cl><span class=c1></span>
</span></span><span class=line><span class=ln>181</span><span class=cl>    <span class=cm>/* Register the function called when special keys (arrows, page down, etc) are pressed. */</span>
</span></span><span class=line><span class=ln>182</span><span class=cl>    <span class=nf>glutSpecialFunc</span><span class=p>(</span><span class=o>&amp;</span><span class=n>specialKeyPressed</span><span class=p>);</span>
</span></span><span class=line><span class=ln>183</span><span class=cl>
</span></span><span class=line><span class=ln>184</span><span class=cl>    <span class=cm>/* Initialize our window. */</span>
</span></span><span class=line><span class=ln>185</span><span class=cl>    <span class=nf>InitGL</span><span class=p>(</span><span class=mi>640</span><span class=p>,</span> <span class=mi>480</span><span class=p>);</span>
</span></span><span class=line><span class=ln>186</span><span class=cl>
</span></span><span class=line><span class=ln>187</span><span class=cl>    <span class=cm>/* Start Event Processing Engine */</span>
</span></span><span class=line><span class=ln>188</span><span class=cl>    <span class=nf>glutMainLoop</span><span class=p>();</span>
</span></span><span class=line><span class=ln>189</span><span class=cl>
</span></span><span class=line><span class=ln>190</span><span class=cl>    <span class=k>return</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=ln>191</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>完成这一步之后，基本上你就能够完成一个能够通过网络通信控制窗口界面的小demo了。</p></div><div class=post_comments></div></article><aside class=sidebar><section class=sidebar_inner><br><div class=search><input type=search class="search_field form_field" placeholder=搜索内容... id=find autocomplete=off data-scope=post>
<label for=find class=search_label><svg class="icon"><title>search</title><use xlink:href="#search"/></svg></label><div class="search_results results"></div></div><h2>Yunyao Long</h2><div class=author_bio>Coding for everything</div><a href=https://yaoyl.cn/about/ class="button mt-1" role=button title=阅读更多>阅读更多</a><h2 class=mt-4>精选文章</h2><ul><li><a href=https://yaoyl.cn/post/2025/%E5%9F%BA%E4%BA%8Econtinue%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8%E5%A4%A7%E6%A8%A1%E5%9E%8B/ class=nav-link title=基于Continue插件使用大模型>基于Continue插件使用大模型</a></li><li><a href=https://yaoyl.cn/post/2025/%E6%90%AD%E5%BB%BA%E6%9C%AC%E5%9C%B0%E5%A4%A7%E6%A8%A1%E5%9E%8B/ class=nav-link title=M1芯片MacBook搭建本地大模型>M1芯片MacBook搭建本地大模型</a></li><li><a href=https://yaoyl.cn/post/2025/m1%E8%8A%AF%E7%89%87macbook%E5%AE%89%E8%A3%85docker/ class=nav-link title=M1芯片MacBook安装Docker>M1芯片MacBook安装Docker</a></li></ul><h2 class=mt-4>最新文章</h2><ul class=flex-column><li><a href=https://yaoyl.cn/post/2025/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB-%E5%89%8D%E7%9E%BB/ class=nav-link title=技术分享-前瞻>技术分享-前瞻</a></li><li><a href=https://yaoyl.cn/post/%E5%8E%86%E5%8F%B2/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/ class=nav-link title=设计模式-观察者模式>设计模式-观察者模式</a></li><li><a href=https://yaoyl.cn/post/%E5%8E%86%E5%8F%B2/uml%E7%B1%BB%E5%9B%BE%E7%BB%98%E5%88%B6%E5%AE%9E%E4%BE%8B/ class=nav-link title=UML类图绘制实例>UML类图绘制实例</a></li><li><a href=https://yaoyl.cn/post/%E5%8E%86%E5%8F%B2/spring%E7%9A%84bean%E7%AE%A1%E7%90%86/ class=nav-link title=Spring的Bean管理>Spring的Bean管理</a></li><li><a href=https://yaoyl.cn/post/%E5%8E%86%E5%8F%B2/%E4%B8%80%E7%82%B9%E7%82%B9%E6%89%8B%E5%86%99spring/ class=nav-link title=一点点手写Spring>一点点手写Spring</a></li><li><a href=https://yaoyl.cn/post/%E5%8E%86%E5%8F%B2/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3%E5%B9%B6%E4%B8%94%E8%BF%9B%E8%A1%8C%E6%89%AB%E6%8F%8F%E8%A7%A3%E6%9E%90/ class=nav-link title=自定义注解并且进行扫描解析>自定义注解并且进行扫描解析</a></li><li><a href=https://yaoyl.cn/post/%E5%8E%86%E5%8F%B2/lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%8E%E5%87%BD%E6%95%B0%E5%BC%8F%E6%8E%A5%E5%8F%A3/ class=nav-link title=Lambda表达式与函数式接口>Lambda表达式与函数式接口</a></li><li><a href=https://yaoyl.cn/post/%E5%8E%86%E5%8F%B2/java%E7%9A%84integer%E7%B1%BB%E6%96%B9%E6%B3%95%E8%A7%A3%E8%AF%BB/ class=nav-link title=Java的Integer类方法解读>Java的Integer类方法解读</a></li></ul><div><h2 class="mt-4 taxonomy" id=categories-section>分类</h2><nav class=tags_nav><a href=https://yaoyl.cn/categories/c++/ class="post_tag button button_translucent" title=c++>C++
<span class=button_tally>17</span>
</a><a href=https://yaoyl.cn/categories/java/ class="post_tag button button_translucent" title=java>JAVA
<span class=button_tally>9</span>
</a><a href=https://yaoyl.cn/categories/%E9%9D%A2%E8%AF%95/ class="post_tag button button_translucent" title=面试>面试
<span class=button_tally>5</span>
</a><a href=https://yaoyl.cn/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/ class="post_tag button button_translucent" title=技术分享>技术分享
<span class=button_tally>4</span>
</a><a href=https://yaoyl.cn/categories/blog/ class="post_tag button button_translucent" title=blog>BLOG
<span class=button_tally>3</span>
</a><a href=https://yaoyl.cn/categories/python/ class="post_tag button button_translucent" title=python>PYTHON
<span class=button_tally>2</span>
</a><a href=https://yaoyl.cn/categories/%E6%9D%82%E8%B0%88/ class="post_tag button button_translucent" title=杂谈>杂谈
<span class=button_tally>2</span>
</a><a href=https://yaoyl.cn/categories/ubuntu/ class="post_tag button button_translucent" title=ubuntu>UBUNTU
<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/categories/%E6%9E%B6%E6%9E%84/ class="post_tag button button_translucent" title=架构>架构
<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/categories/%E8%BF%90%E7%BB%B4/ class="post_tag button button_translucent" title=运维>运维
<span class=button_tally>1</span></a></nav></div><div><h2 class="mt-4 taxonomy" id=series-section>专栏</h2><nav class=tags_nav><a href=https://yaoyl.cn/series/%E5%9F%BA%E7%A1%80%E6%90%AD%E5%BB%BA/ class="post_tag button button_translucent" title=基础搭建>基础搭建
<span class=button_tally>4</span></a></nav></div><div><h2 class="mt-4 taxonomy" id=tags-section>标签</h2><nav class=tags_nav><a href=https://yaoyl.cn/tags/c++/ class="post_tag button button_translucent" title=c++>C++
<span class=button_tally>16</span>
</a><a href=https://yaoyl.cn/tags/opengl/ class="post_tag button button_translucent" title=opengl>OPENGL
<span class=button_tally>13</span>
</a><a href=https://yaoyl.cn/tags/java/ class="post_tag button button_translucent" title=java>JAVA
<span class=button_tally>9</span>
</a><a href=https://yaoyl.cn/tags/nehe/ class="post_tag button button_translucent" title=nehe>NEHE
<span class=button_tally>9</span>
</a><a href=https://yaoyl.cn/tags/ubuntu/ class="post_tag button button_translucent" title=ubuntu>UBUNTU
<span class=button_tally>5</span>
</a><a href=https://yaoyl.cn/tags/%E9%9D%A2%E7%BB%8F/ class="post_tag button button_translucent" title=面经>面经
<span class=button_tally>5</span>
</a><a href=https://yaoyl.cn/tags/%E8%99%9A%E6%8B%9F%E9%A9%BE%E9%A9%B6/ class="post_tag button button_translucent" title=虚拟驾驶>虚拟驾驶
<span class=button_tally>4</span>
</a><a href=https://yaoyl.cn/tags/docker/ class="post_tag button button_translucent" title=docker>DOCKER
<span class=button_tally>3</span>
</a><a href=https://yaoyl.cn/tags/m1/ class="post_tag button button_translucent" title=m1>M1
<span class=button_tally>3</span>
</a><a href=https://yaoyl.cn/tags/macbook/ class="post_tag button button_translucent" title=macbook>MACBOOK
<span class=button_tally>3</span>
</a><a href=https://yaoyl.cn/tags/rfid/ class="post_tag button button_translucent" title=rfid>RFID
<span class=button_tally>3</span>
</a><a href=https://yaoyl.cn/tags/%E5%AE%B9%E5%99%A8/ class="post_tag button button_translucent" title=容器>容器
<span class=button_tally>3</span>
</a><a href=https://yaoyl.cn/tags/%E6%A0%A1%E6%8B%9B/ class="post_tag button button_translucent" title=校招>校招
<span class=button_tally>3</span>
</a><a href=https://yaoyl.cn/tags/%E6%BA%90%E7%A0%81/ class="post_tag button button_translucent" title=源码>源码
<span class=button_tally>3</span></a><br><div class="post_tags_toggle button">所有标签</div><div class=post_tags><div class=tags_list><a href=https://yaoyl.cn/tags/apache/ class="post_tag button button_translucent" data-position=1 title=apache>APACHE<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/bean%E7%AE%A1%E7%90%86/ class="post_tag button button_translucent" data-position=1 title=bean管理>BEAN管理<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/blog/ class="post_tag button button_translucent" data-position=2 title=blog>BLOG<span class=button_tally>2</span>
</a><a href=https://yaoyl.cn/tags/c++/ class="post_tag button button_translucent" data-position=16 title=c++>C++<span class=button_tally>16</span>
</a><a href=https://yaoyl.cn/tags/continue%E6%8F%92%E4%BB%B6/ class="post_tag button button_translucent" data-position=1 title=continue插件>CONTINUE插件<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/csdn/ class="post_tag button button_translucent" data-position=1 title=csdn>CSDN<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/c%E8%AF%AD%E8%A8%80/ class="post_tag button button_translucent" data-position=2 title=c语言>C语言<span class=button_tally>2</span>
</a><a href=https://yaoyl.cn/tags/docker/ class="post_tag button button_translucent" data-position=3 title=docker>DOCKER<span class=button_tally>3</span>
</a><a href=https://yaoyl.cn/tags/ghost/ class="post_tag button button_translucent" data-position=2 title=ghost>GHOST<span class=button_tally>2</span>
</a><a href=https://yaoyl.cn/tags/glgenlists/ class="post_tag button button_translucent" data-position=1 title=glgenlists>GLGENLISTS<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/glpolygonm/ class="post_tag button button_translucent" data-position=1 title=glpolygonm>GLPOLYGONM<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/index/ class="post_tag button button_translucent" data-position=1 title=index>INDEX<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/integer/ class="post_tag button button_translucent" data-position=1 title=integer>INTEGER<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/java/ class="post_tag button button_translucent" data-position=9 title=java>JAVA<span class=button_tally>9</span>
</a><a href=https://yaoyl.cn/tags/lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/ class="post_tag button button_translucent" data-position=1 title=lambda表达式>LAMBDA表达式<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/llm/ class="post_tag button button_translucent" data-position=1 title=llm>LLM<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/m1/ class="post_tag button button_translucent" data-position=3 title=m1>M1<span class=button_tally>3</span>
</a><a href=https://yaoyl.cn/tags/macbook/ class="post_tag button button_translucent" data-position=3 title=macbook>MACBOOK<span class=button_tally>3</span>
</a><a href=https://yaoyl.cn/tags/nehe/ class="post_tag button button_translucent" data-position=9 title=nehe>NEHE<span class=button_tally>9</span>
</a><a href=https://yaoyl.cn/tags/opengl/ class="post_tag button button_translucent" data-position=13 title=opengl>OPENGL<span class=button_tally>13</span>
</a><a href=https://yaoyl.cn/tags/python/ class="post_tag button button_translucent" data-position=2 title=python>PYTHON<span class=button_tally>2</span>
</a><a href=https://yaoyl.cn/tags/qwen/ class="post_tag button button_translucent" data-position=1 title=qwen>QWEN<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/rfid/ class="post_tag button button_translucent" data-position=3 title=rfid>RFID<span class=button_tally>3</span>
</a><a href=https://yaoyl.cn/tags/socket/ class="post_tag button button_translucent" data-position=2 title=socket>SOCKET<span class=button_tally>2</span>
</a><a href=https://yaoyl.cn/tags/spring/ class="post_tag button button_translucent" data-position=2 title=spring>SPRING<span class=button_tally>2</span>
</a><a href=https://yaoyl.cn/tags/ubuntu/ class="post_tag button button_translucent" data-position=5 title=ubuntu>UBUNTU<span class=button_tally>5</span>
</a><a href=https://yaoyl.cn/tags/uml/ class="post_tag button button_translucent" data-position=1 title=uml>UML<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/vs/ class="post_tag button button_translucent" data-position=1 title=vs>VS<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/%E5%8F%98%E6%8D%A2/ class="post_tag button button_translucent" data-position=1 title=变换>变换<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/ class="post_tag button button_translucent" data-position=1 title=多线程>多线程<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/ class="post_tag button button_translucent" data-position=1 title=观察者模式>观察者模式<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/%E5%87%BD%E6%95%B0%E5%BC%8F%E6%8E%A5%E5%8F%A3/ class="post_tag button button_translucent" data-position=1 title=函数式接口>函数式接口<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/%E5%8D%8E%E4%B8%BA/ class="post_tag button button_translucent" data-position=1 title=华为>华为<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/%E6%B7%B7%E5%90%88/ class="post_tag button button_translucent" data-position=1 title=混合>混合<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/%E6%9E%B6%E6%9E%84/ class="post_tag button button_translucent" data-position=1 title=架构>架构<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/ class="post_tag button button_translucent" data-position=1 title=快捷键>快捷键<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/%E6%97%85%E6%B8%B8/ class="post_tag button button_translucent" data-position=1 title=旅游>旅游<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/%E9%9D%A2%E7%BB%8F/ class="post_tag button button_translucent" data-position=5 title=面经>面经<span class=button_tally>5</span>
</a><a href=https://yaoyl.cn/tags/%E7%88%AC%E8%99%AB/ class="post_tag button button_translucent" data-position=2 title=爬虫>爬虫<span class=button_tally>2</span>
</a><a href=https://yaoyl.cn/tags/%E9%A3%98%E5%8A%A8/ class="post_tag button button_translucent" data-position=1 title=飘动>飘动<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/%E5%AE%B9%E5%99%A8/ class="post_tag button button_translucent" data-position=3 title=容器>容器<span class=button_tally>3</span>
</a><a href=https://yaoyl.cn/tags/%E8%AE%BE%E8%AE%A1/ class="post_tag button button_translucent" data-position=1 title=设计>设计<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/%E5%8F%8C%E7%B3%BB%E7%BB%9F/ class="post_tag button button_translucent" data-position=1 title=双系统>双系统<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/%E9%9A%8F%E7%AC%94/ class="post_tag button button_translucent" data-position=3 title=随笔>随笔<span class=button_tally>3</span>
</a><a href=https://yaoyl.cn/tags/%E8%85%BE%E8%AE%AF/ class="post_tag button button_translucent" data-position=1 title=腾讯>腾讯<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/%E5%9B%BE%E5%BA%8A/ class="post_tag button button_translucent" data-position=1 title=图床>图床<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/ class="post_tag button button_translucent" data-position=2 title=网络编程>网络编程<span class=button_tally>2</span>
</a><a href=https://yaoyl.cn/tags/%E7%BD%91%E6%98%93/ class="post_tag button button_translucent" data-position=3 title=网易>网易<span class=button_tally>3</span>
</a><a href=https://yaoyl.cn/tags/%E6%96%87%E4%BB%B6%E8%BF%81%E7%A7%BB/ class="post_tag button button_translucent" data-position=1 title=文件迁移>文件迁移<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/%E6%A0%A1%E6%8B%9B/ class="post_tag button button_translucent" data-position=3 title=校招>校招<span class=button_tally>3</span>
</a><a href=https://yaoyl.cn/tags/%E8%99%9A%E6%8B%9F%E9%A9%BE%E9%A9%B6/ class="post_tag button button_translucent" data-position=4 title=虚拟驾驶>虚拟驾驶<span class=button_tally>4</span>
</a><a href=https://yaoyl.cn/tags/%E5%BC%82%E6%AD%A5%E9%80%9A%E4%BF%A1/ class="post_tag button button_translucent" data-position=1 title=异步通信>异步通信<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/%E6%BA%90%E4%BB%A3%E7%A0%81/ class="post_tag button button_translucent" data-position=1 title=源代码>源代码<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/%E6%BA%90%E7%A0%81/ class="post_tag button button_translucent" data-position=3 title=源码>源码<span class=button_tally>3</span>
</a><a href=https://yaoyl.cn/tags/%E8%BF%90%E7%BB%B4/ class="post_tag button button_translucent" data-position=1 title=运维>运维<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/%E6%9D%82%E8%B0%88/ class="post_tag button button_translucent" data-position=2 title=杂谈>杂谈<span class=button_tally>2</span>
</a><a href=https://yaoyl.cn/tags/%E6%B3%A8%E8%A7%A3/ class="post_tag button button_translucent" data-position=1 title=注解>注解<span class=button_tally>1</span>
</a><a href=https://yaoyl.cn/tags/%E6%B3%A8%E8%A7%A3%E6%89%AB%E6%8F%8F/ class="post_tag button button_translucent" data-position=1 title=注解扫描>注解扫描<span class=button_tally>1</span></a><div class=tags_sort><span title="sort alphabetically">[A~Z]</span><span title="sort by count">[0~9]</span></div><span class=tags_hide><svg class="icon"><use xlink:href="#closeme"/></svg></span></div></div></nav></div></section></aside></div></main><svg width="0" height="0" class="hidden"><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="facebook"><path d="M437 0H75C33.648.0.0 33.648.0 75v362c0 41.352 33.648 75 75 75h151V331h-60v-90h60v-61c0-49.629 40.371-90 90-90h91v90h-91v61h91l-15 90h-76v181h121c41.352.0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zm0 0"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.001 18.001" id="twitter"><path d="M15.891 4.013c.808-.496 1.343-1.173 1.605-2.034a8.68 8.68.0 01-2.351.861c-.703-.756-1.593-1.14-2.66-1.14-1.043.0-1.924.366-2.643 1.078A3.56 3.56.0 008.766 5.383c0 .309.039.585.117.819-3.076-.105-5.622-1.381-7.628-3.837-.34.601-.51 1.213-.51 1.846.0 1.301.549 2.332 1.645 3.089-.625-.053-1.176-.211-1.645-.47.0.929.273 1.705.82 2.388a3.623 3.623.0 002.115 1.291c-.312.08-.641.118-.979.118-.312.0-.533-.026-.664-.083.23.757.664 1.371 1.291 1.841a3.652 3.652.0 002.152.743C4.148 14.173 2.625 14.69.902 14.69c-.422.0-.721-.006-.902-.038 1.697 1.102 3.586 1.649 5.676 1.649 2.139.0 4.029-.542 5.674-1.626 1.645-1.078 2.859-2.408 3.639-3.974a10.77 10.77.0 001.172-4.892v-.468a7.788 7.788.0 001.84-1.921 8.142 8.142.0 01-2.11.593z"/></symbol><symbol aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="mail"><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V4e2c0 26.5-21.5 48-48 48H48c-26.5.0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5.0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="calendar"><path d="M452 40h-24V0h-40v40H124V0H84v40H60C26.916 40 0 66.916.0 1e2v352c0 33.084 26.916 60 60 60h392c33.084.0 60-26.916 60-60V1e2c0-33.084-26.916-60-60-60zm20 412c0 11.028-8.972 20-20 20H60c-11.028.0-20-8.972-20-20V188h432v264zm0-304H40v-48c0-11.028 8.972-20 20-20h24v40h40V80h264v40h40V80h24c11.028.0 20 8.972 20 20v48z"/><path d="M76 230h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 310h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 390h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80-80h40v40h-40z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="github"><path d="M255.968 5.329C114.624 5.329.0 120.401.0 262.353c0 113.536 73.344 209.856 175.104 243.872 12.8 2.368 17.472-5.568 17.472-12.384.0-6.112-.224-22.272-.352-43.712-71.2 15.52-86.24-34.464-86.24-34.464-11.616-29.696-28.416-37.6-28.416-37.6-23.264-15.936 1.728-15.616 1.728-15.616 25.696 1.824 39.2 26.496 39.2 26.496 22.848 39.264 59.936 27.936 74.528 21.344 2.304-16.608 8.928-27.936 16.256-34.368-56.832-6.496-116.608-28.544-116.608-127.008.0-28.064 9.984-51.008 26.368-68.992-2.656-6.496-11.424-32.64 2.496-68 0 0 21.504-6.912 70.4 26.336 20.416-5.696 42.304-8.544 64.096-8.64 21.728.128 43.648 2.944 64.096 8.672 48.864-33.248 70.336-26.336 70.336-26.336 13.952 35.392 5.184 61.504 2.56 68 16.416 17.984 26.304 40.928 26.304 68.992.0 98.72-59.84 120.448-116.864 126.816 9.184 7.936 17.376 23.616 17.376 47.584.0 34.368-.32 62.08-.32 70.496.0 6.88 4.608 14.88 17.6 12.352C438.72 472.145 512 375.857 512 262.353 512 120.401 397.376 5.329 255.968 5.329z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 212 212" id="gitlab"><path d="M12.3 74.7h54L43.3 3c-1-3.6-6.4-3.6-7.6.0L12.3 74.8z"/><path d="M12.3 74.7.5 111c-1 3.2.0 6.8 3 8.8l101.6 74-92.5-119z"/><path d="M105 193.7l-38.6-119h-54l92.7 119z"/><path d="M105 193.7l38.7-119H66.4l38.7 119z"/><path d="M105 193.7l38.7-119H198l-93 119z"/><path d="M198 74.7l11.6 36.2c1 3 0 6.6-3 8.6l-101.5 74 93-119z"/><path d="M198 74.7h-54.3L167 3c1.2-3.6 6.4-3.6 7.6.0L198 74.8z"/></symbol><symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="rss"><circle cx="3.429" cy="20.571" r="3.429"/><path d="M11.429 24h4.57C15.999 15.179 8.821 8.001.0 8v4.572c6.302.001 11.429 5.126 11.429 11.428z"/><path d="M24 24C24 10.766 13.234.0.0.0v4.571c10.714.0 19.43 8.714 19.43 19.429z"/></symbol><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="linkedin"><path d="M437 0H75C33.648.0.0 33.648.0 75v362c0 41.352 33.648 75 75 75h362c41.352.0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zM181 406h-60V196h60zm0-240h-60v-60h60zm210 240h-60V286c0-16.54-13.46-30-30-30s-30 13.46-30 30v120h-60V196h60v11.309C286.719 202.422 296.93 196 316 196c40.691.043 75 36.547 75 79.688zm0 0"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612" id="to-top"><path d="M604.501 440.509 325.398 134.956c-5.331-5.357-12.423-7.627-19.386-7.27-6.989-.357-14.056 1.913-19.387 7.27L7.499 440.509c-9.999 10.024-9.999 26.298.0 36.323s26.223 10.024 36.222.0l262.293-287.164L568.28 476.832c9.999 10.024 26.222 10.024 36.221.0 9.999-10.023 9.999-26.298.0-36.323z"/></symbol><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="carly"><path d="M504.971 239.029 448 182.059V84c0-46.317-37.682-84-84-84h-44c-13.255.0-24 10.745-24 24s10.745 24 24 24h44c19.851.0 36 16.149 36 36v108c0 6.365 2.529 12.47 7.029 16.971L454.059 256l-47.029 47.029A24.002 24.002.0 004e2 320v108c0 19.851-16.149 36-36 36h-44c-13.255.0-24 10.745-24 24s10.745 24 24 24h44c46.318.0 84-37.683 84-84v-98.059l56.971-56.971c9.372-9.372 9.372-24.568.0-33.941zM112 192V84c0-19.851 16.149-36 36-36h44c13.255.0 24-10.745 24-24S205.255.0 192 0h-44c-46.318.0-84 37.683-84 84v98.059l-56.971 56.97c-9.373 9.373-9.373 24.568.0 33.941L64 329.941V428c0 46.317 37.682 84 84 84h44c13.255.0 24-10.745 24-24s-10.745-24-24-24h-44c-19.851.0-36-16.149-36-36V320c0-6.365-2.529-12.47-7.029-16.971L57.941 256l47.029-47.029A24.002 24.002.0 00112 192z"/></symbol><symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="copy"><path d="M23 2.75A2.75 2.75.0 0020.25.0H8.75A2.75 2.75.0 006 2.75v13.5A2.75 2.75.0 008.75 19h11.5A2.75 2.75.0 0023 16.25zM18.25 14.5h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5zm0-3h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5zm0-3h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5z"/><path d="M8.75 20.5A4.255 4.255.0 014.5 16.25V2.75c0-.086.02-.166.025-.25H3.75A2.752 2.752.0 001 5.25v16A2.752 2.752.0 003.75 24h12a2.752 2.752.0 002.75-2.75v-.75z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.001 512.001" id="closeme"><path d="M284.286 256.002 506.143 34.144c7.811-7.811 7.811-20.475.0-28.285-7.811-7.81-20.475-7.811-28.285.0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285.0-7.81 7.811-7.811 20.475.0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475.0 28.285a19.938 19.938.0 0014.143 5.857 19.94 19.94.0 0014.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475.0-28.285L284.286 256.002z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="open-menu"><path d="M492 236H20c-11.046.0-20 8.954-20 20s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20zm0-160H20C8.954 76 0 84.954.0 96s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20zm0 320H20c-11.046.0-20 8.954-20 20s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="instagram"><path d="M12 2.163c3.204.0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849.0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204.0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849.0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741.0 8.333.014 7.053.072c-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.668.072 4.948c.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24s3.668-.014 4.948-.072c4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948s-.014-3.667-.072-4.947c-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403.0-6.162 2.759-6.162 6.162S8.597 18.163 12 18.163s6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zM12 16c-2.209.0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796.0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795.0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="youtube"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23.0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23.0C23.512 20.55 23.971 18.196 24 12c-.029-6.185-.484-8.549-4.385-8.816zM9 16V8l8 3.993L9 16z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="stackoverflow"><path d="M21 27v-8h3v11H0V19h3v8h18z"/><path d="M17.1.2 15 1.8l7.9 10.6 2.1-1.6L17.1.2zm3.7 14.7L10.6 6.4l1.7-2 10.2 8.5-1.7 2zM7.2 12.3l12 5.6 1.1-2.4-12-5.6-1.1 2.4zm-1.8 6.8 13.56 1.96.17-2.38-13.26-2.55-.47 2.97zM19 25H5v-3h14v3z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="xing"><path d="M18.188.0c-.517.0-.741.325-.927.66.0.0-7.455 13.224-7.702 13.657.015.024 4.919 9.023 4.919 9.023.17.308.436.66.967.66h3.454c.211.0.375-.078.463-.22.089-.151.089-.346-.009-.536l-4.879-8.916c-.004-.006-.004-.016.0-.022L22.139.756c.095-.191.097-.387.006-.535C22.056.078 21.894.0 21.686.0h-3.498zM3.648 4.74c-.211.0-.385.074-.473.216-.09.149-.078.339.02.531l2.34 4.05c.004.01.004.016.0.021L1.86 16.051c-.099.188-.093.381.0.529.085.142.239.234.45.234h3.461c.518.0.766-.348.945-.667l3.734-6.609-2.378-4.155c-.172-.315-.434-.659-.962-.659H3.648v.016z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 71 55" id="discord"><path d="M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527.41542 45.5603.39851 45.468.440769 45.4204.525289 44.7963 1.6353 44.105 3.0834 43.6209 4.2216c-5.4572-.817-10.8864-.817-16.2317.0C26.905 3.0581 26.1886 1.6353 25.5617.525289 25.5141.443589 25.4218.40133 25.3294.41542c-5.071.87338-9.9237 2.40318-14.4518 4.48238C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795 1.57795 18.7309-.943561 32.1443.293408 45.3914.299005 45.4562.335386 45.5182.385761 45.5576 6.45866 50.0174 12.3413 52.7249 18.1147 54.5195 18.2071 54.5477 18.305 54.5139 18.3638 54.4378 19.7295 52.5728 20.9469 50.6063 21.9907 48.5383 22.0523 48.4172 21.9935 48.2735 21.8676 48.2256 19.9366 47.4931 18.0979 46.6 16.3292 45.5858 16.1893 45.5041 16.1781 45.304 16.3068 45.2082 16.679 44.9293 17.0513 44.6391 17.4067 44.3461 17.471 44.2926 17.5606 44.2813 17.6362 44.3151c11.6196 5.3051 24.1992 5.3051 35.6817.0C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433 53.9057 44.6363 54.2779 44.9293 54.6529 45.2082 54.7816 45.304 54.7732 45.5041 54.6333 45.5858c-1.7687 1.0339-3.6074 1.9073-5.5412 2.637C48.9662 48.2707 48.9102 48.4172 48.9718 48.5383c1.0662 2.0651 2.2836 4.0316 3.6241 5.8967C52.6519 54.5139 52.7526 54.5477 52.845 54.5195c5.8014-1.7946 11.684-4.5021 17.7569-8.9619C70.6551 45.5182 70.6887 45.459 70.6943 45.3942 72.1747 30.0791 68.2147 16.7757 60.1968 4.9823 60.1772 4.9429 60.1437 4.9147 60.1045 4.8978zM23.7259 37.3253c-3.4983.0-6.3808-3.2117-6.3808-7.156s2.8266-7.156 6.3808-7.156c3.5821.0 6.4367 3.2399 6.3807 7.156.0 3.9443-2.8266 7.156-6.3807 7.156zm23.5919.0c-3.4982.0-6.3807-3.2117-6.3807-7.156s2.8265-7.156 6.3807-7.156c3.5822.0 6.4367 3.2399 6.3808 7.156.0 3.9443-2.7986 7.156-6.3808 7.156z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 18" id="mastodon"><path fill="#fff" d="m15.054695 9.8859583c-.22611 1.1632697-2.02517 2.4363497-4.09138 2.6830797-1.0774504.12856-2.1382704.24673-3.2694704.19484-1.84996-.0848-3.30971-.44157-3.30971-.44157.0.1801.0111.35157.0333.51194.24051 1.82571 1.81034 1.93508 3.29737 1.98607 1.50088.0514 2.8373104-.37004 2.8373104-.37004l.0617 1.35686s-1.0498104.56374-2.9199404.66742c-1.03124.0567-2.3117-.0259-3.80308-.42069-3.23454998-.85613-3.79081998-4.304-3.87592998-7.8024197-.026-1.03871-.01-2.01815-.01-2.83732.0-3.57732 2.34385998-4.62587996 2.34385998-4.62587996 1.18184-.54277 3.20976-.77101 5.318-.7882499985409h.0518C9.8267646.01719834 11.856025.24547834 13.037775.78824834c0 0 2.34377 1.04855996 2.34377 4.62587996.0.0.0294 2.63937-.32687 4.47183"/><path fill="#000" d="m12.616925 5.6916583v4.3315297h-1.71607V5.8189683c0-.88624-.37289-1.33607-1.1187604-1.33607-.82467.0-1.23799.53361-1.23799 1.58875v2.30122h-1.70594v-2.30122c0-1.05514-.4134-1.58875-1.23808-1.58875-.74587.0-1.11876.44983-1.11876 1.33607v4.2042197h-1.71607V5.6916583c0-.88527.22541-1.58876.67817-2.10922.46689-.52047 1.07833-.78727 1.83735-.78727.87816.0 1.54317.33752 1.98288 1.01267l.42744.71655.42753-.71655c.43961-.67515 1.10463-1.01267 1.9828704-1.01267.75893.0 1.37037.2668 1.83735.78727.45268.52046.67808 1.22395.67808 2.10922"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 530" id="bluesky"><path d="m135.72 44.03C202.216 93.951 273.74 195.17 3e2 249.49c26.262-54.316 97.782-155.54 164.28-205.46C512.26 8.009 590-19.862 590 68.825c0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-.0174-2.9357-1.1937.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07.0-88.687 77.742-60.816 125.72-24.795z"/><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" id="ko-fi"><path fill="#fff" d="M4.5 9.8527H32.7947a0 0 0 010 0v19.225a9.07 9.07.0 01-9.07 9.07H13.57a9.07 9.07.0 01-9.07-9.07V9.8527a0 0 0 010 0z"/><path fill="#000" d="M12.197 25.9493l6.45 6.45 6.45-6.45a8.2 8.2.0 002.4016-5.798h0a4.5082 4.5082.0 00-4.212-4.5459 4.4262 4.4262.0 00-4.64 4.4209 4.4261 4.4261.0 00-4.64-4.4209 4.5082 4.5082.0 00-4.212 4.5459h0a8.2 8.2.0 002.4024 5.798z"/><path fill="#fff" d="M32.7947 9.8527H35.73a7.77 7.77.0 010 15.5394H32.7947"/></svg></symbol></svg><footer class=footer><div class="footer_inner wrap pale"><img src=https://yaoyl.cn/icons/apple-touch-icon.png class="icon icon_2 transparent" alt="Copyright © 2017–2025, Yunyao Long and the Hugo Authors; 粤ICP备-17050867-1号"><p>Copyright&nbsp;<span class=year></span>&nbsp;COPYRIGHT © 2017–2025, YUNYAO LONG AND THE HUGO AUTHORS; 粤ICP备-17050867-1号. All Rights Reserved</p><a class=to_top href=#documentTop><svg class="icon"><title>to-top</title><use xlink:href="#to-top"/></svg></a></div></footer><script type=text/javascript src=https://yaoyl.cn/zh/js/bundle.a218cea21dfa8b9c5346bc507dae1a9753e4e347b6bdb2e71b8684278779920ccb8c67121f2b77caa97cc3bb82e1f55b11cfea79e196aaafe8c20be128212e2b.js integrity="sha512-ohjOoh36i5xTRrxQfa4al1Pk40e2vbLnG4aEJ4d5kgzLjGcSHyt3yql8w7uC4fVbEc/qeeGWqq/owgvhKCEuKw==" crossorigin=anonymous></script><script src=https://yaoyl.cn/js/search.min.4c2b0421d128bbd7c43fc7d662fb5dfd8e439c60ee92c900a26d72d9c3271d2256f5bac9f6f919cddfd55101e9272898716cbb3381b4360bf43a66a5f7664f54.js></script></body></html>